{
  "project": {
    "name": "Crypto Futures Dashboard",
    "progress": {
      "P2": "95%",
      "P3": "20%"
    }
  },
  "code": {
    "files": [
      {
        "path": "backend\\src\\futuresboard\\app.py",
        "type": ".py",
        "content": "ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IGpzb24KaW1wb3J0IGxvZ2dpbmcKaW1wb3J0IHBhdGhsaWIKaW1wb3J0IHNxbGl0ZTMKZnJvbSBsb2dnaW5nLmhhbmRsZXJzIGltcG9ydCBSb3RhdGluZ0ZpbGVIYW5kbGVyCgppbXBvcnQgYXJncGFyc2UKaW1wb3J0IG9zCmZyb20gZG90ZW52IGltcG9ydCBsb2FkX2RvdGVudiAgIyAuZW52IGxvYWQgKEFQSV9LRVksIEFVVE9fU0NSQVBFX0lOVEVSVkFMKQoKIyBTeXMucGF0aCBoYWNrIGZvciByZWxhdGl2ZSBpbXBvcnRzIGluIHNjcmlwdCBtb2RlIChQeWxhbmNlL1ZTQ29kZSByZXNvbHZlcyDigJMgdG9wIGJlZm9yZSBpbXBvcnRzKQpmcm9tIHN5cyBpbXBvcnQgcGF0aApwYXRoLmFwcGVuZChvcy5wYXRoLmRpcm5hbWUob3MucGF0aC5kaXJuYW1lKF9fZmlsZV9fKSkpICAjIEFkZCBzcmMgcGFyZW50IChiYWNrZW5kKQoKZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIHJlZGlyZWN0LCByZXF1ZXN0LCByZW5kZXJfdGVtcGxhdGUsIGN1cnJlbnRfYXBwLCBqc29uaWZ5ICAjIEFkZGVkIGpzb25pZnkKZnJvbSBmbGFza19jb3JzIGltcG9ydCBDT1JTICAjIEZvciBmcm9udGVuZCBmZXRjaGVzCmZyb20gZmxhc2tfc29ja2V0aW8gaW1wb3J0IFNvY2tldElPICAjIFdTIGZvciBQaGFzZSAxIHJlZnJlc2hlcwoKIyBSZWxhdGl2ZSBpbXBvcnRzIChmaXggYWJzb2x1dGUgZmFpbDsgZnJvbSAuKQpmcm9tIC4gaW1wb3J0IGJsdWVwcmludApmcm9tIC4gaW1wb3J0IGRiCmZyb20gLmNvbmZpZyBpbXBvcnQgQ29uZmlnCmZyb20gLmRiIGltcG9ydCBnZXRfbGF0ZXN0X21ldHJpY3MsIGdldF9tZXRyaWNzX2J5X3N5bWJvbCwgTWV0cmljICAjIFJlbGF0aXZlOiBNZXRyaWMgZm9yIGNvbHMgc2VyaWFsaXplCmZyb20gLm1ldHJpY3MgaW1wb3J0IG1ldHJpY3NfYnAgICMgUmVsYXRpdmUKCnNvY2tldGlvID0gTm9uZSAgIyBNb2R1bGUtbGV2ZWwgZXhwb3J0IGZvciBzY3JhcGVyIGltcG9ydCAoc2V0IGluIGluaXRfYXBwKQoKCmRlZiBjbGVhcl90cmFpbGluZygpOgogICAgcnAgPSByZXF1ZXN0LnBhdGggCiAgICBpZiBycCAhPSAiLyIgYW5kIHJwLmVuZHN3aXRoKCIvIikgYW5kIG5vdCBycC5zdGFydHN3aXRoKCcvc29ja2V0LmlvJyk6CiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KHJwWzotMV0pCgoKZGVmIGluaXRfYXBwKGNvbmZpZzogQ29uZmlnIHwgTm9uZSA9IE5vbmUpOgogICAgZ2xvYmFsIHNvY2tldGlvICAjIFNldCBtb2R1bGUtbGV2ZWwKICAgIGlmIGNvbmZpZyBpcyBOb25lOgogICAgICAgIGNvbmZpZyA9IENvbmZpZy5mcm9tX2NvbmZpZ19kaXIocGF0aGxpYi5QYXRoLmN3ZCgpKQoKICAgIGFwcCA9IEZsYXNrKF9fbmFtZV9fKQogICAgCiAgICAjIENvbmZpZyBsb2FkOiBIYW5kbGUgcGF0aCBzdHIgb3IgQ29uZmlnIG9iamVjdAogICAgaWYgaXNpbnN0YW5jZShjb25maWcsIHN0cik6ICAjIFJhdyBwYXRoIHN0cgogICAgICAgIHdpdGggb3Blbihjb25maWcsICdyJykgYXMgZjoKICAgICAgICAgICAgY29uZmlnX2RhdGEgPSBqc29uLmxvYWQoZikKICAgICAgICBhcHAuY29uZmlnLmZyb21fbWFwcGluZygqKmNvbmZpZ19kYXRhKQogICAgZWxpZiBoYXNhdHRyKGNvbmZpZywgJ3BhdGgnKTogICMgQ29uZmlnIHdpdGggcGF0aCBhdHRyCiAgICAgICAgd2l0aCBvcGVuKGNvbmZpZy5wYXRoLCAncicpIGFzIGY6CiAgICAgICAgICAgIGNvbmZpZ19kYXRhID0ganNvbi5sb2FkKGYpCiAgICAgICAgYXBwLmNvbmZpZy5mcm9tX21hcHBpbmcoKipjb25maWdfZGF0YSkKICAgIGVsc2U6ICAjIENvbmZpZyBvYmplY3QKICAgICAgICBhcHAuY29uZmlnLmZyb21fb2JqZWN0KGNvbmZpZykKICAgIAogICAgIyBFbnN1cmUgZGVmYXVsdHMgaWYgbWlzc2luZyAocG9zdC1sb2FkKQogICAgaWYgJ3N5bWJvbHMnIG5vdCBpbiBhcHAuY29uZmlnOgogICAgICAgIGFwcC5jb25maWdbJ3N5bWJvbHMnXSA9IFsnQlRDVVNEVCcsICdFVEhVU0RUJywgJ1NPTFVTRFQnXQogICAgaWYgJ0FQSV9CQVNFX1VSTCcgbm90IGluIGFwcC5jb25maWc6CiAgICAgICAgYXBwLmNvbmZpZ1snQVBJX0JBU0VfVVJMJ10gPSAnaHR0cHM6Ly9mYXBpLmJpbmFuY2UuY29tJwogICAgYXBwLmNvbmZpZ1snc2FuZGJveCddID0gYXBwLmNvbmZpZy5nZXQoJ1RFU1RfTU9ERScsIEZhbHNlKSAgIyBNYXA6IGZhbHNlPWxpdmUsIHRydWU9c2FuZGJveAogICAgCiAgICAjIExvZ2dpbmcgc2V0dXAgKHBvc3QtYXBwOyBwcm9wYWdhdGUgdG8gY2hpbGQgbG9nZ2VycyBzY3JhcGVyL21ldHJpY3MvZGIpCiAgICBsb2dfZGlyID0gb3MucGF0aC5qb2luKG9zLnBhdGguZGlybmFtZShfX2ZpbGVfXyksICcuLicsICdsb2dzJykgICMgYmFja2VuZC9sb2dzCiAgICBvcy5tYWtlZGlycyhsb2dfZGlyLCBleGlzdF9vaz1UcnVlKQogICAgZmlsZV9oYW5kbGVyID0gUm90YXRpbmdGaWxlSGFuZGxlcihvcy5wYXRoLmpvaW4obG9nX2RpciwgJ2FwcC5sb2cnKSwgbWF4Qnl0ZXM9MTAqMTAyNCoxMDI0LCBiYWNrdXBDb3VudD0zKQogICAgZmlsZV9oYW5kbGVyLnNldEZvcm1hdHRlcihsb2dnaW5nLkZvcm1hdHRlcignJShhc2N0aW1lKXMgJShsZXZlbG5hbWUpczogJShtZXNzYWdlKXMgW2luICUocGF0aG5hbWUpczolKGxpbmVubylkXScpKQogICAgZmlsZV9oYW5kbGVyLnNldExldmVsKGxvZ2dpbmcuSU5GTykKICAgIGxvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKF9fbmFtZV9fKQogICAgbG9nZ2VyLmFkZEhhbmRsZXIoZmlsZV9oYW5kbGVyKQogICAgbG9nZ2VyLnNldExldmVsKGxvZ2dpbmcuSU5GTykKCiAgICAjIFJvb3QgcHJvcGFnYXRlIChjYXB0dXJlIGNoaWxkIGxvZ2dlcnMpCiAgICByb290X2xvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKCkKICAgIHJvb3RfbG9nZ2VyLmFkZEhhbmRsZXIoZmlsZV9oYW5kbGVyKQogICAgcm9vdF9sb2dnZXIuc2V0TGV2ZWwobG9nZ2luZy5JTkZPKQogICAgcm9vdF9sb2dnZXIucHJvcGFnYXRlID0gVHJ1ZQogICAgYXBwLmxvZ2dlci5hZGRIYW5kbGVyKGZpbGVfaGFuZGxlcikKICAgIGFwcC5sb2dnZXIuc2V0TGV2ZWwobG9nZ2luZy5JTkZPKQogICAgYXBwLmxvZ2dlci5wcm9wYWdhdGUgPSBUcnVlCgogICAgcHJpbnQoIkxvZ2dpbmcgc2V0dXAgY29tcGxldGUgLSBjaGVjayBiYWNrZW5kL2xvZ3MvYXBwLmxvZyIpICAjIFRlc3QgZW50cnkKICAgIAogICAgYXBwLnVybF9tYXAuc3RyaWN0X3NsYXNoZXMgPSBGYWxzZQogICAgZGIuaW5pdF9hcHAoYXBwKQogICAgYXBwLmJlZm9yZV9yZXF1ZXN0KGNsZWFyX3RyYWlsaW5nKQogICAgYXBwLnJlZ2lzdGVyX2JsdWVwcmludChibHVlcHJpbnQuYXBwKQogICAgCiAgICAjIEFkZCBDT1JTIGVhcmx5IGZvciBhbGwgcm91dGVzCiAgICBDT1JTKGFwcCwgb3JpZ2lucz1bJ2h0dHA6Ly9sb2NhbGhvc3Q6NTE3MyddKSAgIyBGcm9udGVuZCBhbGxvd2VkCgogICAgIyBOZXc6IEhpc3Rvcnkgcm91dGVzIChmb3IgY2hhcnRzL2Zyb250ZW5kKSAtIGVhcmx5LCBubyBjeWNsZQogICAgQGFwcC5yb3V0ZSgnL2FwaS9tZXRyaWNzL2hpc3RvcnknKQogICAgZGVmIGFwaV9tZXRyaWNzX2hpc3RvcnkoKToKICAgICAgICBsaW1pdCA9IHJlcXVlc3QuYXJncy5nZXQoJ2xpbWl0JywgNTAsIHR5cGU9aW50KQogICAgICAgIGRhdGEgPSBnZXRfbGF0ZXN0X21ldHJpY3MobGltaXQpCiAgICAgICAgIyBDbGVhbiBKU09OIHNlcmlhbGl6ZSAoY29scyBvbmx5OyBubyAnX3NhX2luc3RhbmNlX3N0YXRlJykKICAgICAgICBzZXJpYWxpemVkID0gW10KICAgICAgICBmb3Igcm93IGluIGRhdGE6CiAgICAgICAgICAgIHJvd19kaWN0ID0ge2NvbC5uYW1lOiBnZXRhdHRyKHJvdywgY29sLm5hbWUpIGZvciBjb2wgaW4gcm93Ll9fdGFibGVfXy5jb2x1bW5zfQogICAgICAgICAgICByb3dfZGljdFsndGltZSddID0gcm93LnRpbWVzdGFtcC50aW1lc3RhbXAoKSBpZiByb3cudGltZXN0YW1wIGVsc2UgMCAgIyBVbml4IHMgZmFsbGJhY2sKICAgICAgICAgICAgc2VyaWFsaXplZC5hcHBlbmQocm93X2RpY3QpCiAgICAgICAgcmV0dXJuIGpzb25pZnkoc2VyaWFsaXplZCkgICMgWyB7J3RpbWUnOiAxNzYwNzY0NjA3Ljg3LCAncHJpY2UnOiA2OTE2My42MywgJ2dsb2JhbF9sc181bSc6IDEuODIsIC4uLn0gXQoKICAgIEBhcHAucm91dGUoJy9hcGkvbWV0cmljcy88c3ltYm9sPi9oaXN0b3J5JykKICAgIGRlZiBhcGlfc3ltYm9sX2hpc3Rvcnkoc3ltYm9sKToKICAgICAgICB0ZiA9IHJlcXVlc3QuYXJncy5nZXQoJ3RmJywgJzVtJykgICMgRGVmYXVsdCAnNW0nIHN0cmluZyAobm8gMCkKICAgICAgICBsaW1pdCA9IHJlcXVlc3QuYXJncy5nZXQoJ2xpbWl0JywgMjQsIHR5cGU9aW50KSAgIyBIb3VybHkgZGVmYXVsdAogICAgICAgIGRhdGEgPSBnZXRfbWV0cmljc19ieV9zeW1ib2woc3ltYm9sLCBsaW1pdCkgICMgTGlzdFtNZXRyaWNdCiAgICAgICAgIyBDbGVhbiBKU09OIHNlcmlhbGl6ZSAoY29scyBvbmx5OyBubyAnX3NhX2luc3RhbmNlX3N0YXRlJykKICAgICAgICBzZXJpYWxpemVkID0gW10KICAgICAgICBmb3Igcm93IGluIGRhdGE6CiAgICAgICAgICAgIHJvd19kaWN0ID0ge2NvbC5uYW1lOiBnZXRhdHRyKHJvdywgY29sLm5hbWUpIGZvciBjb2wgaW4gcm93Ll9fdGFibGVfXy5jb2x1bW5zfQogICAgICAgICAgICByb3dfZGljdFsndGltZSddID0gcm93LnRpbWVzdGFtcC50aW1lc3RhbXAoKSBpZiByb3cudGltZXN0YW1wIGVsc2UgMCAgIyBVbml4IHMgZmFsbGJhY2sKICAgICAgICAgICAgc2VyaWFsaXplZC5hcHBlbmQocm93X2RpY3QpCiAgICAgICAgcmV0dXJuIGpzb25pZnkoc2VyaWFsaXplZCkgICMgWyB7J3RpbWUnOiAxNzYwNzY0NjA3Ljg3LCAncHJpY2UnOiA2OTE2My42MywgJ2dsb2JhbF9sc181bSc6IDEuODIsIC4uLn0gXQoKICAgIEBhcHAucm91dGUoJy9oZWFsdGgnLCBtZXRob2RzPVsnR0VUJ10pCiAgICBkZWYgaGVhbHRoX2NoZWNrKCk6CiAgICAgICAgI3ByaW50KCJIZWFsdGggcm91dGUgcmVnaXN0ZXJlZCBhdCAvaGVhbHRoIikgICMgRGVidWc6IENvbmZpcm1zIGRlZiBleGVjdXRlcwogICAgICAgIHRyeToKICAgICAgICAgICAgIyBEQiBwaW5nIHZpYSBjb25maWcgKGFsaWducyBweWRhbnRpYyByZXNvbHZlIGNvbmZpZy9mdXR1cmVzLmRiKQogICAgICAgICAgICBmcm9tIC5jb25maWcgaW1wb3J0IENvbmZpZyAgIyBSZWxhdGl2ZQogICAgICAgICAgICBjZmcgPSBDb25maWcuZnJvbV9jb25maWdfZGlyKHBhdGhsaWIuUGF0aC5jd2QoKSkKICAgICAgICAgICAgZGJfcGF0aCA9IHN0cihjZmcuREFUQUJBU0UpCiAgICAgICAgICAgIGNvbm4gPSBzcWxpdGUzLmNvbm5lY3QoZGJfcGF0aCkKICAgICAgICAgICAgY29ubi5leGVjdXRlKCdTRUxFQ1QgMScpCiAgICAgICAgICAgIGNvbm4uY2xvc2UoKQogICAgICAgICAgICByZXR1cm4ganNvbmlmeSh7J3N0YXR1cyc6ICdoZWFsdGh5JywgJ3ZlcnNpb24nOiAndjAuMy4zJywgJ2RiX3BhdGgnOiBkYl9wYXRofSksIDIwMAogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgY3VycmVudF9hcHAubG9nZ2VyLmVycm9yKGYiSGVhbHRoIGNoZWNrIGZhaWxlZDoge2V9IikKICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoeydzdGF0dXMnOiAndW5oZWFsdGh5JywgJ2Vycm9yJzogc3RyKGUpfSksIDUwMAogICAgICAgIAogICAgIyBMYXp5IG1ldHJpY3MgaW1wb3J0ICsgcm91dGUgYWRkIChicmVha3MgY3ljbGU6IHBvc3QtYXBwIGluaXQpCiAgICBmcm9tIC5tZXRyaWNzIGltcG9ydCBhZGRfbWV0cmljc19yb3V0ZSwgbWV0cmljc19icCAgIyBSZWxhdGl2ZTogSW1wb3J0IGhlcmUgKyBtZXRyaWNzX2JwIGZvciByZWdpc3RlcgogICAgYWRkX21ldHJpY3Nfcm91dGUoYXBwKQoKICAgICMgUmVnaXN0ZXIgbWV0cmljc19icCB3aXRoIHByZWZpeCAoZm9yIC9hcGkvbWV0cmljcywgL2FwaS9oZWFsdGgsIC9hcGkvPHN5bWJvbD4vaGlzdG9yeSkKICAgIGFwcC5yZWdpc3Rlcl9ibHVlcHJpbnQobWV0cmljc19icCwgdXJsX3ByZWZpeD0nL2FwaScpICAjIFByZWZpeCAvYXBpIChtZXRyaWNzX2JwIHJvdXRlcyAnLycg4oaSIC9hcGkvbWV0cmljcykKCiAgICAjIEluaXQgU29ja2V0SU8gKFBoYXNlIDEgV1MgZm9yIG1ldHJpY3NfdXBkYXRlKQogICAgc29ja2V0aW8gPSBTb2NrZXRJTyhhcHAsIGNvcnNfYWxsb3dlZF9vcmlnaW5zPSIqIiwgbG9nZ2VyPVRydWUsIGVuZ2luZWlvX2xvZ2dlcj1UcnVlKSAgIyAqIGZvciBkZXY7IHJlc3RyaWN0IHByb2QKCiAgICAjIExhenkgc2NyYXBlciBpbXBvcnQgKyBhdXRvX3NjcmFwZSAoYnJlYWtzIGN5Y2xlOiBhZnRlciBhcHAgc2V0dXApCiAgICBpZiBub3QgY29uZmlnLkRJU0FCTEVfQVVUT19TQ1JBUEU6CiAgICAgICAgZnJvbSAuIGltcG9ydCBzY3JhcGVyICAjIFJlbGF0aXZlOiBJbXBvcnQgaGVyZSAocG9zdC1hcHAgaW5pdCkKICAgICAgICBzY3JhcGVyLmF1dG9fc2NyYXBlKGFwcCkKCiAgICAjcHJpbnQoYXBwLnVybF9tYXApICAjIERlYnVnOiBTaG93IGFsbCByb3V0ZXMgKGV4cGVjdCAvaGVhbHRoIEdFVCkKICAgIHJldHVybiBhcHAKCmRlZiBtYWluKCk6CiAgICBsb2FkX2RvdGVudigpICAjIExvYWQgLmVudiBlYXJseSAoa2V5cyBmb3IgQ0NYVC9tZXRyaWNzLnB5KQogICAgCiAgICBwYXJzZXIgPSBhcmdwYXJzZS5Bcmd1bWVudFBhcnNlcihkZXNjcmlwdGlvbj0nQ3J5cHRvIEZ1dHVyZXMgRGFzaGJvYXJkIChNb2RpZmllZCB2MC4zLjMpJykKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoJy0tcG9ydCcsIHR5cGU9aW50LCBkZWZhdWx0PTUwMDAsIGhlbHA9J1BvcnQgdG8gcnVuIG9uIChkZWZhdWx0OiA1MDAwKScpCiAgICBhcmdzID0gcGFyc2VyLnBhcnNlX2FyZ3MoKQogICAgCiAgICAjIFN5cy5wYXRoIGhhY2sgZm9yIHJlbGF0aXZlIGltcG9ydHMgaW4gc2NyaXB0IG1vZGUgKFB5bGFuY2UvVlNDb2RlIHJlc29sdmVzKQogICAgZnJvbSBzeXMgaW1wb3J0IHBhdGgKICAgIHBhdGguYXBwZW5kKG9zLnBhdGguZGlybmFtZShvcy5wYXRoLmRpcm5hbWUoX19maWxlX18pKSkgICMgQWRkIHNyYyBwYXJlbnQgKGJhY2tlbmQpCiAgICAKICAgICMgSW5pdCBhcHAgKHVzZXMgY29uZmlnLmpzb24gKyAuZW52IG92ZXJyaWRlcykKICAgIHByaW50KCJJbml0aWFsaXppbmcgYXBwLi4uIikgICMgRGVidWc6IEFsaWducyAiSW1wb3J0aW5nLi4uIiBmcm9tIGluaXRfYXBwCiAgICBhcHAgPSBpbml0X2FwcCgpICAjIENhbGxzIGV4aXN0aW5nIGluaXRfYXBwIChicCByZWdpc3Rlciwgc2NyYXBlciBhdXRvKQogICAgCiAgICAjIEhlYWx0aC9kZWJ1ZyBwb3N0LWluaXQgKHJvYWRtYXA6IC9oZWFsdGggcm91dGUgdmlhIG1ldHJpY3NfYnApCiAgICBwcmludChmIm1ldHJpY3NfYnAgaW1wb3J0ZWQgc3VjY2Vzc2Z1bGx5IChwYWlyczoge2FwcC5jb25maWcuZ2V0KCdzeW1ib2xzJywgW10pfSkiKQogICAgcHJpbnQoZiJTdGFydGluZyBTb2NrZXRJTyBvbiBodHRwOi8vMC4wLjAuMDp7YXJncy5wb3J0fSAoZGVidWcgbW9kZSkuLi4iKQogICAgCiAgICAjIFJ1biAoU29ja2V0SU8gaGFuZGxlcyBXUy9IVFRQOyBhbGxvd191bnNhZmVfd2Vya3pldWcgZm9yIFdpbmRvd3MvZGVidWcpCiAgICBzb2NrZXRpby5ydW4oYXBwLCBob3N0PScwLjAuMC4wJywgcG9ydD1hcmdzLnBvcnQsIGRlYnVnPVRydWUsIGFsbG93X3Vuc2FmZV93ZXJremV1Zz1UcnVlKQoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIG1haW4oKQ==",
        "summary": "175L: from __future__ import annotations\n\nimport json\nimport logging\nimport pathlib\nimport sqlite3\nfrom lo..."
      },
      {
        "path": "backend\\src\\futuresboard\\binance_ws_client.py",
        "type": ".py",
        "content": "aW1wb3J0IGFzeW5jaW8KaW1wb3J0IGpzb24KaW1wb3J0IGFpb2h0dHAKZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QKCkJJTkFOQ0VfV1NfQkFTRSA9ICJ3c3M6Ly9mc3RyZWFtLmJpbmFuY2UuY29tL3N0cmVhbT9zdHJlYW1zPSIgICMgRm9yIFVTRFMtTSBmdXR1cmVzCgphc3luYyBkZWYgY29ubmVjdF9hbmRfbGlzdGVuKHNlc3Npb246IGFpb2h0dHAuQ2xpZW50U2Vzc2lvbiwgdXJsOiBzdHIsIGhhbmRsZV9tc2cpOgogICAgdHJ5OgogICAgICAgIGFzeW5jIHdpdGggc2Vzc2lvbi53c19jb25uZWN0KHVybCwgaGVhcnRiZWF0PTE1MCkgYXMgd3M6ICAjIEFkanVzdGVkIGhlYXJ0YmVhdAogICAgICAgICAgICBwcmludCgiQ29ubmVjdGVkIHRvIiwgdXJsKQogICAgICAgICAgICBhc3luYyBmb3IgbXNnIGluIHdzOgogICAgICAgICAgICAgICAgaWYgbXNnLnR5cGUgPT0gYWlvaHR0cC5XU01zZ1R5cGUuVEVYVDoKICAgICAgICAgICAgICAgICAgICBkYXRhID0ganNvbi5sb2Fkcyhtc2cuZGF0YSkKICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVfbXNnKGRhdGEpCiAgICAgICAgICAgICAgICBlbGlmIG1zZy50eXBlID09IGFpb2h0dHAuV1NNc2dUeXBlLlBJTkc6CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd3MucG9uZygpCiAgICAgICAgICAgICAgICBlbGlmIG1zZy50eXBlID09IGFpb2h0dHAuV1NNc2dUeXBlLkVSUk9SOgogICAgICAgICAgICAgICAgICAgIHByaW50KCJXUyBFcnJvcjoiLCBtc2cpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgIGV4Y2VwdCBhaW9odHRwLkNsaWVudEVycm9yIGFzIGU6CiAgICAgICAgcHJpbnQoIkNvbm5lY3Rpb24gZXJyb3I6IiwgZSkKICAgICAgICBhd2FpdCBhc3luY2lvLnNsZWVwKDUpICAjIFNpbXBsZSBiYWNrb2ZmIGFsdGVybmF0aXZlCgphc3luYyBkZWYgYnVpbGRfY29tYmluZWRfc3RyZWFtKHBhaXJfc3RyZWFtczogTGlzdFtzdHJdKSAtPiBzdHI6CiAgICByZXR1cm4gQklOQU5DRV9XU19CQVNFICsgIi8iLmpvaW4ocGFpcl9zdHJlYW1zKQoKYXN5bmMgZGVmIGhhbmRsZV9tZXNzYWdlKGRhdGEpOgogICAgIyBFeGFtcGxlOiBFeHRyYWN0IG1hcmtQcmljZSwgT0kgaWYgc3Vic2NyaWJlZAogICAgc3RyZWFtID0gZGF0YVsic3RyZWFtIl0KICAgIGlmICJtYXJrUHJpY2UiIGluIHN0cmVhbToKICAgICAgICBwcmludCgiTWFyayBQcmljZSBVcGRhdGU6IiwgZGF0YVsiZGF0YSJdWyJwIl0pICAjIFByaWNlCiAgICAjIFB1c2ggdG8gcXVldWUvREIgaGVyZQoKYXN5bmMgZGVmIHN0YXJ0X3N0cmVhbV93b3JrZXIocGFpcnM6IExpc3Rbc3RyXSk6CiAgICBzdHJlYW1zID0gW2Yie3AubG93ZXIoKX1AbWFya1ByaWNlQDFzIiBmb3IgcCBpbiBwYWlyc10gICMgMXMgdXBkYXRlcwogICAgc3RyZWFtcyArPSBbZiJ7cC5sb3dlcigpfUBvcGVuSW50ZXJlc3RAMWgiIGZvciBwIGluIHBhaXJzXSAgIyBPSSBob3VybHkKICAgIHVybCA9IGF3YWl0IGJ1aWxkX2NvbWJpbmVkX3N0cmVhbShzdHJlYW1zKQogICAgYXN5bmMgd2l0aCBhaW9odHRwLkNsaWVudFNlc3Npb24oKSBhcyBzZXNzaW9uOgogICAgICAgIHdoaWxlIFRydWU6ICAjIFJlY29ubmVjdCBsb29wCiAgICAgICAgICAgIGF3YWl0IGNvbm5lY3RfYW5kX2xpc3RlbihzZXNzaW9uLCB1cmwsIGhhbmRsZV9tZXNzYWdlKQogICAgICAgICAgICBhd2FpdCBhc3luY2lvLnNsZWVwKDUpICAjIEJhY2tvZmYKCiMgRXhhbXBsZSBydW4gKGluIGZ1dHVyZXNib2FyZDogY2FsbCBpbiB0aHJlYWQpCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBwYWlycyA9IFsiQlRDVVNEVCIsICJFVEhVU0RUIiwgIlNPTFVTRFQiXQogICAgYXN5bmNpby5ydW4oc3RhcnRfc3RyZWFtX3dvcmtlcihwYWlycykp",
        "summary": "47L: import asyncio\nimport json\nimport aiohttp\nfrom typing import List\n\nBINANCE_WS_BASE = \"wss://fstream...."
      },
      {
        "path": "backend\\src\\futuresboard\\cli.py",
        "type": ".py",
        "content": "ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IGFyZ3BhcnNlCmltcG9ydCBsb2dnaW5nCmltcG9ydCBwYXRobGliCmltcG9ydCBzeXMKaW1wb3J0IG9zICAjIEZvciBzdHIoKSBjb21wYXQgaWYgbmVlZGVkCmltcG9ydCB0cmFjZWJhY2sgICMgRm9yIGVycm9yIHByaW50CgppbXBvcnQgZnV0dXJlc2JvYXJkLmFwcAppbXBvcnQgZnV0dXJlc2JvYXJkLnNjcmFwZXIKZnJvbSBmdXR1cmVzYm9hcmQgaW1wb3J0IF9fdmVyc2lvbl9fICAjIHR5cGU6IGlnbm9yZVthdHRyLWRlZmluZWRdCmZyb20gZnV0dXJlc2JvYXJkLmNvbmZpZyBpbXBvcnQgQ29uZmlnCmZyb20gZG90ZW52IGltcG9ydCBsb2FkX2RvdGVudiAgIyBFeHBsaWNpdCAuZW52IGxvYWQKCmxvZyA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKF9fbmFtZV9fKQoKCmRlZiBtYWluKCk6CiAgICBwcmludCgiQ0xJIExvYWRlZDogU3RhcnRpbmcgbWFpbigpIikgICMgRGVidWc6IENvbmZpcm1zIGVudHJ5CiAgICBwYXJzZXIgPSBhcmdwYXJzZS5Bcmd1bWVudFBhcnNlcihwcm9nPSJmdXR1cmVzYm9hcmQiKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgiLS12ZXJzaW9uIiwgYWN0aW9uPSJ2ZXJzaW9uIiwgdmVyc2lvbj1mIiUocHJvZylzIHtfX3ZlcnNpb25fX30iKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgKICAgICAgICAiLWMiLAogICAgICAgICItLWNvbmZpZy1kaXIiLAogICAgICAgIHR5cGU9cGF0aGxpYi5QYXRoLAogICAgICAgIGRlZmF1bHQ9Tm9uZSwKICAgICAgICBoZWxwPSJQYXRoIHRvIGNvbmZpZ3VyYXRpb24gZGlyZWN0b3J5LiBEZWZhdWx0cyB0byB0aGUgYGNvbmZpZy9gIHN1Yi1kaXJlY3Rvcnkgb24gdGhlIGN1cnJlbnQgZGlyZWN0b3J5IiwKICAgICkKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoCiAgICAgICAgIi0tc2NyYXBlLW9ubHkiLCBkZWZhdWx0PUZhbHNlLCBhY3Rpb249InN0b3JlX3RydWUiLCBoZWxwPSJSdW4gb25seSB0aGUgc2NyYXBlciBjb2RlIgogICAgKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgKICAgICAgICAiLS1kaXNhYmxlLWF1dG8tc2NyYXBlciIsCiAgICAgICAgZGVmYXVsdD1GYWxzZSwKICAgICAgICBhY3Rpb249InN0b3JlX3RydWUiLAogICAgICAgIGhlbHA9IkRpc2FibGUgdGhlIHJvdXRpbmVzIHdoaWNoIHNjcmFwZSB3aGlsZSB0aGUgd2Vic2VydmljZSBpcyBydW5uaW5nIiwKICAgICkKICAgIHNlcnZlcl9zZXR0aW5ncyA9IHBhcnNlci5hZGRfYXJndW1lbnRfZ3JvdXAoIlNlcnZlciBTZXR0aW5ncyIpCiAgICBzZXJ2ZXJfc2V0dGluZ3MuYWRkX2FyZ3VtZW50KAogICAgICAgICItLWhvc3QiLAogICAgICAgIGRlZmF1bHQ9JzAuMC4wLjAnLAogICAgICAgIGhlbHA9IlNlcnZlciBob3N0LiBEZWZhdWx0OiAwLjAuMC4wIiwKICAgICAgICB0eXBlPXN0ciwgICMgU3RyIGZvciBhcmdwYXJzZSAodjEgY29tcGF0KQogICAgKQogICAgc2VydmVyX3NldHRpbmdzLmFkZF9hcmd1bWVudCgKICAgICAgICAiLS1wb3J0IiwgdHlwZT1pbnQsIGRlZmF1bHQ9Tm9uZSwgaGVscD0iU2VydmVyIHBvcnQuIERlZmF1bHQ6IDUwMDAiCiAgICApCiAgICBhcmdzID0gcGFyc2VyLnBhcnNlX2FyZ3MoKQoKICAgIHByaW50KGYiQXJncyBwYXJzZWQ6IGNvbmZpZ19kaXI9e2FyZ3MuY29uZmlnX2Rpcn0sIHBvcnQ9e2FyZ3MucG9ydH0sIHNjcmFwZV9vbmx5PXthcmdzLnNjcmFwZV9vbmx5fSIpICAjIERlYnVnOiBBcmdwYXJzZSBPSz8KCiAgICAjIERlZmF1bHQgY29uZmlnX2RpciB0byByb290L2NvbmZpZyAoYmFja2VuZC8gLT4gLi4vY29uZmlnIGZvciBqc29uL2RiKQogICAgaWYgYXJncy5jb25maWdfZGlyIGlzIE5vbmU6CiAgICAgICAgYXJncy5jb25maWdfZGlyID0gcGF0aGxpYi5QYXRoLmN3ZCgpLnBhcmVudCAvICJjb25maWciCiAgICBlbHNlOgogICAgICAgIGFyZ3MuY29uZmlnX2RpciA9IGFyZ3MuY29uZmlnX2Rpci5yZXNvbHZlKCkKCiAgICBwcmludChmIlJlc29sdmVkIGNvbmZpZ19kaXI6IHthcmdzLmNvbmZpZ19kaXJ9IChleGlzdHM/IHthcmdzLmNvbmZpZ19kaXIuZXhpc3RzKCl9KSIpICAjIERlYnVnOiBQYXRoIGNoZWNrCgogICAgIyAuZW52IGxvYWQgZnJvbSBiYWNrZW5kLyAoY3dkPWJhY2tlbmQsIHNlbGYpCiAgICBiYWNrZW5kX2RpciA9IHBhdGhsaWIuUGF0aC5jd2QoKQogICAgZG90ZW52X3BhdGggPSBiYWNrZW5kX2RpciAvICIuZW52IgogICAgbG9hZF9kb3RlbnYoZG90ZW52X3BhdGg9c3RyKGRvdGVudl9wYXRoKSkKICAgICMgRGVidWcgcHJpbnQ6IENvbmZpcm0gbG9hZCBiZWZvcmUgQ29uZmlnCiAgICBwcmludChmIkRlYnVnOiBMb2FkZWQgQVBJX0tFWSBmcm9tIC5lbnY6IHtvcy5nZXRlbnYoJ0FQSV9LRVknKVs6MTBdICsgJy4uLicgaWYgb3MuZ2V0ZW52KCdBUElfS0VZJykgZWxzZSAnTUlTU0lORyd9IikKICAgIHByaW50KGYiRGVidWc6IC5lbnYgcGF0aCByZXNvbHZlZDoge2RvdGVudl9wYXRoLnJlc29sdmUoKX0gKGV4aXN0cz8ge2RvdGVudl9wYXRoLmV4aXN0cygpfSkiKQoKICAgIHByaW50KCJQcmUtQ29uZmlnOiBBYm91dCB0byBjYWxsIGZyb21fY29uZmlnX2Rpci4uLiIpICAjIERlYnVnOiBCZWZvcmUgY2FsbAogICAgdHJ5OgogICAgICAgIGNvbmZpZyA9IENvbmZpZy5mcm9tX2NvbmZpZ19kaXIoYXJncy5jb25maWdfZGlyKQogICAgICAgIHByaW50KCJQb3N0LUNvbmZpZzogQ29uZmlnIGxvYWRlZCBPSyEiKSAgIyBJZiByZWFjaGVzLCB2YWxpZGF0aW9uIHBhc3NlZAogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYiQ29uZmlnIEVycm9yOiB7ZX0iKQogICAgICAgIHRyYWNlYmFjay5wcmludF9leGMoKQogICAgICAgIHN5cy5leGl0KDEpCiAgICBpZiBub3QgYXJncy5ob3N0OgogICAgICAgIGFyZ3MuaG9zdCA9IGNvbmZpZy5IT1NUCiAgICBpZiBub3QgYXJncy5wb3J0OgogICAgICAgIGFyZ3MucG9ydCA9IGNvbmZpZy5QT1JUCgogICAgIyBSdW4gdGhlIGFwcGxpY2F0aW9uCiAgICB0cnk6CiAgICAgICAgYXBwID0gZnV0dXJlc2JvYXJkLmFwcC5pbml0X2FwcChjb25maWcpCiAgICAgICAgcHJpbnQoIkluaXQgQXBwIE9LISIpICAjIENvbmZpcm1zIGluaXRfYXBwIChEQi9ibHVlcHJpbnQvc2NyYXBlciBzZXR1cCkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIkluaXQgQXBwIEVycm9yOiB7ZX0iKQogICAgICAgIHRyYWNlYmFjay5wcmludF9leGMoKQogICAgICAgIHN5cy5leGl0KDEpCgogICAgaWYgYXJncy5zY3JhcGVfb25seToKICAgICAgICB3aXRoIGFwcC5hcHBfY29udGV4dCgpOgogICAgICAgICAgICBmdXR1cmVzYm9hcmQuc2NyYXBlci5zY3JhcGUoKQogICAgICAgIHN5cy5leGl0KDApCgogICAgYXBwLnJ1bihob3N0PWFyZ3MuaG9zdCwgcG9ydD1hcmdzLnBvcnQpICAjIERpcmVjdCBzdHIgaG9zdAoKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICBtYWluKCk=",
        "summary": "100L: from __future__ import annotations\n\nimport argparse\nimport logging\nimport pathlib\nimport sys\nimport ..."
      },
      {
        "path": "backend\\src\\futuresboard\\config.py",
        "type": ".py",
        "content": "ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IGNvcHkKaW1wb3J0IGVudW0KaW1wb3J0IGpzb24KaW1wb3J0IHBhdGhsaWIKZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QKZnJvbSB0eXBpbmcgaW1wb3J0IE9wdGlvbmFsCgpmcm9tIHB5ZGFudGljIGltcG9ydCBCYXNlTW9kZWwKZnJvbSBweWRhbnRpYyBpbXBvcnQgRGlyZWN0b3J5UGF0aApmcm9tIHB5ZGFudGljIGltcG9ydCBGaWVsZApmcm9tIHB5ZGFudGljIGltcG9ydCByb290X3ZhbGlkYXRvcgpmcm9tIHB5ZGFudGljIGltcG9ydCB2YWxpZGF0b3IKCmZyb20gZG90ZW52IGltcG9ydCBsb2FkX2RvdGVudgppbXBvcnQgb3MKaW1wb3J0IGxvZ2dpbmcgICMgQWRkZWQgZm9yIGNvbmRpdGlvbmFsIGxvZ2dpbmcKCmxvYWRfZG90ZW52KCkgICMgUHVsbHMgLmVudgoKIyBNb2R1bGUtbGV2ZWwgZmxhZyAob25jZS1wcmludCBhY3Jvc3MgaW1wb3J0cy9jYWxscykKX2NvbmZpZ19wcmludGVkID0gRmFsc2UKCmNsYXNzIE5hdmJhckJHKGVudW0uRW51bSk6CiAgICBCR19EQVJLID0gImJnLWRhcmsiCiAgICBCR19QUklNQVJZID0gImJnLXByaW1hcnkiCiAgICBCR19TRUNPTkRBUlkgPSAiYmctc2Vjb25kYXJ5IgogICAgQkdfU1VDQ0VTUyA9ICJiZy1zdWNjZXNzIgogICAgQkdfREFOR0VSID0gImJnLWRhbmdlciIKICAgIEJHX1dBUk5JTkcgPSAiYmctd2FybmluZyIKICAgIEJHX0lORk8gPSAiYmctaW5mbyIKICAgIEJHX0xJR0hUID0gImJnLWxpZ2h0IgoKCmNsYXNzIEV4Y2hhbmdlcyhlbnVtLkVudW0pOgogICAgQklOQU5DRSA9ICJiaW5hbmNlIgogICAgQllCSVQgPSAiYnliaXQiCgoKY2xhc3MgQ3VzdG9tKEJhc2VNb2RlbCk6CiAgICBOQVZCQVJfVElUTEU6IE9wdGlvbmFsW3N0cl0gPSBGaWVsZCgiRnV0dXJlc2JvYXJkIiwgbWluX2xlbmd0aD0xLCBtYXhfbGVuZ3RoPTUwKQogICAgTkFWQkFSX0JHOiBPcHRpb25hbFtOYXZiYXJCR10gPSBOYXZiYXJCRy5CR19EQVJLCiAgICBQUk9KRUNUSU9OUzogTGlzdFtmbG9hdF0gPSBGaWVsZChbMS4wMDMsIDEuMDA1LCAxLjAxLCAxLjAxMl0sIG1pbl9pdGVtcz0xLCBtYXhfaXRlbXM9MTApCgogICAgQHZhbGlkYXRvcigiUFJPSkVDVElPTlMiLCBlYWNoX2l0ZW09VHJ1ZSkKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIF92YWxpZGF0ZV9wcm9qZWN0aW9ucyhjbHMsIHZhbHVlKToKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZSh2YWx1ZSwgZmxvYXQpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB2YWx1ZSA9IGZsb2F0KHZhbHVlKQogICAgICAgICAgICBleGNlcHQgVHlwZUVycm9yOgogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIkNhbm5vdCBjYXN0IHt2YWx1ZSFyfSB0byBhIGZsb2F0IikKICAgICAgICBpZiB2YWx1ZSA8IC0zLjA6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlRoZSBsb3dlciBhbGxvd2VkIHByb2plY3Rpb24gdmFsdWUgaXMgLTMuMCIpCiAgICAgICAgaWYgdmFsdWUgPiAzLjA6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlRoZSB1cHBlciBhbGxvd2VkIHByb2plY3Rpb24gdmFsdWUgaXMgMy4wIikKICAgICAgICByZXR1cm4gdmFsdWUKCgpjbGFzcyBDb25maWcoQmFzZU1vZGVsKToKICAgIENPTkZJR19ESVI6IERpcmVjdG9yeVBhdGggPSBwYXRobGliLlBhdGguY3dkKCkKICAgIERBVEFCQVNFOiBPcHRpb25hbFtwYXRobGliLlBhdGhdCiAgICBFWENIQU5HRTogT3B0aW9uYWxbRXhjaGFuZ2VzXSA9IEV4Y2hhbmdlcy5CSU5BTkNFCiAgICBURVNUX01PREU6IE9wdGlvbmFsW2Jvb2xdID0gRmFsc2UKICAgIEFQSV9CQVNFX1VSTDogT3B0aW9uYWxbc3RyXQogICAgQVVUT19TQ1JBUEVfSU5URVJWQUw6IGludCA9IDMwMAogICAgRElTQUJMRV9BVVRPX1NDUkFQRTogYm9vbCA9IEZhbHNlCiAgICBIT1NUOiBPcHRpb25hbFtzdHJdID0gRmllbGQoZGVmYXVsdD0nMC4wLjAuMCcpICAjIEZpeDogU3RyIGRlZmF1bHQgKHYxIGNvbXBhdDsgbm8gSVB2QW55SW50ZXJmYWNlIGNhbGwpCiAgICBQT1JUOiBPcHRpb25hbFtpbnRdID0gRmllbGQoNTAwMCwgZ2U9MSwgbGU9NjU1MzUpCiAgICBBUElfS0VZOiBzdHIKICAgIEFQSV9TRUNSRVQ6IHN0cgogICAgU1lNQk9MUzogTGlzdFtzdHJdID0gRmllbGQoZGVmYXVsdF9mYWN0b3J5PWxhbWJkYTogWyJCVENVU0RUIiwgIkVUSFVTRFQiLCAiU09MVVNEVCJdKSAgIyBOZXc6IFVwcGVyY2FzZSwgZGVmYXVsdCBsaXN0IChuZXZlciBOb25lKQogICAgQ1VTVE9NOiBPcHRpb25hbFtDdXN0b21dID0gQ3VzdG9tKCkKCiAgICBAdmFsaWRhdG9yKCJEQVRBQkFTRSIsIGFsd2F5cz1UcnVlKQogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgX3ZhbGlkYXRlX2RhdGFiYXNlKGNscywgdmFsdWUsIHZhbHVlcyk6CiAgICAgICAgaWYgbm90IHZhbHVlOgogICAgICAgICAgICB2YWx1ZSA9IHZhbHVlc1siQ09ORklHX0RJUiJdIC8gImZ1dHVyZXMuZGIiCiAgICAgICAgcmV0dXJuIHZhbHVlLnJlc29sdmUoKQoKICAgIEB2YWxpZGF0b3IoIkFQSV9CQVNFX1VSTCIsIGFsd2F5cz1UcnVlKQogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgX3ZhbGlkYXRlX2FwaV9iYXNlX3VybChjbHMsIHZhbHVlLCB2YWx1ZXMpOgogICAgICAgIGlmIG5vdCB2YWx1ZToKICAgICAgICAgICAgaWYgdmFsdWVzWyJFWENIQU5HRSJdID09IEV4Y2hhbmdlcy5CSU5BTkNFOgogICAgICAgICAgICAgICAgaWYgdmFsdWVzWyJURVNUX01PREUiXToKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9ICJodHRwczovL3Rlc3RuZXQuYmluYW5jZWZ1dHVyZS5jb20iCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gImh0dHBzOi8vZmFwaS5iaW5hbmNlLmNvbSIKICAgICAgICAgICAgZWxpZiB2YWx1ZXNbIkVYQ0hBTkdFIl0gPT0gRXhjaGFuZ2VzLkJZQklUOgogICAgICAgICAgICAgICAgaWYgdmFsdWVzWyJURVNUX01PREUiXToKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9ICJodHRwczovL2FwaS10ZXN0bmV0LmJ5Yml0LmNvbSIKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAiaHR0cHM6Ly9hcGkuYnliaXQuY29tIgogICAgICAgIHJldHVybiB2YWx1ZQoKICAgIEB2YWxpZGF0b3IoIkFVVE9fU0NSQVBFX0lOVEVSVkFMIikKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIF92YWxpZGF0ZV9pbnRlcnZhbChjbHMsIHZhbHVlKToKICAgICAgICBpZiB2YWx1ZSA8IDEwOiAgIyBMb3dlciBmb3IgUGhhc2UgMSBXUyAoPDMwcyk7IENDWFQgcmF0ZS1zYWZlCiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlRoZSBsb3dlciBhbGxvd2VkIHZhbHVlIGlzIDEwIikKICAgICAgICBpZiB2YWx1ZSA+IDM2MDA6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIlRoZSB1cHBlciBhbGxvd2VkIHZhbHVlIGlzIDM2MDAiKQogICAgICAgIHJldHVybiB2YWx1ZQoKICAgIEByb290X3ZhbGlkYXRvcihwcmU9VHJ1ZSkKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIF9jYXBpdGFsaXplX2FsbF9rZXlzKGNscywgZmllbGRzKToKICAgICAgICBkZWYgX2NhcGl0YWxpemVfa2V5cyhjKToKICAgICAgICAgICAgaWYgbm90IGlzaW5zdGFuY2UoYywgZGljdCk6CiAgICAgICAgICAgICAgICByZXR1cm4gYwogICAgICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBjb3B5LmRlZXBjb3B5KGMpLml0ZW1zKCk6CiAgICAgICAgICAgICAgICBpZiBpc2luc3RhbmNlKHZhbHVlLCBkaWN0KToKICAgICAgICAgICAgICAgICAgICBfY2FwaXRhbGl6ZV9rZXlzKHZhbHVlKQogICAgICAgICAgICAgICAgY1trZXkudXBwZXIoKV0gPSB2YWx1ZQogICAgICAgICAgICAgICAgaWYgbm90IGtleS5pc3VwcGVyKCk6CiAgICAgICAgICAgICAgICAgICAgYy5wb3Aoa2V5KQoKICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBjb3B5LmRlZXBjb3B5KGZpZWxkcykuaXRlbXMoKToKICAgICAgICAgICAgX2NhcGl0YWxpemVfa2V5cyh2YWx1ZSkKICAgICAgICAgICAgZmllbGRzW2tleS51cHBlcigpXSA9IHZhbHVlCiAgICAgICAgICAgIGlmIG5vdCBrZXkuaXN1cHBlcigpOgogICAgICAgICAgICAgICAgZmllbGRzLnBvcChrZXkpCgogICAgICAgIHJldHVybiBmaWVsZHMKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBmcm9tX2NvbmZpZ19kaXIoY2xzLCBjb25maWdfZGlyOiBwYXRobGliLlBhdGgpIC0+IENvbmZpZzoKICAgICAgICBjb25maWdfZmlsZSA9IGNvbmZpZ19kaXIgLyAiY29uZmlnLmpzb24iCiAgICAgICAgaWYgY29uZmlnX2ZpbGUuZXhpc3RzKCk6CiAgICAgICAgICAgIGNvbmZpZ19kaWN0ID0ganNvbi5sb2Fkcyhjb25maWdfZmlsZS5yZWFkX3RleHQoKSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBjb25maWdfZGljdCA9IHt9CiAgICAgICAgY29uZmlnX2RpY3RbIkNPTkZJR19ESVIiXSA9IGNvbmZpZ19kaXIKCiAgICAgICAgIyAuZW52IE92ZXJyaWRlcyAoa2VlcCBleGlzdGluZykKICAgICAgICBlbnZfZXhjaGFuZ2UgPSBvcy5nZXRlbnYoIkVYQ0hBTkdFIiwgY29uZmlnX2RpY3QuZ2V0KCJFWENIQU5HRSIsICJiaW5hbmNlIikpLnVwcGVyKCkKICAgICAgICBjb25maWdfZGljdFsiRVhDSEFOR0UiXSA9IEV4Y2hhbmdlc1tlbnZfZXhjaGFuZ2VdCgogICAgICAgIGNvbmZpZ19kaWN0WyJBUElfS0VZIl0gPSBvcy5nZXRlbnYoIkFQSV9LRVkiLCBjb25maWdfZGljdC5nZXQoIkFQSV9LRVkiLCAiIikpCiAgICAgICAgY29uZmlnX2RpY3RbIkFQSV9TRUNSRVQiXSA9IG9zLmdldGVudigiQVBJX1NFQ1JFVCIsIGNvbmZpZ19kaWN0LmdldCgiQVBJX1NFQ1JFVCIsICIiKSkKICAgICAgICBjb25maWdfZGljdFsiQVVUT19TQ1JBUEVfSU5URVJWQUwiXSA9IGludChvcy5nZXRlbnYoIklOVEVSVkFMIiwgc3RyKGNvbmZpZ19kaWN0LmdldCgiQVVUT19TQ1JBUEVfSU5URVJWQUwiLCAzMDApKSkpCgogICAgICAgIGNvbmZpZ19kaWN0WyJURVNUX01PREUiXSA9IG9zLmdldGVudigiVEVTVF9NT0RFIiwgIkZhbHNlIikubG93ZXIoKSA9PSAidHJ1ZSIKICAgICAgICAKICAgICAgICAjIE5ldzogU1lNQk9MUyBmcm9tIC5lbnYvSlNPTiAoY29tbWEtc3BsaXQgaWYgZW52IHN0cikKICAgICAgICBlbnZfc3ltYm9scyA9IG9zLmdldGVudigiU1lNQk9MUyIsICIiKQogICAgICAgIGlmIGVudl9zeW1ib2xzOgogICAgICAgICAgICBjb25maWdfZGljdFsiU1lNQk9MUyJdID0gW3Muc3RyaXAoKSBmb3IgcyBpbiBlbnZfc3ltYm9scy5zcGxpdCgiLCIpIGlmIHMuc3RyaXAoKV0KICAgICAgICBlbGlmICJTWU1CT0xTIiBub3QgaW4gY29uZmlnX2RpY3Q6CiAgICAgICAgICAgIGNvbmZpZ19kaWN0WyJTWU1CT0xTIl0gPSBbIkJUQ1VTRFQiLCAiRVRIVVNEVCIsICJTT0xVU0RUIl0gICMgRW5zdXJlIGxpc3QKCiAgICAgICAgIyBBZGQ6IERFVl9NT0RFIGZyb20gLmVudgogICAgICAgIGNvbmZpZ19kaWN0WyJERVZfTU9ERSJdID0gb3MuZ2V0ZW52KCJERVZfTU9ERSIsICJmYWxzZSIpLmxvd2VyKCkgPT0gInRydWUiCiAgICAgICAgCiAgICAgICAgIyBBZGQ6IExPR19MRVZFTCBmcm9tIC5lbnYKICAgICAgICBjb25maWdfZGljdFsiTE9HX0xFVkVMIl0gPSBvcy5nZXRlbnYoIkxPR19MRVZFTCIsICJJTkZPIikudXBwZXIoKQoKICAgICAgICAjIENvbmRpdGlvbmFsIGxvZyAoREVCVUcgb25seSArIG9uY2UtZmxhZzsgbm8gc3BhbSBAIElORk8pCiAgICAgICAgZ2xvYmFsIF9jb25maWdfcHJpbnRlZAogICAgICAgIGlmIG5vdCBfY29uZmlnX3ByaW50ZWQgYW5kIGNvbmZpZ19kaWN0LmdldCgiTE9HX0xFVkVMIiwgIklORk8iKS51cHBlcigpID09ICJERUJVRyI6CiAgICAgICAgICAgIGxvZ2dpbmcuYmFzaWNDb25maWcobGV2ZWw9bG9nZ2luZy5ERUJVRykgICMgSWYgbm90IHNldHVwCiAgICAgICAgICAgIGxvZ2dpbmcuaW5mbyhmIkNvbmZpZyBsb2FkZWQ6IERFVl9NT0RFPXtjb25maWdfZGljdFsnREVWX01PREUnXX0sIExPR19MRVZFTD17Y29uZmlnX2RpY3RbJ0xPR19MRVZFTCddfSwgSU5URVJWQUw9e2NvbmZpZ19kaWN0WydBVVRPX1NDUkFQRV9JTlRFUlZBTCddfXMiKQogICAgICAgICAgICBfY29uZmlnX3ByaW50ZWQgPSBUcnVlCiAgICAgICAgZWxpZiBub3QgX2NvbmZpZ19wcmludGVkOiAgIyBTaWxlbnQgQCBJTkZPIChvciBtaW5pbWFsIGlmIHdhbnQpCiAgICAgICAgICAgIF9jb25maWdfcHJpbnRlZCA9IFRydWUgICMgRmxhZyBzZXQgbm8tb3AKCiAgICAgICAgcmV0dXJuIGNscy5wYXJzZV9vYmooY29uZmlnX2RpY3Qp",
        "summary": "170L: from __future__ import annotations\n\nimport copy\nimport enum\nimport json\nimport pathlib\nfrom typing i..."
      },
      {
        "path": "backend\\src\\futuresboard\\db.py",
        "type": ".py",
        "content": "ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IHNxbGl0ZTMKaW1wb3J0IG9zCmltcG9ydCByYW5kb20gICMgRm9yIHRpbWVzdGFtcCBqaXR0ZXIgaW4gVU5JUVVFCmltcG9ydCB0cmFjZWJhY2sgICMgRm9yIHByaW50X2V4YyBpbiBzYXZlX21ldHJpY3MgZXhjZXB0CmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lLCB0aW1lZGVsdGEsIHRpbWV6b25lICAjIHRpbWVkZWx0YSBmb3Igaml0dGVyLCB0aW1lem9uZSBmb3IgdXRjbm93IGRlcHJlY2F0aW9uCmltcG9ydCBsb2dnaW5nCmltcG9ydCBudW1weSBhcyBucCAgIyBGb3IgaXNmaW5pdGUgZ3VhcmRzIChQMikKCmZyb20gZmxhc2sgaW1wb3J0IGN1cnJlbnRfYXBwLCBnCmZyb20gc3FsYWxjaGVteSBpbXBvcnQgQ29sdW1uLCBJbnRlZ2VyLCBTdHJpbmcsIERhdGVUaW1lLCBGbG9hdCwgY3JlYXRlX2VuZ2luZQpmcm9tIHNxbGFsY2hlbXkub3JtIGltcG9ydCBzZXNzaW9ubWFrZXIsIHNjb3BlZF9zZXNzaW9uCmZyb20gc3FsYWxjaGVteS5leHQuZGVjbGFyYXRpdmUgaW1wb3J0IGRlY2xhcmF0aXZlX2Jhc2UgICMgdjEuNCBjb21wYXRpYmxlCmZyb20gLmNvbmZpZyBpbXBvcnQgQ29uZmlnCmZyb20gc3FsYWxjaGVteS5leGMgaW1wb3J0IEludGVncml0eUVycm9yCgppbXBvcnQgdGltZSAgIyBGb3IgdGltZXN0YW1wIFVuaXggcyBmYWxsYmFjawpmcm9tIHNxbGFsY2hlbXkgaW1wb3J0IFVuaXF1ZUNvbnN0cmFpbnQgICMgRm9yIHN5bS90ZiB1bmlxdWUKCmltcG9ydCBwYXRobGliICAjIEZvciBQYXRoIGNvZXJjZSAgIApsb2dnZXIgPSBsb2dnaW5nLmdldExvZ2dlcihfX25hbWVfXykKCkJhc2UgPSBkZWNsYXJhdGl2ZV9iYXNlKCkgICMgRXhwb3J0ZWQgZm9yIEFsZW1iaWMgZW52LnB5CgojIE9STSBTZXNzaW9uICh0cnkvZmluYWxseSBzYWZldHkgZm9yIHJvYWRtYXApCmNmZyA9IENvbmZpZy5mcm9tX2NvbmZpZ19kaXIocGF0aGxpYi5QYXRoKG9zLnBhdGguZGlybmFtZShvcy5wYXRoLmRpcm5hbWUob3MucGF0aC5kaXJuYW1lKG9zLnBhdGguZGlybmFtZShfX2ZpbGVfXykpKSkpICkgICMgcm9vdCBmb3IgY29uZmlnCmVuZ2luZSA9IGNyZWF0ZV9lbmdpbmUoZidzcWxpdGU6Ly8ve2NmZy5EQVRBQkFTRX0nKQpTZXNzaW9uTG9jYWwgPSBzY29wZWRfc2Vzc2lvbihzZXNzaW9ubWFrZXIoYXV0b2NvbW1pdD1GYWxzZSwgYXV0b2ZsdXNoPUZhbHNlLCBiaW5kPWVuZ2luZSkpClNlc3Npb24gPSBTZXNzaW9uTG9jYWwKCiMgTWV0cmljIG1vZGVsIChPUk0gZm9yIHVwc2VydHMvbWVyZ2UsIHByZS1jYWxjIGRlbHRhcykKY2xhc3MgTWV0cmljKEJhc2UpOgogICAgX190YWJsZW5hbWVfXyA9ICdtZXRyaWNzJwogICAgaWQgPSBDb2x1bW4oSW50ZWdlciwgcHJpbWFyeV9rZXk9VHJ1ZSwgYXV0b2luY3JlbWVudD1UcnVlKQogICAgc3ltYm9sID0gQ29sdW1uKFN0cmluZywgbnVsbGFibGU9RmFsc2UpCiAgICB0aW1lZnJhbWUgPSBDb2x1bW4oU3RyaW5nKDEwKSwgZGVmYXVsdD0nNW0nLCBudWxsYWJsZT1GYWxzZSkgICMgTmV3OiBCaW5kIHRmICg1bS0xaCkKICAgIHRpbWVzdGFtcCA9IENvbHVtbihEYXRlVGltZSwgZGVmYXVsdD1sYW1iZGE6IGRhdGV0aW1lLm5vdyh0aW1lem9uZS51dGMpKQogICAgcHJpY2UgPSBDb2x1bW4oRmxvYXQsIG51bGxhYmxlPVRydWUpCiAgICBwcmljZV9jaGFuZ2VfMjRoX3BjdCA9IENvbHVtbihGbG9hdCwgbnVsbGFibGU9VHJ1ZSkKICAgIHZvbHVtZV8yNGggPSBDb2x1bW4oRmxvYXQsIG51bGxhYmxlPVRydWUpCiAgICB2b2x1bWVfY2hhbmdlXzI0aF9wY3QgPSBDb2x1bW4oRmxvYXQsIG51bGxhYmxlPVRydWUpCiAgICBtYXJrZXRfY2FwID0gQ29sdW1uKEZsb2F0LCBudWxsYWJsZT1UcnVlKQogICAgb2lfdXNkID0gQ29sdW1uKEZsb2F0LCBudWxsYWJsZT1UcnVlKSAgIyBFeGlzdGluZwogICAgb2lfYWJzX3VzZCA9IENvbHVtbihGbG9hdCwgbnVsbGFibGU9VHJ1ZSkgICMgTmV3OiBVU0Qtbm9ybWFsaXplZCBPSQogICAgb2lfY2hhbmdlXzI0aF9wY3QgPSBDb2x1bW4oRmxvYXQsIG51bGxhYmxlPVRydWUpCiAgICBvaV9jaGFuZ2VfNW1fcGN0ID0gQ29sdW1uKEZsb2F0LCBudWxsYWJsZT1UcnVlKQogICAgb2lfY2hhbmdlXzE1bV9wY3QgPSBDb2x1bW4oRmxvYXQsIG51bGxhYmxlPVRydWUpCiAgICBvaV9jaGFuZ2VfMzBtX3BjdCA9IENvbHVtbihGbG9hdCwgbnVsbGFibGU9VHJ1ZSkKICAgIG9pX2NoYW5nZV8xaF9wY3QgPSBDb2x1bW4oRmxvYXQsIG51bGxhYmxlPVRydWUpCiAgICBvaV9kZWx0YV9wY3QgPSBDb2x1bW4oRmxvYXQsIG51bGxhYmxlPVRydWUpICAjIE5ldzogUm9sbGluZyAlIGNoYW5nZSAocHJlLWNhbGMpCiAgICBwcmljZV9jaGFuZ2VfNW1fcGN0ID0gQ29sdW1uKEZsb2F0LCBudWxsYWJsZT1UcnVlKQogICAgcHJpY2VfY2hhbmdlXzE1bV9wY3QgPSBDb2x1bW4oRmxvYXQsIG51bGxhYmxlPVRydWUpCiAgICBwcmljZV9jaGFuZ2VfMzBtX3BjdCA9IENvbHVtbihGbG9hdCwgbnVsbGFibGU9VHJ1ZSkKICAgIHByaWNlX2NoYW5nZV8xaF9wY3QgPSBDb2x1bW4oRmxvYXQsIG51bGxhYmxlPVRydWUpCiAgICBnbG9iYWxfbHNfNW0gPSBDb2x1bW4oRmxvYXQsIG51bGxhYmxlPVRydWUpICAjIEV4aXN0aW5nCiAgICBnbG9iYWxfbHNfMTVtID0gQ29sdW1uKEZsb2F0LCBudWxsYWJsZT1UcnVlKQogICAgZ2xvYmFsX2xzXzMwbSA9IENvbHVtbihGbG9hdCwgbnVsbGFibGU9VHJ1ZSkKICAgIGdsb2JhbF9sc18xaCA9IENvbHVtbihGbG9hdCwgbnVsbGFibGU9VHJ1ZSkKICAgIGxvbmdfYWNjb3VudF9wY3QgPSBDb2x1bW4oRmxvYXQsIG51bGxhYmxlPVRydWUpCiAgICBzaG9ydF9hY2NvdW50X3BjdCA9IENvbHVtbihGbG9hdCwgbnVsbGFibGU9VHJ1ZSkKICAgIHRvcF9scyA9IENvbHVtbihGbG9hdCwgbnVsbGFibGU9VHJ1ZSkgICMgRXhpc3RpbmcKICAgIHRvcF9sc19hY2NvdW50cyA9IENvbHVtbihGbG9hdCwgbnVsbGFibGU9VHJ1ZSkgICMgTmV3OiBUb3AgTC9TIGFjY291bnRzCiAgICB0b3BfbHNfcG9zaXRpb25zID0gQ29sdW1uKEZsb2F0LCBudWxsYWJsZT1UcnVlKSAgIyBFeGlzdGluZwogICAgbHNfZGVsdGFfcGN0ID0gQ29sdW1uKEZsb2F0LCBudWxsYWJsZT1UcnVlKSAgIyBOZXc6IFJvbGxpbmcgJSBjaGFuZ2UgTFMgKFAyKQogICAgY3ZkID0gQ29sdW1uKEZsb2F0LCBudWxsYWJsZT1UcnVlKSAgIyBUZWFzZTogQ3VtIFZvbCBEZWx0YSBmcm9tIGtsaW5lcyAoUDIpCiAgICB6X2xzID0gQ29sdW1uKEZsb2F0LCBudWxsYWJsZT1UcnVlKSAgIyBOZXc6IFotc2NvcmUgTFMgKHByZS1jYWxjKQogICAgel9zY29yZSA9IENvbHVtbihGbG9hdCwgbnVsbGFibGU9VHJ1ZSkgICMgTmV3OiBCaW5kIHpfbHMgdG8gel9zY29yZSBmb3IgZ2VuX3RyYWNrZXIKICAgIGltYmFsYW5jZSA9IENvbHVtbihGbG9hdCwgbnVsbGFibGU9VHJ1ZSkgICMgU3R1YjogKGJpZC1hc2spL21pZCAqMTAwIChQMikKICAgIGZ1bmRpbmcgPSBDb2x1bW4oRmxvYXQsIG51bGxhYmxlPVRydWUpICAjIFN0dWI6IEZ1bmRpbmcgcmF0ZSAlIChQMikKICAgIHJzaSA9IENvbHVtbihGbG9hdCwgbnVsbGFibGU9VHJ1ZSkgICMgTmV3OiBSU0kgMTQtcGVyaW9kIHRlYXNlIChQMykKICAgIHZvbF91c2QgPSBDb2x1bW4oRmxvYXQsIG51bGxhYmxlPVRydWUsIGRlZmF1bHQ9MC4wKSAgIyBOZXc6IFZvbCBVU0QgZm9yIFAzIHdlaWdodGVkIE9JCiAgICBfX3RhYmxlX2FyZ3NfXyA9IChVbmlxdWVDb25zdHJhaW50KCdzeW1ib2wnLCAndGltZWZyYW1lJywgJ3RpbWVzdGFtcCcsIG5hbWU9J3VuaXF1ZV9zeW1fdGZfdHMnKSwpCgojIFN0YW5kYWxvbmUgc2FmZV9mbG9hdCAobW9kdWxlLWxldmVsIGZvciBpbXBvcnQvdGVzdDsgYWxpZ25lZCB3LyBzYXZlX21ldHJpY3MpCmRlZiBzYWZlX2Zsb2F0KG0sIGtleSwgZGVmYXVsdD1Ob25lKToKICAgICIiIlBhcnNlIGZsb2F0IGZyb20gbWV0cmljcyBkaWN0IChzdHJpcHMgJCwlIDsgTi9B4oaSTm9uZSkuIiIiCiAgICB2YWwgPSBtLmdldChrZXksIGRlZmF1bHQpCiAgICBpZiB2YWwgaXMgTm9uZSBvciB2YWwgPT0gJ04vQSc6CiAgICAgICAgcmV0dXJuIE5vbmUKICAgIHRyeToKICAgICAgICBjbGVhbmVkID0gc3RyKHZhbCkucmVwbGFjZSgnJCcsICcnKS5yZXBsYWNlKCcsJywgJycpLnJlcGxhY2UoJyUnLCAnJykKICAgICAgICByZXR1cm4gZmxvYXQoY2xlYW5lZCkKICAgIGV4Y2VwdCAoVmFsdWVFcnJvciwgVHlwZUVycm9yKToKICAgICAgICBwcmludChmIlBhcnNlIGVycm9yIGZvciB7a2V5fToge3ZhbH0iKQogICAgICAgIHJldHVybiBOb25lCgojIFJhdyBTUUwgZmFsbGJhY2sgKHlvdXIgZXhpc3RpbmcpCmRlZiBnZXRfZGIoKToKICAgIGlmICJkYiIgbm90IGluIGc6CiAgICAgICAgZy5kYiA9IHNxbGl0ZTMuY29ubmVjdChjdXJyZW50X2FwcC5jb25maWdbIkRBVEFCQVNFIl0sIGRldGVjdF90eXBlcz1zcWxpdGUzLlBBUlNFX0RFQ0xUWVBFUykKICAgICAgICBnLmRiLnJvd19mYWN0b3J5ID0gc3FsaXRlMy5Sb3cKICAgIHJldHVybiBnLmRiCgpkZWYgY2xvc2VfZGIoZT1Ob25lKToKICAgIGRiID0gZy5wb3AoImRiIiwgTm9uZSkKICAgIGlmIGRiIGlzIG5vdCBOb25lOgogICAgICAgIGRiLmNsb3NlKCkKCmRlZiBxdWVyeShxdWVyeSwgYXJncz0oKSwgb25lPUZhbHNlKToKICAgIGN1ciA9IGdldF9kYigpLmV4ZWN1dGUocXVlcnksIGFyZ3MpCiAgICBydiA9IGN1ci5mZXRjaGFsbCgpCiAgICBjdXIuY2xvc2UoKQogICAgcmV0dXJuIChydlswXSBpZiBydiBlbHNlIE5vbmUpIGlmIG9uZSBlbHNlIHJ2CgpkZWYgaW5pdF9hcHAoYXBwKToKICAgIGFwcC50ZWFyZG93bl9hcHBjb250ZXh0KGNsb3NlX2RiKQogICAgd2l0aCBhcHAuYXBwX2NvbnRleHQoKToKICAgICAgICBjcmVhdGVfbWV0cmljc190YWJsZSgpCiAgICAgICAgQmFzZS5tZXRhZGF0YS5jcmVhdGVfYWxsKGJpbmQ9ZW5naW5lKSAgIyBPUk0gdGFibGVzIChzYWZlIGlmIGV4aXN0cykKCmRlZiBjcmVhdGVfbWV0cmljc190YWJsZSgpOgogICAgIiIiQ3JlYXRlIG1ldHJpY3MgdGFibGUgaWYgbWlzc2luZyAocmF3IFNRTCB3LyBhbGwgY29scyBleHBsaWNpdDsgaWRlbXBvdGVudCkuIiIiCiAgICAjIEZ1bGwgZXhwbGljaXQgU1FMIChubyAjOyBhbGlnbiBNZXRyaWMgbW9kZWwgKyBQMiBjb2xzKQogICAgcXVlcnkoJycnQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgbWV0cmljcyAoCiAgICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULAogICAgICAgIHN5bWJvbCBURVhUIE5PVCBOVUxMLAogICAgICAgIHRpbWVmcmFtZSBURVhUIE5PVCBOVUxMIERFRkFVTFQgJzVtJywKICAgICAgICBwcmljZSBSRUFMLAogICAgICAgIHByaWNlX2NoYW5nZV8yNGhfcGN0IFJFQUwsCiAgICAgICAgdm9sdW1lXzI0aCBSRUFMLAogICAgICAgIHZvbHVtZV9jaGFuZ2VfMjRoX3BjdCBSRUFMLAogICAgICAgIG1hcmtldF9jYXAgUkVBTCwKICAgICAgICBvaV91c2QgUkVBTCwKICAgICAgICBvaV9hYnNfdXNkIFJFQUwsCiAgICAgICAgb2lfY2hhbmdlXzI0aF9wY3QgUkVBTCwKICAgICAgICBvaV9jaGFuZ2VfNW1fcGN0IFJFQUwsCiAgICAgICAgb2lfY2hhbmdlXzE1bV9wY3QgUkVBTCwKICAgICAgICBvaV9jaGFuZ2VfMzBtX3BjdCBSRUFMLAogICAgICAgIG9pX2NoYW5nZV8xaF9wY3QgUkVBTCwKICAgICAgICBvaV9kZWx0YV9wY3QgUkVBTCwKICAgICAgICBwcmljZV9jaGFuZ2VfNW1fcGN0IFJFQUwsCiAgICAgICAgcHJpY2VfY2hhbmdlXzE1bV9wY3QgUkVBTCwKICAgICAgICBwcmljZV9jaGFuZ2VfMzBtX3BjdCBSRUFMLAogICAgICAgIHByaWNlX2NoYW5nZV8xaF9wY3QgUkVBTCwKICAgICAgICBnbG9iYWxfbHNfNW0gUkVBTCwKICAgICAgICBnbG9iYWxfbHNfMTVtIFJFQUwsCiAgICAgICAgZ2xvYmFsX2xzXzMwbSBSRUFMLAogICAgICAgIGdsb2JhbF9sc18xaCBSRUFMLAogICAgICAgIGxvbmdfYWNjb3VudF9wY3QgUkVBTCwKICAgICAgICBzaG9ydF9hY2NvdW50X3BjdCBSRUFMLAogICAgICAgIHRvcF9scyBSRUFMLAogICAgICAgIHRvcF9sc19hY2NvdW50cyBSRUFMLAogICAgICAgIHRvcF9sc19wb3NpdGlvbnMgUkVBTCwKICAgICAgICBsc19kZWx0YV9wY3QgUkVBTCwKICAgICAgICBjdmQgUkVBTCwKICAgICAgICB6X2xzIFJFQUwsCiAgICAgICAgel9zY29yZSBSRUFMLAogICAgICAgIGltYmFsYW5jZSBSRUFMLAogICAgICAgIGZ1bmRpbmcgUkVBTCwKICAgICAgICByc2kgUkVBTCwKICAgICAgICB2b2xfdXNkIFJFQUwgREVGQVVMVCAwLjAsCiAgICAgICAgdGltZXN0YW1wIERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsCiAgICAgICAgVU5JUVVFKHN5bWJvbCwgdGltZWZyYW1lLCB0aW1lc3RhbXApIE9OIENPTkZMSUNUIFJFUExBQ0UKICAgICknJycpCiAgICBwcmludCgiTWV0cmljcyB0YWJsZSBjcmVhdGVkL3ZlcmlmaWVkIE9LIChyYXcgU1FMKSIpCiAgICAKICAgICMgQUxURVIgZm9yIG5ldy9taXNzaW5nIGNvbHMgKGlkZW1wb3RlbnQ7IGZ1bGwgbGlzdCBpbmNsIHRpbWVmcmFtZS96X3Njb3JlL3ZvbF91c2QpCiAgICBkYiA9IGdldF9kYigpCiAgICBjdXIgPSBkYi5jdXJzb3IoKQogICAgYWxsX2NvbHVtbnMgPSBbCiAgICAgICAgJ3RpbWVmcmFtZScsICAjIE5ldzogQWRkIGZpcnN0IChOT1QgTlVMTCBERUZBVUxUICc1bSc7IHNhZmUgaWYgZXhpc3RzKQogICAgICAgICdwcmljZScsICdwcmljZV9jaGFuZ2VfMjRoX3BjdCcsICd2b2x1bWVfMjRoJywgJ3ZvbHVtZV9jaGFuZ2VfMjRoX3BjdCcsICdtYXJrZXRfY2FwJywKICAgICAgICAnb2lfdXNkJywgJ29pX2Fic191c2QnLCAnb2lfY2hhbmdlXzI0aF9wY3QnLCAnb2lfY2hhbmdlXzVtX3BjdCcsICdvaV9jaGFuZ2VfMTVtX3BjdCcsCiAgICAgICAgJ29pX2NoYW5nZV8zMG1fcGN0JywgJ29pX2NoYW5nZV8xaF9wY3QnLCAnb2lfZGVsdGFfcGN0JywKICAgICAgICAncHJpY2VfY2hhbmdlXzVtX3BjdCcsICdwcmljZV9jaGFuZ2VfMTVtX3BjdCcsICdwcmljZV9jaGFuZ2VfMzBtX3BjdCcsICdwcmljZV9jaGFuZ2VfMWhfcGN0JywKICAgICAgICAnZ2xvYmFsX2xzXzVtJywgJ2dsb2JhbF9sc18xNW0nLCAnZ2xvYmFsX2xzXzMwbScsICdnbG9iYWxfbHNfMWgnLAogICAgICAgICdsb25nX2FjY291bnRfcGN0JywgJ3Nob3J0X2FjY291bnRfcGN0JywgJ3RvcF9scycsICd0b3BfbHNfYWNjb3VudHMnLCAndG9wX2xzX3Bvc2l0aW9ucycsCiAgICAgICAgJ2xzX2RlbHRhX3BjdCcsICdjdmQnLCAnel9scycsICd6X3Njb3JlJywgJ2ltYmFsYW5jZScsICdmdW5kaW5nJywgJ3JzaScsICd2b2xfdXNkJyAgIyBBZGRlZCB2b2xfdXNkCiAgICBdCiAgICBmb3IgY29sIGluIGFsbF9jb2x1bW5zOgogICAgICAgIHRyeToKICAgICAgICAgICAgY3VyLmV4ZWN1dGUoZiJBTFRFUiBUQUJMRSBtZXRyaWNzIEFERCBDT0xVTU4ge2NvbH0gUkVBTCIpICAjIFJFQUwgZm9yIGFsbCAodGYgVEVYVCBidXQgc2FmZSkKICAgICAgICAgICAgcHJpbnQoZiJBZGRlZCBjb2x1bW4ge2NvbH0gdG8gbWV0cmljcyB0YWJsZSIpCiAgICAgICAgZXhjZXB0IHNxbGl0ZTMuT3BlcmF0aW9uYWxFcnJvcjoKICAgICAgICAgICAgcGFzcyAgIyBFeGlzdHMKICAgIGRiLmNvbW1pdCgpCiAgICBjdXIuY2xvc2UoKQoKIyBJbiBiYWNrZW5kL3NyYy9mdXR1cmVzYm9hcmQvZGIucHk6IENsZWFuZWQgc2F2ZV9tZXRyaWNzIChhbGlnbiBzYWZlX2Zsb2F0OyBubyBjaGFuZ2UgdG8gbWVyZ2UvcHJlLWNhbGMpCmRlZiBzYXZlX21ldHJpY3MobWV0cmljcywgdGltZWZyYW1lPSc1bScpOgogICAgIiIiQmF0Y2ggc2F2ZSB3LyB0ZiBiaW5kICsgZnVsbCBkZWx0YXMgKG9pL2xzICUgcm9sbGluZyBzeW0vdGYpICsgQ1ZEL1ovaW1iYWxhbmNlL2Z1bmRpbmcgY2FsYyArIGd1YXJkcy4iIiIKICAgIGlmIG5vdCBtZXRyaWNzOgogICAgICAgIHJldHVybiAwCiAgICBsb2dnZXIuaW5mbyhmIlNhdmluZyB0byBEQjoge2NmZy5EQVRBQkFTRX0gdGY9e3RpbWVmcmFtZX0iKQogICAgc2Vzc2lvbiA9IFNlc3Npb24oKQogICAgdHJ5OgogICAgICAgIHNhdmVkX2NvdW50ID0gMAogICAgICAgIGZvciBtIGluIG1ldHJpY3M6CiAgICAgICAgICAgIGlmICdlcnJvcicgaW4gbTogY29udGludWUKICAgICAgICAgICAgIyBTYWZlIHBhcnNlIChleGlzdGluZykgLSBGVUxMIEFTU0lHTlMKICAgICAgICAgICAgbWV0cmljID0gTWV0cmljKAogICAgICAgICAgICAgICAgc3ltYm9sPW1bJ3N5bWJvbCddLAogICAgICAgICAgICAgICAgdGltZWZyYW1lPXRpbWVmcmFtZSwgICMgQmluZAogICAgICAgICAgICAgICAgdGltZXN0YW1wPWRhdGV0aW1lLm5vdyh0aW1lem9uZS51dGMpICsgdGltZWRlbHRhKG1pY3Jvc2Vjb25kcz1yYW5kb20ucmFuZGludCgwLDk5OTk5OSkpLAogICAgICAgICAgICAgICAgcHJpY2U9c2FmZV9mbG9hdChtLCAnUHJpY2UnKSwgICMgIiQ1NiwwODYuMzUiIOKGkiA1NjA4Ni4zNSAoc3RyaXBzICQpCiAgICAgICAgICAgICAgICBwcmljZV9jaGFuZ2VfMjRoX3BjdD1zYWZlX2Zsb2F0KG0sICdQcmljZV9DaGFuZ2VfMjRoX1BjdCcpLCAgIyAiLTAuOTQlIiDihpIgLTAuOTQKICAgICAgICAgICAgICAgIHZvbHVtZV8yNGg9c2FmZV9mbG9hdChtLCAnVm9sdW1lXzI0aCcpLAogICAgICAgICAgICAgICAgdm9sdW1lX2NoYW5nZV8yNGhfcGN0PXNhZmVfZmxvYXQobSwgJ1ZvbHVtZV9DaGFuZ2VfMjRoX1BjdCcpLAogICAgICAgICAgICAgICAgbWFya2V0X2NhcD1zYWZlX2Zsb2F0KG0sICdNYXJrZXRfQ2FwJyksCiAgICAgICAgICAgICAgICBvaV91c2Q9c2FmZV9mbG9hdChtLCAnT0lfVVNEJyksCiAgICAgICAgICAgICAgICBvaV9hYnNfdXNkPXNhZmVfZmxvYXQobSwgJ29pX2Fic191c2QnKSBvciBzYWZlX2Zsb2F0KG0sICdPSV9VU0QnKSwgICMgRmFsbGJhY2sKICAgICAgICAgICAgICAgIG9pX2NoYW5nZV8yNGhfcGN0PXNhZmVfZmxvYXQobSwgJ09JX0NoYW5nZV8yNGhfUGN0JyksCiAgICAgICAgICAgICAgICB0b3BfbHM9c2FmZV9mbG9hdChtLCAnVG9wX0xTJyksICAjIEpTT04gIlRvcF9MUyIg4oaSIDEuOTkKICAgICAgICAgICAgICAgIHRvcF9sc19hY2NvdW50cz1zYWZlX2Zsb2F0KG0sICd0b3BfbHNfYWNjb3VudHMnKSwKICAgICAgICAgICAgICAgIHRvcF9sc19wb3NpdGlvbnM9c2FmZV9mbG9hdChtLCAnVG9wX0xTX1Bvc2l0aW9ucycpLAogICAgICAgICAgICAgICAgbG9uZ19hY2NvdW50X3BjdD1zYWZlX2Zsb2F0KG0sICdMb25nX0FjY291bnRfUGN0JyksCiAgICAgICAgICAgICAgICBzaG9ydF9hY2NvdW50X3BjdD1zYWZlX2Zsb2F0KG0sICdTaG9ydF9BY2NvdW50X1BjdCcpLAogICAgICAgICAgICAgICAgY3ZkPXNhZmVfZmxvYXQobSwgJ2N2ZCcpIG9yIG5wLnJhbmRvbS51bmlmb3JtKC0xZTksIDFlOSksICAjIEV4aXN0aW5nCiAgICAgICAgICAgICAgICB6X2xzPTAuMCwgICMgQ2FsYyBiZWxvdwogICAgICAgICAgICAgICAgaW1iYWxhbmNlPXNhZmVfZmxvYXQobSwgJ2ltYmFsYW5jZScpIG9yIDAuMCwgICMgTmV3OiBGcm9tIGZldGNoCiAgICAgICAgICAgICAgICBmdW5kaW5nPXNhZmVfZmxvYXQobSwgJ2Z1bmRpbmcnKSBvciAwLjAsICAjIE5ldzogRnJvbSBmZXRjaAogICAgICAgICAgICAgICAgcnNpPXNhZmVfZmxvYXQobSwgJ3JzaScpIG9yIDUwLjAsICAjIE5ldzogRnJvbSBjYWxjCiAgICAgICAgICAgICAgICB2b2xfdXNkPXNhZmVfZmxvYXQobSwgJ3ZvbF91c2QnKSBvciAwLjAgICMgTmV3OiBGcm9tIHNlZWQgcHJveHkgb3IgZGVmYXVsdAogICAgICAgICAgICApCiAgICAgICAgICAgICMgVGYtc3BlY2lmaWMgc2V0cyAocG9zdC1jb25zdDsgb3ZlcnJpZGUgdy8gSlNPTiBrZXlzKQogICAgICAgICAgICBsc19rZXkgPSBmJ2dsb2JhbF9sc197dGltZWZyYW1lfScKICAgICAgICAgICAgY3Vycl9scyA9IHNhZmVfZmxvYXQobSwgZidHbG9iYWxfTFNfe3RpbWVmcmFtZX0nKSBvciAxLjAgICMgS2V5IG1hdGNoICsgZGVmYXVsdAogICAgICAgICAgICBzZXRhdHRyKG1ldHJpYywgbHNfa2V5LCBjdXJyX2xzKQogICAgICAgICAgICBvaV9jaGFuZ2Vfa2V5ID0gZidvaV9jaGFuZ2Vfe3RpbWVmcmFtZX1fcGN0JwogICAgICAgICAgICBvaV9jaGFuZ2VfdmFsID0gc2FmZV9mbG9hdChtLCBmJ09JX0NoYW5nZV97dGltZWZyYW1lfV9QY3QnKSBvciAwLjAgICMgIjAuMDQlIiDihpIgMC4wNAogICAgICAgICAgICBpZiBoYXNhdHRyKG1ldHJpYywgb2lfY2hhbmdlX2tleSk6CiAgICAgICAgICAgICAgICBzZXRhdHRyKG1ldHJpYywgb2lfY2hhbmdlX2tleSwgb2lfY2hhbmdlX3ZhbCkKICAgICAgICAgICAgcHJpY2VfY2hhbmdlX2tleSA9IGYncHJpY2VfY2hhbmdlX3t0aW1lZnJhbWV9X3BjdCcKICAgICAgICAgICAgcHJpY2VfY2hhbmdlX3ZhbCA9IHNhZmVfZmxvYXQobSwgZidQcmljZV9DaGFuZ2Vfe3RpbWVmcmFtZX1fUGN0Jykgb3IgMC4wCiAgICAgICAgICAgIGlmIGhhc2F0dHIobWV0cmljLCBwcmljZV9jaGFuZ2Vfa2V5KToKICAgICAgICAgICAgICAgIHNldGF0dHIobWV0cmljLCBwcmljZV9jaGFuZ2Vfa2V5LCBwcmljZV9jaGFuZ2VfdmFsKQoKICAgICAgICAgICAgIyBGdWxsIGRlbHRhczogUXVlcnkgcHJldiBzeW0vdGYKICAgICAgICAgICAgcHJldiA9IHNlc3Npb24ucXVlcnkoTWV0cmljKS5maWx0ZXIoTWV0cmljLnN5bWJvbCA9PSBtWydzeW1ib2wnXSwgTWV0cmljLnRpbWVmcmFtZSA9PSB0aW1lZnJhbWUpLm9yZGVyX2J5KE1ldHJpYy50aW1lc3RhbXAuZGVzYygpKS5maXJzdCgpCiAgICAgICAgICAgIHByZXZfb2kgPSBwcmV2Lm9pX2Fic191c2QgaWYgcHJldiBlbHNlIDAuMAogICAgICAgICAgICBwcmV2X2xzID0gZ2V0YXR0cihwcmV2LCBmJ2dsb2JhbF9sc197dGltZWZyYW1lfScsIDEuMCkgaWYgcHJldiBlbHNlIDEuMCAgIyBEZWZhdWx0IDEuMCBpZiBOb25lL21pc3NpbmcKCiAgICAgICAgICAgIGN1cnJfb2kgPSBtZXRyaWMub2lfYWJzX3VzZCBvciAwLjAgICMgRmFsbGJhY2sgaWYgTm9uZQogICAgICAgICAgICBjdXJyX2xzID0gZ2V0YXR0cihtZXRyaWMsIGYnZ2xvYmFsX2xzX3t0aW1lZnJhbWV9JywgMS4wKSAgIyBEZWZhdWx0IDEuMCBpZiBOb25lCgogICAgICAgICAgICBpZiBwcmV2X29pID4gMDoKICAgICAgICAgICAgICAgIG1ldHJpYy5vaV9kZWx0YV9wY3QgPSAoKGN1cnJfb2kgLSBwcmV2X29pKSAvIHByZXZfb2kpICogMTAwCiAgICAgICAgICAgICAgICBwcmludChmIm9pX2RlbHRhX3BjdCB7bVsnc3ltYm9sJ119L3t0aW1lZnJhbWV9OiB7bWV0cmljLm9pX2RlbHRhX3BjdDouMmZ9JSIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBtZXRyaWMub2lfZGVsdGFfcGN0ID0gMC4wCgogICAgICAgICAgICBpZiBwcmV2X2xzID4gMDoKICAgICAgICAgICAgICAgIG1ldHJpYy5sc19kZWx0YV9wY3QgPSAoKGN1cnJfbHMgLSBwcmV2X2xzKSAvIHByZXZfbHMpICogMTAwCiAgICAgICAgICAgICAgICBwcmludChmImxzX2RlbHRhX3BjdCB7bVsnc3ltYm9sJ119L3t0aW1lZnJhbWV9OiB7bWV0cmljLmxzX2RlbHRhX3BjdDouMmZ9JSIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBtZXRyaWMubHNfZGVsdGFfcGN0ID0gMC4wCgogICAgICAgICAgICAjIENWRCByZWFsIHRlYXNlOiBTdHViIHJhbmQ7IHJlYWwgdmlhIG1ldHJpY3MucHkga2xpbmVzIGhvb2sgKHN1bSB2b2wgZGlmZikKICAgICAgICAgICAgbWV0cmljLmN2ZCA9IHNhZmVfZmxvYXQobSwgJ2N2ZCcpIG9yIG5wLnJhbmRvbS51bmlmb3JtKC0xZTksIDFlOSkgICMgJEIgcmFuZ2UKCiAgICAgICAgICAgICMgWi1MUzogKGN1cnIgLSBtZWFuKS9zdGQgbGFzdCAyNCBwb2ludHMgc3ltL3RmCiAgICAgICAgICAgIGxhc3RfNTAgPSBzZXNzaW9uLnF1ZXJ5KE1ldHJpYykuZmlsdGVyKE1ldHJpYy5zeW1ib2wgPT0gbVsnc3ltYm9sJ10sIE1ldHJpYy50aW1lZnJhbWUgPT0gdGltZWZyYW1lKS5vcmRlcl9ieShNZXRyaWMudGltZXN0YW1wLmRlc2MoKSkubGltaXQoNTApLmFsbCgpICAjIEZpeDogMjTihpI1MCBoaXN0CiAgICAgICAgICAgIGlmIGxhc3RfNTA6CiAgICAgICAgICAgICAgICBsc192YWxzID0gW2dldGF0dHIocCwgZidnbG9iYWxfbHNfe3RpbWVmcmFtZX0nLCAxLjApIGZvciBwIGluIGxhc3RfNTAgaWYgZ2V0YXR0cihwLCBmJ2dsb2JhbF9sc197dGltZWZyYW1lfScsIE5vbmUpIGlzIG5vdCBOb25lXQogICAgICAgICAgICAgICAgaWYgbGVuKGxzX3ZhbHMpID4gMToKICAgICAgICAgICAgICAgICAgICBtZWFuX2xzID0gbnAubWVhbihsc192YWxzKQogICAgICAgICAgICAgICAgICAgIHN0ZF9scyA9IG5wLnN0ZChsc192YWxzKQogICAgICAgICAgICAgICAgICAgIGlmIHN0ZF9scyA+IDA6CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldHJpYy56X2xzID0gKGN1cnJfbHMgLSBtZWFuX2xzKSAvIHN0ZF9scwogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldHJpYy56X2xzID0gMC4wCiAgICAgICAgICAgICAgICAgICAgbWV0cmljLnpfbHMgPSBtYXgobWluKG1ldHJpYy56X2xzLCA5Ljk5KSwgLTkuOTkpICAjIENsaXAgZmluaXRlCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiJ6X2xzIHttWydzeW1ib2wnXX0ve3RpbWVmcmFtZX06IHttZXRyaWMuel9sczouMmZ9IChtZWFuPXttZWFuX2xzOi4yZn0gc3RkPXtzdGRfbHM6LjJmfSkiKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBtZXRyaWMuel9scyA9IDAuMAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbWV0cmljLnpfbHMgPSAwLjAKCiAgICAgICAgICAgICMgQmluZCB6X2xzIHRvIHpfc2NvcmUgKG5ldykKICAgICAgICAgICAgbWV0cmljLnpfc2NvcmUgPSBtZXRyaWMuel9scyAgIyBSZWFsIFogZnJvbSBjYWxjCgogICAgICAgICAgICAjIEZ1bGwgZ3VhcmRzOiBGaW5pdGUgKyBaPDEwIChrZXkgY29scyArIG5ldykKICAgICAgICAgICAgZ3VhcmRfY29scyA9IFsnb2lfYWJzX3VzZCcsICdnbG9iYWxfbHNfNW0nLCAndG9wX2xzJywgJ3ByaWNlJywgJ29pX2RlbHRhX3BjdCcsICdsc19kZWx0YV9wY3QnLCAnY3ZkJywgJ3pfbHMnLCAnel9zY29yZScsICdpbWJhbGFuY2UnLCAnZnVuZGluZycsICdyc2knLCAndm9sX3VzZCddICAjICt2b2xfdXNkCiAgICAgICAgICAgIGRyb3BwZWQgPSBGYWxzZQogICAgICAgICAgICBmb3IgY29sIGluIGd1YXJkX2NvbHM6CiAgICAgICAgICAgICAgICB2YWwgPSBnZXRhdHRyKG1ldHJpYywgY29sLCBOb25lKQogICAgICAgICAgICAgICAgaWYgdmFsIGlzIG5vdCBOb25lIGFuZCAobm90IG5wLmlzZmluaXRlKHZhbCkgb3IgKGNvbCBpbiBbJ3pfbHMnLCAnel9zY29yZSddIGFuZCBhYnModmFsKSA+PSAxMCkpOgogICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKGYiR3VhcmQgcmVqZWN0IHttWydzeW1ib2wnXX0ve3RpbWVmcmFtZX0ge2NvbH06IHt2YWx9IChpbmYvTmFOL1o+MTApIikKICAgICAgICAgICAgICAgICAgICBkcm9wcGVkID0gVHJ1ZQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGlmIGRyb3BwZWQ6IGNvbnRpbnVlCgogICAgICAgICAgICBwcmludChmIk1lcmdpbmcge21bJ3N5bWJvbCddfS97dGltZWZyYW1lfTogb2k9e21ldHJpYy5vaV9hYnNfdXNkfSwgbHM9e2dldGF0dHIobWV0cmljLCBmJ2dsb2JhbF9sc197dGltZWZyYW1lfScpfSwgWj17bWV0cmljLnpfbHN9IikKICAgICAgICAgICAgc2Vzc2lvbi5tZXJnZShtZXRyaWMpCiAgICAgICAgICAgIHNhdmVkX2NvdW50ICs9IDEKICAgICAgICBzZXNzaW9uLmNvbW1pdCgpCiAgICAgICAgbG9nZ2VyLmluZm8oZiJCdWxrIHNhdmVkIHtzYXZlZF9jb3VudH0gdy8gZGVsdGFzL0NWRC9aIHRmPXt0aW1lZnJhbWV9IikKICAgICAgICBwcmludChmIlNhdmVkIHtzYXZlZF9jb3VudH0gLSBUb3RhbDoge3Nlc3Npb24ucXVlcnkoTWV0cmljKS5maWx0ZXIoTWV0cmljLnRpbWVmcmFtZSA9PSB0aW1lZnJhbWUpLmNvdW50KCl9IikKICAgICAgICByZXR1cm4gc2F2ZWRfY291bnQKICAgIGV4Y2VwdCBJbnRlZ3JpdHlFcnJvciBhcyBpZToKICAgICAgICBzZXNzaW9uLnJvbGxiYWNrKCkKICAgICAgICBsb2dnZXIuZXJyb3IoZiJJbnRlZ3JpdHlFcnJvcjoge2llfSIpCiAgICAgICAgcmV0dXJuIDAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIkRCIHNhdmUgZXJyb3I6IHtlfSIpCiAgICAgICAgdHJhY2ViYWNrLnByaW50X2V4YygpCiAgICAgICAgc2Vzc2lvbi5yb2xsYmFjaygpCiAgICAgICAgcmV0dXJuIDAKICAgIGZpbmFsbHk6CiAgICAgICAgc2Vzc2lvbi5jbG9zZSgpCiAgICAgICAgaWYgc2F2ZWRfY291bnQgPiAwOiAgIyBFeHBsaWNpdAogICAgICAgICAgICBwcmludChmIlNBVkVEIHtzYXZlZF9jb3VudH0vMjAgdy8gZmluaXRlIGd1YXJkcy9kZWx0YXMvWiB0Zj17dGltZWZyYW1lfSAoZS5nLiwgWiBtZWFuPXtucC5tZWFuKFttLnpfbHMgZm9yIG0gaW4gc2Vzc2lvbi5xdWVyeShNZXRyaWMpLmZpbHRlcihNZXRyaWMudGltZWZyYW1lID09IHRpbWVmcmFtZSkubGltaXQoMjApLmFsbCgpXSk6LjJmfSkiKSAgIyBDb25zb2xlIHZpc2libGUKICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiJCdWxrIHNhdmVkIHtzYXZlZF9jb3VudH0gdy8gZGVsdGFzL0NWRC9aIHRmPXt0aW1lZnJhbWV9OyBEQiB0b3RhbCB0Zj17c2Vzc2lvbi5xdWVyeShNZXRyaWMpLmZpbHRlcihNZXRyaWMudGltZWZyYW1lID09IHRpbWVmcmFtZSkuY291bnQoKX0iKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGYiTk8gU0FWRVMgdGY9e3RpbWVmcmFtZX0gKGFsbCBkcm9wcGVkPyBndWFyZHMvZXJyKSIpCiAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKGYiTm8gbWV0cmljcyBzYXZlZCB0Zj17dGltZWZyYW1lfSAoY2hlY2sgZ3VhcmRzL0ludGVncml0eUVycm9yKSIpCgpkZWYgZ2V0X2xhdGVzdF9tZXRyaWNzKGxpbWl0PTUwLCBzeW1ib2w9Tm9uZSwgdGY9JzVtJyk6ICAjIEZpeDogK3N5bS90ZiBmaWx0ZXJzCiAgICAiIiJRdWVyeSByZWNlbnQgbWV0cmljcyAoT1JNIGZvciBmcm9udGVuZC9jaGFydHMpLiIiIgogICAgc2Vzc2lvbiA9IFNlc3Npb24oKQogICAgdHJ5OgogICAgICAgIHEgPSBzZXNzaW9uLnF1ZXJ5KE1ldHJpYykuZmlsdGVyKE1ldHJpYy50aW1lZnJhbWUgPT0gdGYpCiAgICAgICAgaWYgc3ltYm9sOgogICAgICAgICAgICBxID0gcS5maWx0ZXIoTWV0cmljLnN5bWJvbCA9PSBzeW1ib2wpCiAgICAgICAgcmV0dXJuIHEub3JkZXJfYnkoTWV0cmljLnRpbWVzdGFtcC5kZXNjKCkpLmxpbWl0KGxpbWl0KS5hbGwoKQogICAgZmluYWxseToKICAgICAgICBzZXNzaW9uLmNsb3NlKCkKCmRlZiBnZXRfbWV0cmljc19ieV9zeW1ib2woc3ltYm9sLCBsaW1pdD0yNCk6CiAgICAiIiJMYXRlc3QgZm9yIG9uZSBzeW1ib2wgKE9STSkuIiIiCiAgICBzZXNzaW9uID0gU2Vzc2lvbigpCiAgICB0cnk6CiAgICAgICAgcmV0dXJuIHNlc3Npb24ucXVlcnkoTWV0cmljKS5maWx0ZXIoTWV0cmljLnN5bWJvbCA9PSBzeW1ib2wpLm9yZGVyX2J5KE1ldHJpYy50aW1lc3RhbXAuZGVzYygpKS5saW1pdChsaW1pdCkuYWxsKCkKICAgIGZpbmFsbHk6CiAgICAgICAgc2Vzc2lvbi5jbG9zZSgp",
        "summary": "326L: from __future__ import annotations\n\nimport sqlite3\nimport os\nimport random  # For timestamp jitter i..."
      },
      {
        "path": "backend\\src\\futuresboard\\metrics.py",
        "type": ".py",
        "content": "aW1wb3J0IGNjeHQuYXN5bmNfc3VwcG9ydCBhcyBjY3h0X2FzeW5jCmltcG9ydCBhc3luY2lvCmltcG9ydCBhaW9odHRwCmZyb20gZmxhc2sgaW1wb3J0IEJsdWVwcmludCwgcmVxdWVzdCwganNvbmlmeQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQpmcm9tIC5kYiBpbXBvcnQgU2Vzc2lvbiwgTWV0cmljLCBzYXZlX21ldHJpY3MsIGdldF9sYXRlc3RfbWV0cmljcyAgIyArZ2V0X2xhdGVzdF9tZXRyaWNzCmZyb20gLnNjcmFwZXIgaW1wb3J0IHNlbmRfcHVibGljX3JlcXVlc3QgICMgU2luZ2xlIGltcG9ydDogLnNjcmFwZXIgb25seQpmcm9tIC5jb25maWcgaW1wb3J0IENvbmZpZwppbXBvcnQgcGF0aGxpYgppbXBvcnQgb3MKaW1wb3J0IHRpbWUKaW1wb3J0IHJhbmRvbSAgIyBGb3IgbW9jayByYW5kICsgaml0dGVyCmltcG9ydCBudW1weSBhcyBucAppbXBvcnQgcGFuZGFzIGFzIHBkICAjIE5ldzogRm9yIERhdGFGcmFtZSB3ZWlnaHRlZCBjYWxjIChQMykKaW1wb3J0IHN0YXRpc3RpY3MgICMgRm9yIFogbWVhbi9zdGQgdGVhc2UgaWYgbmVlZGVkCgptZXRyaWNzX2JwID0gQmx1ZXByaW50KCdtZXRyaWNzJywgX19uYW1lX18sIHVybF9wcmVmaXg9Jy9hcGknKQoKIyBTdGFuZGFsb25lIGNvbmZpZyBsb2FkIChubyBhcHApCmNmZ19wYXRoID0gcGF0aGxpYi5QYXRoKG9zLnBhdGguZGlybmFtZShvcy5wYXRoLmRpcm5hbWUoX19maWxlX18pKSkgICMgYmFja2VuZCByb290CmNmZyA9IENvbmZpZy5mcm9tX2NvbmZpZ19kaXIoY2ZnX3BhdGgucGFyZW50IC8gImNvbmZpZyIpICAjIHJvb3QvY29uZmlnClNZTUJPTFMgPSBjZmcuU1lNQk9MUyAgIyBbJ0JUQ1VTRFQnLCAnRVRIVVNEVCcsICdTT0xVU0RUJ10gZnJvbSAuZW52L0pTT04KIyBTYWZlIERFVl9NT0RFIChmYWxsYmFjayBUcnVlIGlmIG1pc3M7IGRlYnVnKQpERVZfTU9ERSA9IG9zLmdldGVudignREVWX01PREUnLCAnVHJ1ZScpLmxvd2VyKCkgPT0gJ3RydWUnCnByaW50KGYiTWV0cmljcyBjZmcgREVWX01PREU6IHtERVZfTU9ERX0gKGRpcmVjdCAuZW52IE9LKSIpCgojIFJTSSBjYWxjIChuZXc6IG51bXB5IDE0LXBlcmlvZCBzdGFuZGFyZCkKZGVmIGNhbGNfcnNpKGNsb3NlcywgcGVyaW9kPTE0KToKICAgIGlmIGxlbihjbG9zZXMpIDwgcGVyaW9kICsgMToKICAgICAgICByZXR1cm4gNTAuMAogICAgZGVsdGFzID0gbnAuZGlmZihjbG9zZXMpCiAgICBnYWlucyA9IG5wLm1heGltdW0oZGVsdGFzLCAwKQogICAgbG9zc2VzID0gbnAubWF4aW11bSgtZGVsdGFzLCAwKQogICAgYXZnX2dhaW4gPSBucC5tZWFuKGdhaW5zWzpwZXJpb2RdKQogICAgYXZnX2xvc3MgPSBucC5tZWFuKGxvc3Nlc1s6cGVyaW9kXSkKICAgIHJzID0gYXZnX2dhaW4gLyBhdmdfbG9zcyBpZiBhdmdfbG9zcyAhPSAwIGVsc2UgMAogICAgcnNpID0gMTAwIC0gKDEwMCAvICgxICsgcnMpKQogICAgZm9yIGkgaW4gcmFuZ2UocGVyaW9kLCBsZW4oZGVsdGFzKSk6CiAgICAgICAgYXZnX2dhaW4gPSAoYXZnX2dhaW4gKiAocGVyaW9kLTEpICsgZ2FpbnNbaV0pIC8gcGVyaW9kCiAgICAgICAgYXZnX2xvc3MgPSAoYXZnX2xvc3MgKiAocGVyaW9kLTEpICsgbG9zc2VzW2ldKSAvIHBlcmlvZAogICAgICAgIHJzID0gYXZnX2dhaW4gLyBhdmdfbG9zcyBpZiBhdmdfbG9zcyAhPSAwIGVsc2UgMAogICAgICAgIHJzaSA9IDEwMCAtICgxMDAgLyAoMSArIHJzKSkKICAgIHJldHVybiByb3VuZChyc2ksIDIpCgojIFNlbWFwaG9yZSBnbG9iYWwgKG5ldzogUDMgcmF0ZSBndWFyZCA4IGNvbmN1cnJlbnQpCnNlbWFwaG9yZSA9IGFzeW5jaW8uU2VtYXBob3JlKDgpCgpAbWV0cmljc19icC5yb3V0ZSgnL21ldHJpY3MnKQpkZWYgYXBpX21ldHJpY3MoKToKICAgIHRmID0gcmVxdWVzdC5hcmdzLmdldCgndGYnLCAnNW0nKQogICAgZXhjaCA9IHJlcXVlc3QuYXJncy5nZXQoJ2V4Y2gnLCAnYmluYW5jZScpCiAgICBsaW1pdCA9IGludChyZXF1ZXN0LmFyZ3MuZ2V0KCdsaW1pdCcsIDIwKSkKICAgIG9mZnNldCA9IGludChyZXF1ZXN0LmFyZ3MuZ2V0KCdvZmZzZXQnLCAwKSkKICAgIG1ldHJpY3MgPSBhc3luY2lvLnJ1bihnZXRfYWxsX21ldHJpY3ModGYsIGV4Y2gsIGxpbWl0PWxpbWl0LCBvZmZzZXQ9b2Zmc2V0KSkKICAgIHNhdmVfbWV0cmljcyhtZXRyaWNzLCB0ZikgICMgQWRkIHRmIHBhcmFtCiAgICAjIE5ldzogRW5yaWNoIHBvc3Qtc2F2ZSB3LyBkZWx0YXMvWiBmcm9tIERCIChmYXN0IHF1ZXJ5IHN5bS90ZikKICAgIGVucmljaGVkID0gW10KICAgIGZvciBtIGluIG1ldHJpY3M6CiAgICAgICAgaWYgJ2Vycm9yJyBpbiBtOiAKICAgICAgICAgICAgZW5yaWNoZWQuYXBwZW5kKG0pCiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgbGF0ZXN0ID0gZ2V0X2xhdGVzdF9tZXRyaWNzKGxpbWl0PTEsIHN5bWJvbD1tWydzeW1ib2wnXSwgdGY9dGYpICAjIEZpbHRlciBzeW0vdGYKICAgICAgICBpZiBsYXRlc3Q6CiAgICAgICAgICAgIG1bJ29pX2RlbHRhX3BjdCddID0gbGF0ZXN0WzBdLm9pX2RlbHRhX3BjdCBvciAwLjAKICAgICAgICAgICAgbVsnbHNfZGVsdGFfcGN0J10gPSBsYXRlc3RbMF0ubHNfZGVsdGFfcGN0IG9yIDAuMAogICAgICAgICAgICBtWyd6X2xzJ10gPSBsYXRlc3RbMF0uel9scyBvciAwLjAKICAgICAgICAgICAgIyBGaW5pdGUgZ3VhcmQgKGNsaXAgWiDCsTEwKQogICAgICAgICAgICBpZiBhYnMobVsnel9scyddKSA+IDEwOgogICAgICAgICAgICAgICAgbVsnel9scyddID0gMTAgaWYgbVsnel9scyddID4gMCBlbHNlIC0xMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG1bJ29pX2RlbHRhX3BjdCddID0gMC4wCiAgICAgICAgICAgIG1bJ2xzX2RlbHRhX3BjdCddID0gMC4wCiAgICAgICAgICAgIG1bJ3pfbHMnXSA9IDAuMAogICAgICAgIGVucmljaGVkLmFwcGVuZChtKQogICAgdG90YWwgPSBsZW4oYXN5bmNpby5ydW4oZ2V0X2FsbF9tZXRyaWNzKHRmLCBleGNoLCBsaW1pdD1Ob25lLCBvZmZzZXQ9MCkpKQogICAgcmVzcG9uc2UgPSBqc29uaWZ5KGVucmljaGVkKQogICAgcmVzcG9uc2UuaGVhZGVyc1snQ29udGVudC1SYW5nZSddID0gZid7b2Zmc2V0fS17b2Zmc2V0K2xlbihlbnJpY2hlZCktMX0ve3RvdGFsfScKICAgIHJldHVybiByZXNwb25zZQoKQG1ldHJpY3NfYnAucm91dGUoJy88c3ltYm9sPi9oaXN0b3J5JykKZGVmIGFwaV9oaXN0b3J5KHN5bWJvbCwgdGY9JzVtJyk6CiAgICBzZXNzaW9uID0gU2Vzc2lvbigpCiAgICB0cnk6CiAgICAgICAgaGlzdCA9IHNlc3Npb24ucXVlcnkoTWV0cmljKS5maWx0ZXIoTWV0cmljLnN5bWJvbCA9PSBzeW1ib2wpLm9yZGVyX2J5KE1ldHJpYy50aW1lc3RhbXAuZGVzYygpKS5saW1pdCgyNCkuYWxsKCkgICMgUDE6IDI0IHBvaW50cyAoNW09MmgpCiAgICAgICAgbHNfa2V5ID0gZidnbG9iYWxfbHNfe3RmfScgICMgZS5nLiwgZ2xvYmFsX2xzXzVtCiAgICAgICAgaGlzdG9yeSA9IFtdCiAgICAgICAgZm9yIG0gaW4gaGlzdDoKICAgICAgICAgICAgaGlzdG9yeS5hcHBlbmQoewogICAgICAgICAgICAgICAgJ3RpbWUnOiBpbnQobS50aW1lc3RhbXAudGltZXN0YW1wKCkgKiAxMDAwKSwgICMgVW5peCBtcyBmb3IgUmVjaGFydHMgbmV3IERhdGUoKjEwMDApCiAgICAgICAgICAgICAgICAnUHJpY2UnOiBtLnByaWNlLCAgIyBBZGQgZm9yIEFwcC5qc3ggc2FmZUZsb2F0KHJvdy5QcmljZSkKICAgICAgICAgICAgICAgICdvaV9hYnNfdXNkJzogbS5vaV9hYnNfdXNkLCAgIyBBbGlnbiAodnMgb2lfYWJzKQogICAgICAgICAgICAgICAgbHNfa2V5OiBnZXRhdHRyKG0sIGxzX2tleSwgTm9uZSkgICMgRHluYW1pYzogZ2xvYmFsX2xzXzVtOiAyLjkwMDIKICAgICAgICAgICAgfSkKICAgICAgICBwcmludChmIkhpc3RvcnkgZm9yIHtzeW1ib2x9L3t0Zn06IHtsZW4oaGlzdG9yeSl9IHBvaW50cyIpICAjIERlYnVnIChjb25zb2xlIG9uIGZldGNoKQogICAgICAgIHJldHVybiBqc29uaWZ5KGhpc3RvcnkpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJIaXN0b3J5IGVycm9yIGZvciB7c3ltYm9sfS97dGZ9OiB7ZX0iKQogICAgICAgIHJldHVybiBqc29uaWZ5KFtdKSwgNTAwCiAgICBmaW5hbGx5OgogICAgICAgIHNlc3Npb24uY2xvc2UoKQoKQG1ldHJpY3NfYnAucm91dGUoJy9oZWFsdGgnKSAgIyBQaGFzZSAxOiBTaW1wbGUgc3RhdHVzCmRlZiBoZWFsdGgoKToKICAgIGZyb20gLmRiIGltcG9ydCBnZXRfbGF0ZXN0X21ldHJpY3MKICAgIGxhdGVzdF9jb3VudCA9IGxlbihnZXRfbGF0ZXN0X21ldHJpY3MobGltaXQ9MSkpCiAgICByZXR1cm4ganNvbmlmeSh7J3N0YXR1cyc6ICdvaycsICdwYWlyc19sb2FkZWQnOiBsZW4oU1lNQk9MUyksICdsYXN0X3VwZGF0ZSc6IHRpbWUudGltZSgpLCAnZGJfcGluZyc6IGxhdGVzdF9jb3VudCA+IDB9KQoKZGVmIGFkZF9tZXRyaWNzX3JvdXRlKGFwcCk6CiAgICAiIiJMYXp5IGFkZCBmb3IgYXBwLnB5IChubyBjeWNsZSkuIFBsYWNlaG9sZGVyIGZvciBQaGFzZSA0IHJlcGxheS4iIiIKICAgIHBhc3MgICMgUmVnaXN0ZXJzIGJwOyBleHRlbmQgdy8gcmVwbGF5IHNsaWRlciBqb2lucwoKYXN5bmMgZGVmIGdldF9hbGxfbWV0cmljcyh0Zj0nNW0nLCBleGNoPSdiaW5hbmNlJywgbGltaXQ9MjAsIG9mZnNldD0wKToKICAgICIiIkJhdGNoIGZldGNoIHdpdGggZHluYW1pYyB0b3AtMjAsIGJhY2tvZmYgKFBoYXNlIDEpLiBTdGFuZGFsb25lLiIiIgogICAgZXhjaGFuZ2VfY2xhc3MgPSBnZXRhdHRyKGNjeHRfYXN5bmMsIGV4Y2gsIGNjeHRfYXN5bmMuYmluYW5jZSkKICAgIGV4Y2hhbmdlID0gZXhjaGFuZ2VfY2xhc3MoewogICAgICAgICdhcGlLZXknOiBjZmcuQVBJX0tFWSwKICAgICAgICAnc2VjcmV0JzogY2ZnLkFQSV9TRUNSRVQsCiAgICAgICAgJ2VuYWJsZVJhdGVMaW1pdCc6IFRydWUsCiAgICAgICAgJ3NhbmRib3gnOiBjZmcuVEVTVF9NT0RFLAogICAgICAgICdvcHRpb25zJzogeydkZWZhdWx0VHlwZSc6ICdmdXR1cmUnfQogICAgfSkKICAgIHRyeToKICAgICAgICAjIER5bmFtaWMgdG9wLTIwIChzb3J0IGJ5IHF1b3RlVm9sdW1lOyBzZWVkIHdpdGggY29uZmlnIFNZTUJPTFM9MykKICAgICAgICB0aWNrZXJzID0gYXdhaXQgZXhjaGFuZ2UuZmV0Y2hfdGlja2VycygpCiAgICAgICAgbWFya2V0cyA9IGF3YWl0IGV4Y2hhbmdlLmxvYWRfbWFya2V0cygpICAjIE5ldzogQWN0aXZlIGZpbHRlcgogICAgICAgIHVzZHRfcGFpcnMgPSBbcyBmb3IgcyBpbiB0aWNrZXJzIGlmICcvVVNEVDpVU0RUJyBpbiBzIGFuZCB0aWNrZXJzW3NdLmdldCgncXVvdGVWb2x1bWUnLCAwKSA+IDFlOCBhbmQgbWFya2V0cy5nZXQocy5yZXBsYWNlKCcvVVNEVDpVU0RUJywgJ1VTRFQnKSwge30pLmdldCgnYWN0aXZlJywgRmFsc2UpIGFuZCBtYXJrZXRzLmdldChzLnJlcGxhY2UoJy9VU0RUOlVTRFQnLCAnVVNEVCcpLCB7fSkuZ2V0KCd0eXBlJykgPT0gJ2Z1dHVyZSddICAjIEZpbHRlciBhY3RpdmUgZnV0dXJlcyB2b2w+MWU4CiAgICAgICAgc29ydGVkX2NjeHRfc3ltYm9scyA9IHNvcnRlZCh1c2R0X3BhaXJzLCBrZXk9bGFtYmRhIHg6IHRpY2tlcnNbeF0uZ2V0KCdxdW90ZVZvbHVtZScsIDApLCByZXZlcnNlPVRydWUpCiAgICAgICAgaWYgbGltaXQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNvcnRlZF9jY3h0X3N5bWJvbHMgPSBzb3J0ZWRfY2N4dF9zeW1ib2xzW29mZnNldDpvZmZzZXQrbGltaXRdCiAgICAgICAgcmF3X3N5bWJvbHMgPSBbcy5yZXBsYWNlKCcvVVNEVDpVU0RUJywgJ1VTRFQnKSBmb3IgcyBpbiBzb3J0ZWRfY2N4dF9zeW1ib2xzXSAgIyBEeW5hbWljIHRvcC1OLCBubyBbOmxlbihTWU1CT0xTKV0KICAgICAgICBjY3h0X3N5bWJvbHMgPSBbcy5yZXBsYWNlKCdVU0RUJywgJy9VU0RUOlVTRFQnKSBmb3IgcyBpbiByYXdfc3ltYm9sc10KICAgICAgICAKICAgICAgICAjIEJhdGNoIGNodW5rcyAxMC9wYWlyIHcvIGJhY2tvZmYgKyBzZW1hcGhvcmUKICAgICAgICByZXN1bHRzID0gW10KICAgICAgICBiYWNrb2ZmID0gMC4yCiAgICAgICAgY2h1bmtfc2l6ZSA9IDEwCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKGNjeHRfc3ltYm9scyksIGNodW5rX3NpemUpOgogICAgICAgICAgICBjaHVua19jY3h0ID0gY2N4dF9zeW1ib2xzW2k6aStjaHVua19zaXplXQogICAgICAgICAgICBjaHVua19yYXcgPSByYXdfc3ltYm9sc1tpOmkrY2h1bmtfc2l6ZV0KICAgICAgICAgICAgYXN5bmMgZGVmIHNlbV90YXNrKGNjX3N5bSwgcmF3X3N5bSk6CiAgICAgICAgICAgICAgICBhc3luYyB3aXRoIHNlbWFwaG9yZTogICMgTmV3OiA4IGNvbmN1cnJlbnQKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgZmV0Y2hfbWV0cmljcyhleGNoYW5nZSwgY2Nfc3ltLCByYXdfc3ltLCB0ZikKICAgICAgICAgICAgdGFza3MgPSBbc2VtX3Rhc2soY2MsIHJ3KSBmb3IgY2MsIHJ3IGluIHppcChjaHVua19jY3h0LCBjaHVua19yYXcpXQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBjaHVua19yZXMgPSBhd2FpdCBhc3luY2lvLmdhdGhlcigqdGFza3MsIHJldHVybl9leGNlcHRpb25zPVRydWUpCiAgICAgICAgICAgICAgICByZXN1bHRzLmV4dGVuZChbciBmb3IgciBpbiBjaHVua19yZXMgaWYgbm90IGlzaW5zdGFuY2UociwgRXhjZXB0aW9uKSBhbmQgJ2Vycm9yJyBub3QgaW4gcl0pCiAgICAgICAgICAgIGV4Y2VwdCBjY3h0X2FzeW5jLk5ldHdvcmtFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgaWYgJ0REb1MnIGluIHN0cihlKSBvciAncmF0ZUxpbWl0JyBpbiBzdHIoZSk6CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXN5bmNpby5zbGVlcChiYWNrb2ZmICsgcmFuZG9tLnVuaWZvcm0oMC4xLCAwLjUpKSAgIyBGaXg6ICtqaXR0ZXIgMC4xLTAuNXMKICAgICAgICAgICAgICAgICAgICBiYWNrb2ZmID0gbWluKGJhY2tvZmYgKiAyLCAxMCkKICAgICAgICAgICAgICAgICAgICBwcmludChmIlJhdGUgbGltaXQge2V4Y2h9IGNodW5rIHtpLy9jaHVua19zaXplfToge2V9IC0gcmV0cnkge2JhY2tvZmZ9cyIpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJhaXNlCiAgICAgICAgICAgIGF3YWl0IGFzeW5jaW8uc2xlZXAocmFuZG9tLnVuaWZvcm0oMC4xLCAwLjUpKSAgIyBGaXg6IFBlci1jaHVuayBqaXR0ZXIKICAgICAgICAjIFdlaWdodGVkIGdsb2JhbCBPSSAoUDM6IM6jKE9Jwrd2b2wpL86jKHZvbCk7IEJ5Yml0IHRlYXNlIGlmIGV4Y2g9PSdieWJpdCcpCiAgICAgICAgaWYgZXhjaCA9PSAnYnliaXQnOgogICAgICAgICAgICBwcmludChmIkJ5Yml0IGZhbGxiYWNrIFdTIGZzdHJlYW0gZm9yIHRmPXt0Zn0iKQogICAgICAgIGRmID0gcGQuRGF0YUZyYW1lKHJlc3VsdHMpICAjIEZyb20geW91ciByZXN1bHRzIGxpc3QKICAgICAgICBpZiBsZW4oZGYpID4gMCBhbmQgJ3ZvbF91c2QnIGluIGRmLmNvbHVtbnMgYW5kIGRmWyd2b2xfdXNkJ10uc3VtKCkgPiAwOgogICAgICAgICAgICB3ZWlnaHRzID0gZGZbJ3ZvbF91c2QnXSAvIGRmWyd2b2xfdXNkJ10uc3VtKCkKICAgICAgICAgICAgd2VpZ2h0ZWRfb2kgPSBucC5hdmVyYWdlKGRmWydvaV9hYnNfdXNkJ10sIHdlaWdodHM9d2VpZ2h0cykKICAgICAgICAgICAgcHJpbnQoZiJXZWlnaHRlZCBHbG9iYWwgT0kge3RmfTogJHt3ZWlnaHRlZF9vaSAvIDFlOTouMmZ9QiAoe2V4Y2h9IHdlaWdodHMpIikKICAgICAgICAgICAgIyBBZGQgdG8gZWFjaCBtZXRyaWMgb3IgZ2xvYmFsIChmb3IgL2FwaS9tZXRyaWNzIEpTT04pCiAgICAgICAgICAgIGZvciBpLCByb3cgaW4gZGYuaXRlcnJvd3MoKToKICAgICAgICAgICAgICAgIHJlc3VsdHNbaV1bJ3dlaWdodGVkX29pX3VzZCddID0gd2VpZ2h0ZWRfb2kKICAgICAgICAjIEV4aXN0aW5nIHJldHVybiByZXN1bHRzIChwYWdpbmF0ZWQvQ29udGVudC1SYW5nZSkKICAgICAgICByZXR1cm4gcmVzdWx0cwogICAgZmluYWxseToKICAgICAgICBhd2FpdCBleGNoYW5nZS5jbG9zZSgpCgphc3luYyBkZWYgZmV0Y2hfbWV0cmljcyhleGNoYW5nZSwgY2N4dF9zeW1ib2wsIHJhd19zeW1ib2wsIHRmPSc1bScpOgogICAgIiIiQXN5bmMgZmV0Y2ggdy8gZWFybHkgREVWIG1vY2sgKG5vIGF0dHIvNDI5OyBzeW50aCBkYXRhKS4iIiIKICAgIGlmIERFVl9NT0RFOiAgIyBHbG9iYWwgc2FmZQogICAgICAgICMgRWFybHkgbW9jayBmdWxsIChzeW50aCBPSS9MUy9jdmQvWi9pbWIvZnVuZDsgMjAgc3ltcyB0ZWFzZTsgbGltaXQ9MyB0ZXN0KQogICAgICAgIG1vY2tzID0gewogICAgICAgICAgICAnQlRDVVNEVCc6IHsnb2knOiA4MDYwNC42OTcgKiA2MDAwMCwgJ2xzJzogMi4yMjA2LCAnY3ZkJzogMTIzNDU2NywgJ3onOiAxLjIwLCAnaW1iJzogLTIuMywgJ2Z1bmQnOiAtMC4wMX0sCiAgICAgICAgICAgICdFVEhVU0RUJzogeydvaSc6IDE0NDgyMDYuMTI0ICogMjUwMCwgJ2xzJzogMS44ODUyLCAnY3ZkJzogLTg3NjU0MywgJ3onOiAwLjg1LCAnaW1iJzogMS4yLCAnZnVuZCc6IDAuMDA1fSwKICAgICAgICAgICAgJ1NPTFVTRFQnOiB7J29pJzogNzQ3NDIxMi45NSAqIDE1MCwgJ2xzJzogMy44ODUyLCAnY3ZkJzogMjM0NTY3OCwgJ3onOiAyLjEwLCAnaW1iJzogMy4xLCAnZnVuZCc6IC0wLjAyfSwKICAgICAgICAgICAgIyBSYW5kIGZhbGxiYWNrIGZvciAxNysgKGV4cGFuZCBwb3N0LXRlc3QpCiAgICAgICAgfQogICAgICAgIG1vY2sgPSBtb2Nrcy5nZXQocmF3X3N5bWJvbCwgeydvaSc6IHJhbmRvbS51bmlmb3JtKDFlNSwxZTcpKjEwMCwgJ2xzJzogcmFuZG9tLnVuaWZvcm0oMSw0KSwgJ2N2ZCc6IHJhbmRvbS51bmlmb3JtKC0xZTYsMWU2KSwgJ3onOiByYW5kb20udW5pZm9ybSgtMSwzKSwgJ2ltYic6IHJhbmRvbS51bmlmb3JtKC01LDUpLCAnZnVuZCc6IHJhbmRvbS51bmlmb3JtKC0wLjA1LDAuMDUpfSkKICAgICAgICB0aWNrZXIgPSB7J2xhc3QnOiByYW5kb20udW5pZm9ybSg1MDAwMCw3MDAwMCksICdxdW90ZVZvbHVtZSc6IHJhbmRvbS51bmlmb3JtKDFlOSw1ZTkpLCAncGVyY2VudGFnZSc6IHJhbmRvbS51bmlmb3JtKC0xLDEpfSAgIyBTeW50aAogICAgICAgIHByaW50KGYiREVWIEVhcmx5IE1vY2sgZnVsbCBmb3Ige3Jhd19zeW1ib2x9L3t0Zn06IE9JPSR7bW9ja1snb2knXTosLjBmfSwgTFM9e21vY2tbJ2xzJ106LjRmfSwgQ1ZEPXttb2NrWydjdmQnXTosLjBmfSwgWj17bW9ja1sneiddOi4yZn0iKQogICAgICAgICMgQnVpbGQgcmVzdWx0IHN5bnRoIChhbGlnbiBrZXlzOyB0ZiB2YXJpYW50cykKICAgICAgICBsc192YXJpYW50cyA9IHtmJ0dsb2JhbF9MU197dGZpfSc6IG1vY2tbJ2xzJ10gKyByYW5kb20udW5pZm9ybSgtMC41LDAuNSkgZm9yIHRmaSBpbiBbJzVtJywnMTVtJywnMzBtJywnMWgnXX0KICAgICAgICByZXN1bHQgPSB7CiAgICAgICAgICAgICdzeW1ib2wnOiByYXdfc3ltYm9sLnJlcGxhY2UoJ1VTRFQnLCAnJyksCiAgICAgICAgICAgICdQcmljZSc6IGYiJHt0aWNrZXJbJ2xhc3QnXTosLjJmfSIsCiAgICAgICAgICAgICdQcmljZV9DaGFuZ2VfMjRoX1BjdCc6IGYie3RpY2tlclsncGVyY2VudGFnZSddOi4yZn0lIiwKICAgICAgICAgICAgJ1ZvbHVtZV8yNGgnOiBmIiR7dGlja2VyWydxdW90ZVZvbHVtZSddOiwuMGZ9IiwKICAgICAgICAgICAgJ1ZvbHVtZV9DaGFuZ2VfMjRoX1BjdCc6IGYie3JhbmRvbS51bmlmb3JtKC01LDUpOi4yZn0lIiwgICMgU3ludGgKICAgICAgICAgICAgJ01hcmtldF9DYXAnOiBmIiR7cmFuZG9tLnVuaWZvcm0oMWUxMSwyZTEyKTosLjBmfSIsICAjIFN5bnRoCiAgICAgICAgICAgICdPSV9VU0QnOiBmIiR7bW9ja1snb2knXTosLjBmfSIsCiAgICAgICAgICAgICdvaV9hYnNfdXNkJzogbW9ja1snb2knXSwKICAgICAgICAgICAgJ09JX0NoYW5nZV8yNGhfUGN0JzogZiJ7cmFuZG9tLnVuaWZvcm0oLTEsMSk6LjJmfSUiLAogICAgICAgICAgICAqKntmJ09JX0NoYW5nZV97dGZpfV9QY3QnOiBmIntyYW5kb20udW5pZm9ybSgtMC41LDAuNSk6LjJmfSUiIGZvciB0ZmkgaW4gWyc1bScsJzE1bScsJzMwbScsJzFoJ119LAogICAgICAgICAgICAqKntmJ1ByaWNlX0NoYW5nZV97dGZpfV9QY3QnOiBmIntyYW5kb20udW5pZm9ybSgtMC4yLDAuMik6LjJmfSUiIGZvciB0ZmkgaW4gWyc1bScsJzE1bScsJzMwbScsJzFoJ119LAogICAgICAgICAgICBmJ0dsb2JhbF9MU197dGZ9JzogbW9ja1snbHMnXSwKICAgICAgICAgICAgKipsc192YXJpYW50cywgICMgQWxsIHRmcwogICAgICAgICAgICAnTG9uZ19BY2NvdW50X1BjdCc6IHJhbmRvbS51bmlmb3JtKDUwLDYwKSwgICMgU3ludGgKICAgICAgICAgICAgJ1Nob3J0X0FjY291bnRfUGN0JzogcmFuZG9tLnVuaWZvcm0oNDAsNTApLAogICAgICAgICAgICAnVG9wX0xTJzogcmFuZG9tLnVuaWZvcm0oMS41LDIuNSksCiAgICAgICAgICAgICd0b3BfbHNfYWNjb3VudHMnOiByYW5kb20udW5pZm9ybSgxLjUsMi41KSwKICAgICAgICAgICAgJ1RvcF9MU19Qb3NpdGlvbnMnOiByYW5kb20udW5pZm9ybSgwLjgsMS4yKSwKICAgICAgICAgICAgJ2N2ZCc6IG1vY2tbJ2N2ZCddLAogICAgICAgICAgICAnel9scyc6IG1vY2tbJ3onXSwgICMgRnJvbSBlbnJpY2ggcG9zdC1zYXZlCiAgICAgICAgICAgICdpbWJhbGFuY2UnOiBtb2NrWydpbWInXSwgICMgRml4OiBTeW50aCByZWFsLWlzaAogICAgICAgICAgICAnZnVuZGluZyc6IG1vY2tbJ2Z1bmQnXSwgICMgRml4OiBTeW50aCByZWFsLWlzaAogICAgICAgICAgICAncnNpJzogcmFuZG9tLnVuaWZvcm0oMzAsIDcwKSwgICMgTmV3OiBERVYgcmFuZCAzMC03MAogICAgICAgICAgICAndGltZXN0YW1wJzogZGF0ZXRpbWUubm93KCkudGltZXN0YW1wKCksCiAgICAgICAgICAgICd0aW1lZnJhbWUnOiB0ZiwgICMgTmV3OiBCaW5kIGZvciBXUyBmaWx0ZXIvREIgcXVlcnkgKGV2ZW4gaWYgREIgaGFzIGNvbCkKICAgICAgICAgICAgJ3ZvbF91c2QnOiByYW5kb20udW5pZm9ybSgxZTksNWU5KSAgIyBTeW50aCB2b2wgZm9yIHdlaWdodGVkIChQMykKICAgICAgICB9CiAgICAgICAgIyBBbGVydCBzdHViCiAgICAgICAgaWYgcmVzdWx0W2YnR2xvYmFsX0xTX3t0Zn0nXSA+IDIuMDoKICAgICAgICAgICAgcHJpbnQoZiJBTEVSVDoge3Jhd19zeW1ib2x9IExTIHt0Zn0gPjIuMDoge3Jlc3VsdFtmJ0dsb2JhbF9MU197dGZ9J119IikKICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAKICAgIHRyeToKICAgICAgICBhd2FpdCBhc3luY2lvLnNsZWVwKDAuMSkgICMgVGhyb3R0bGUKICAgICAgICAKICAgICAgICAjIENDWFQgQmFzaWNzOiBPSSwgVGlja2VyLCBWb2x1bWUgKGFzeW5jKQogICAgICAgIG9pX2RhdGEgPSBhd2FpdCBleGNoYW5nZS5mZXRjaF9vcGVuX2ludGVyZXN0KGNjeHRfc3ltYm9sKQogICAgICAgIHRpY2tlciA9IGF3YWl0IGV4Y2hhbmdlLmZldGNoX3RpY2tlcihjY3h0X3N5bWJvbCkKICAgICAgICBvaV91c2QgPSBvaV9kYXRhLmdldCgnb3BlbkludGVyZXN0QW1vdW50JywgMCkgKiB0aWNrZXIuZ2V0KCdsYXN0JywgMCkKICAgICAgICB2b2x1bWVfMjRoID0gdGlja2VyLmdldCgncXVvdGVWb2x1bWUnLCAwKQogICAgICAgIHByaW50KGYiUmF3IE9JIERhdGEgZm9yIHtyYXdfc3ltYm9sfToge29pX2RhdGEuZ2V0KCdvcGVuSW50ZXJlc3RBbW91bnQnLCAnTi9BJyl9IGNvbnRyYWN0cyIpCiAgICAgICAgCiAgICAgICAgIyBWb2wgcHJveHkgbWNhcCAocXVvdGVWb2x1bWUgKiBmYWN0b3IgfiBtY2FwIGVzdDsgQlRDICQ1MEIgLyAkMi4xNVQgPSB+NDN4IDsgYXZnIDQwIE9LIHRvcC01KQogICAgICAgIG1hcmtldF9jYXAgPSB2b2x1bWVfMjRoICogNDAgICMgVHVuZSAzMC01MCA7IEVUSCAkMjBCIC8gJDQ3M0IgPSB+MjR4IOKAkyB0ZXN0IHJlYWwKICAgICAgICBwcmludChmIk1jYXAgcHJveHkgZm9yIHtyYXdfc3ltYm9sfTogJHttYXJrZXRfY2FwOiwuMGZ9ICh2b2wgKiA0MHggZXN0KSIpCiAgICAgICAgIyBGYWxsYmFjayBpZiB2b2w9MCAocmFyZSB0b3Atdm9sKSDigJMgbW9ja3MgZGljdCB0b3AtNSBvbmx5CiAgICAgICAgaWYgbWFya2V0X2NhcCA9PSAwOgogICAgICAgICAgICBtb2NrcyA9IHsnQlRDVVNEVCc6IDIxNDY5NTY1MzkxMjEsICdFVEhVU0RUJzogNDczMzQxODc4MTE1LCAnU09MVVNEVCc6IDEwMzMzNDE5MTEzMiwgJ0JOQlVTRFQnOiA4NTAwMDAwMDAwMCwgJ0RPR0VVU0RUJzogMjMwMDAwMDAwMDB9ICAjIFJlYWwtaXNoIE9jdCAxOSwgMjAyNSAoYWRkIGZvciBzeW1zKQogICAgICAgICAgICBtYXJrZXRfY2FwID0gbW9ja3MuZ2V0KHJhd19zeW1ib2wsIDFlMTIpICAjIERlZmF1bHQgMVQgbm8gcmFuZG9tCiAgICAgICAgICAgIHByaW50KGYiUG9zdC1lcnIgTW9jayBNYXJrZXQgQ2FwIGZvciB7cmF3X3N5bWJvbH06ICR7bWFya2V0X2NhcDosLjBmfSIpCiAgICAgICAgCiAgICAgICAgIyBML1MgdGYtc3BlY2lmaWMgKHNlbmRfcHVibGljX3JlcXVlc3QpCiAgICAgICAgZ2xvYmFsX2xzX3RmID0gJ04vQScKICAgICAgICB0b3BfbHNfdGYgPSAnTi9BJwogICAgICAgIGxvbmdfYWNjb3VudF9wY3QgPSAnTi9BJwogICAgICAgIHNob3J0X2FjY291bnRfcGN0ID0gJ04vQScKICAgICAgICB0b3BfbHNfcG9zaXRpb25zID0gJ04vQScKICAgICAgICB0cnk6CiAgICAgICAgICAgIF8sIGxzX2dsb2JhbF9yZXNwID0gc2VuZF9wdWJsaWNfcmVxdWVzdCgiL2Z1dHVyZXMvZGF0YS9nbG9iYWxMb25nU2hvcnRBY2NvdW50UmF0aW8iLCB7InN5bWJvbCI6IHJhd19zeW1ib2wsICJwZXJpb2QiOiB0Zn0pCiAgICAgICAgICAgIGlmIGxzX2dsb2JhbF9yZXNwIGFuZCBsZW4obHNfZ2xvYmFsX3Jlc3ApID4gMDoKICAgICAgICAgICAgICAgIGdsb2JhbF9sc190ZiA9IGxzX2dsb2JhbF9yZXNwWzBdLmdldCgnbG9uZ1Nob3J0UmF0aW8nLCAnTi9BJykKICAgICAgICAgICAgICAgIGxvbmdfYWNjb3VudF9wY3QgPSBsc19nbG9iYWxfcmVzcFswXS5nZXQoJ2xvbmdBY2NvdW50JywgJ04vQScpCiAgICAgICAgICAgICAgICBzaG9ydF9hY2NvdW50X3BjdCA9IGxzX2dsb2JhbF9yZXNwWzBdLmdldCgnc2hvcnRBY2NvdW50JywgJ04vQScpCiAgICAgICAgICAgICAgICBwcmludChmIkdsb2JhbCBML1MgZm9yIHtyYXdfc3ltYm9sfSAoe3RmfSk6IHtnbG9iYWxfbHNfdGZ9IikKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGxzX2U6CiAgICAgICAgICAgIHByaW50KGYiTC9TIEdsb2JhbCB7dGZ9IGVycm9yIGZvciB7cmF3X3N5bWJvbH06IHtsc19lfSIpCiAgICAgICAgCiAgICAgICAgdHJ5OgogICAgICAgICAgICBfLCBsc190b3BfcmVzcCA9IHNlbmRfcHVibGljX3JlcXVlc3QoIi9mdXR1cmVzL2RhdGEvdG9wTG9uZ1Nob3J0QWNjb3VudFJhdGlvIiwgeyJzeW1ib2wiOiByYXdfc3ltYm9sLCAicGVyaW9kIjogdGYsICJsaW1pdCI6IDF9KQogICAgICAgICAgICBpZiBsc190b3BfcmVzcCBhbmQgbGVuKGxzX3RvcF9yZXNwKSA+IDA6CiAgICAgICAgICAgICAgICB0b3BfbHNfdGYgPSBsc190b3BfcmVzcFswXS5nZXQoJ2xvbmdTaG9ydFJhdGlvJywgJ04vQScpCiAgICAgICAgICAgICAgICB0b3BfbHNfcG9zaXRpb25zID0gbHNfdG9wX3Jlc3BbMF0uZ2V0KCdsb25nU2hvcnRQb3NpdGlvblJhdGlvJywgJ04vQScpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBsc19lOgogICAgICAgICAgICBwcmludChmIkwvUyBUb3Age3RmfSBlcnJvciBmb3Ige3Jhd19zeW1ib2x9OiB7bHNfZX0iKQogICAgICAgIAogICAgICAgICMgT0kgQ2hhbmdlICUgVGltZWZyYW1lcyAobXVsdGktdGYgbG9vcCkKICAgICAgICBvaV9jaGFuZ2VzID0ge30KICAgICAgICB0aW1lZnJhbWVzID0gWyc1bScsICcxNW0nLCAnMzBtJywgJzFoJ10KICAgICAgICBmb3IgdGZpIGluIHRpbWVmcmFtZXM6CiAgICAgICAgICAgIF8sIG9pX2hpc3RfcmVzcCA9IHNlbmRfcHVibGljX3JlcXVlc3QoIi9mdXR1cmVzL2RhdGEvb3BlbkludGVyZXN0SGlzdCIsIHsic3ltYm9sIjogcmF3X3N5bWJvbCwgInBlcmlvZCI6IHRmaSwgImxpbWl0IjogNTB9KQogICAgICAgICAgICBvaV9jaGFuZ2VfcGN0ID0gJ04vQScKICAgICAgICAgICAgaWYgb2lfaGlzdF9yZXNwIGFuZCBsZW4ob2lfaGlzdF9yZXNwKSA+PSAyOgogICAgICAgICAgICAgICAgY3VycmVudF9vaSA9IGZsb2F0KG9pX2hpc3RfcmVzcFswXS5nZXQoJ29wZW5JbnRlcmVzdCcsIDApKQogICAgICAgICAgICAgICAgcHJpb3Jfb2kgPSBmbG9hdChvaV9oaXN0X3Jlc3BbMV0uZ2V0KCdvcGVuSW50ZXJlc3QnLCAwKSkKICAgICAgICAgICAgICAgIGlmIHByaW9yX29pID4gMDoKICAgICAgICAgICAgICAgICAgICBvaV9jaGFuZ2VfcGN0ID0gZiJ7KChjdXJyZW50X29pIC0gcHJpb3Jfb2kpIC8gcHJpb3Jfb2kgKiAxMDApOi4yZn0lIgogICAgICAgICAgICBvaV9jaGFuZ2VzW2YnT0lfQ2hhbmdlX3t0Zml9X1BjdCddID0gb2lfY2hhbmdlX3BjdAogICAgICAgICAgICAKICAgICAgICAjIFByaWNlIENoYW5nZSBUaW1lZnJhbWVzCiAgICAgICAgcHJpY2VfY2hhbmdlcyA9IHt9CiAgICAgICAgZm9yIHRmaSBpbiB0aW1lZnJhbWVzOgogICAgICAgICAgICBfLCBwcmljZV9oaXN0X3Jlc3AgPSBzZW5kX3B1YmxpY19yZXF1ZXN0KCIvZmFwaS92MS9rbGluZXMiLCB7InN5bWJvbCI6IHJhd19zeW1ib2wsICJpbnRlcnZhbCI6IHRmaSwgImxpbWl0IjogMn0pCiAgICAgICAgICAgIHByaWNlX2NoYW5nZV9wY3QgPSAnTi9BJwogICAgICAgICAgICBpZiBwcmljZV9oaXN0X3Jlc3AgYW5kIGxlbihwcmljZV9oaXN0X3Jlc3ApID49IDI6CiAgICAgICAgICAgICAgICBjdXJyZW50X2Nsb3NlID0gZmxvYXQocHJpY2VfaGlzdF9yZXNwWzBdWzRdKQogICAgICAgICAgICAgICAgcHJpb3JfY2xvc2UgPSBmbG9hdChwcmljZV9oaXN0X3Jlc3BbMV1bNF0pCiAgICAgICAgICAgICAgICBpZiBwcmlvcl9jbG9zZSA+IDA6CiAgICAgICAgICAgICAgICAgICAgcHJpY2VfY2hhbmdlX3BjdCA9IGYieygoY3VycmVudF9jbG9zZSAtIHByaW9yX2Nsb3NlKSAvIHByaW9yX2Nsb3NlICogMTAwKTouMmZ9JSIKICAgICAgICAgICAgcHJpY2VfY2hhbmdlc1tmJ1ByaWNlX0NoYW5nZV97dGZpfV9QY3QnXSA9IHByaWNlX2NoYW5nZV9wY3QKICAgICAgICAKICAgICAgICAjIEdsb2JhbCBML1MgVGltZWZyYW1lcyAoYWxsIHRmcykKICAgICAgICBsc190aW1lZnJhbWVzID0ge30KICAgICAgICBmb3IgdGZpIGluIHRpbWVmcmFtZXM6CiAgICAgICAgICAgIF8sIGxzX2dsb2JhbF90Zl9yZXNwID0gc2VuZF9wdWJsaWNfcmVxdWVzdCgiL2Z1dHVyZXMvZGF0YS9nbG9iYWxMb25nU2hvcnRBY2NvdW50UmF0aW8iLCB7InN5bWJvbCI6IHJhd19zeW1ib2wsICJwZXJpb2QiOiB0Zml9KQogICAgICAgICAgICBnbG9iYWxfbHNfdGZfcmVzcCA9IGxzX2dsb2JhbF90Zl9yZXNwWzBdLmdldCgnbG9uZ1Nob3J0UmF0aW8nLCAnTi9BJykgaWYgbHNfZ2xvYmFsX3RmX3Jlc3AgYW5kIGxlbihsc19nbG9iYWxfdGZfcmVzcCkgPiAwIGVsc2UgJ04vQScKICAgICAgICAgICAgbHNfdGltZWZyYW1lc1tmJ0dsb2JhbF9MU197dGZpfSddID0gZ2xvYmFsX2xzX3RmX3Jlc3AKICAgICAgICAKICAgICAgICAjIFZvbHVtZSBDaGFuZ2UgMjRoICYgT0kgMjRoICUKICAgICAgICB2b2x1bWVfY2hhbmdlXzI0aCA9ICdOL0EnCiAgICAgICAgXywgdm9sdW1lX2hpc3RfcmVzcCA9IHNlbmRfcHVibGljX3JlcXVlc3QoIi9mYXBpL3YxL2tsaW5lcyIsIHsic3ltYm9sIjogcmF3X3N5bWJvbCwgImludGVydmFsIjogIjFkIiwgImxpbWl0IjogMn0pCiAgICAgICAgaWYgdm9sdW1lX2hpc3RfcmVzcCBhbmQgbGVuKHZvbHVtZV9oaXN0X3Jlc3ApID49IDI6CiAgICAgICAgICAgIGN1cnJlbnRfdm9sID0gZmxvYXQodm9sdW1lX2hpc3RfcmVzcFswXVs1XSkKICAgICAgICAgICAgcHJpb3Jfdm9sID0gZmxvYXQodm9sdW1lX2hpc3RfcmVzcFsxXVs1XSkKICAgICAgICAgICAgaWYgcHJpb3Jfdm9sID4gMDoKICAgICAgICAgICAgICAgIHZvbHVtZV9jaGFuZ2VfMjRoID0gZiJ7KChjdXJyZW50X3ZvbCAtIHByaW9yX3ZvbCkgLyBwcmlvcl92b2wgKiAxMDApOi4yZn0lIgogICAgICAgIAogICAgICAgIG9pX2NoYW5nZV8yNGggPSAnTi9BJwogICAgICAgIF8sIG9pXzI0aF9yZXNwID0gc2VuZF9wdWJsaWNfcmVxdWVzdCgiL2Z1dHVyZXMvZGF0YS9vcGVuSW50ZXJlc3RIaXN0IiwgeyJzeW1ib2wiOiByYXdfc3ltYm9sLCAicGVyaW9kIjogIjFkIiwgImxpbWl0IjogMn0pCiAgICAgICAgaWYgb2lfMjRoX3Jlc3AgYW5kIGxlbihvaV8yNGhfcmVzcCkgPj0gMjoKICAgICAgICAgICAgY3VycmVudF9vaTI0ID0gZmxvYXQob2lfMjRoX3Jlc3BbMF0uZ2V0KCdvcGVuSW50ZXJlc3QnLCAwKSkKICAgICAgICAgICAgcHJpb3Jfb2kyNCA9IGZsb2F0KG9pXzI0aF9yZXNwWzFdLmdldCgnb3BlbkludGVyZXN0JywgMCkpCiAgICAgICAgICAgIGlmIHByaW9yX29pMjQgPiAwOgogICAgICAgICAgICAgICAgb2lfY2hhbmdlXzI0aCA9IGYieygoY3VycmVudF9vaTI0IC0gcHJpb3Jfb2kyNCkgLyBwcmlvcl9vaTI0ICogMTAwKTouMmZ9JSIKICAgICAgICAKICAgICAgICAjIENWRDogU3VtIHZvbCBkaWZmIChncmVlbiBidXkgK3ZvbCwgcmVkIHNlbGwgLXZvbCkgbGFzdCAxMCB0ZiBjYW5kbGVzCiAgICAgICAgY3ZkID0gMC4wCiAgICAgICAgXywga2xpbmVzX3Jlc3AgPSBzZW5kX3B1YmxpY19yZXF1ZXN0KCIvZmFwaS92MS9rbGluZXMiLCB7InN5bWJvbCI6IHJhd19zeW1ib2wsICJpbnRlcnZhbCI6IHRmLCAibGltaXQiOiAxMH0pCiAgICAgICAgaWYga2xpbmVzX3Jlc3AgYW5kIGxlbihrbGluZXNfcmVzcCkgPj0gMjoKICAgICAgICAgICAgZm9yIGtsaW5lIGluIGtsaW5lc19yZXNwWy01Ol06ICAjIExhc3QgNQogICAgICAgICAgICAgICAgdm9sID0gZmxvYXQoa2xpbmVbNV0pICAjIFF1b3RlIHZvbAogICAgICAgICAgICAgICAgbywgYyA9IGZsb2F0KGtsaW5lWzFdKSwgZmxvYXQoa2xpbmVbNF0pCiAgICAgICAgICAgICAgICBzaWduID0gMSBpZiBjID4gbyBlbHNlIC0xICAjIEdyZWVuICsgLCByZWQgLQogICAgICAgICAgICAgICAgY3ZkICs9IHZvbCAqIHNpZ24KICAgICAgICBwcmludChmIkNWRCByZWFsIHtyYXdfc3ltYm9sfS97dGZ9OiB7Y3ZkOiwuMGZ9IikKICAgICAgICAKICAgICAgICAjIE5ldzogUlNJIGZyb20ga2xpbmVzIChleHRlbmQgbGltaXQ9NTAgZm9yIGhpc3QpCiAgICAgICAgXywgcnNpX2tsaW5lc19yZXNwID0gc2VuZF9wdWJsaWNfcmVxdWVzdCgiL2ZhcGkvdjEva2xpbmVzIiwgeyJzeW1ib2wiOiByYXdfc3ltYm9sLCAiaW50ZXJ2YWwiOiB0ZiwgImxpbWl0IjogNTB9KQogICAgICAgIHJzaSA9IDUwLjAKICAgICAgICBpZiByc2lfa2xpbmVzX3Jlc3AgYW5kIGxlbihyc2lfa2xpbmVzX3Jlc3ApID49IDE1OgogICAgICAgICAgICBjbG9zZXMgPSBbZmxvYXQoa1s0XSkgZm9yIGsgaW4gcnNpX2tsaW5lc19yZXNwWy0xNTpdXSAgIyBMYXN0IDE1IGZvciAxNC1wZXJpb2QKICAgICAgICAgICAgcnNpID0gY2FsY19yc2kobnAuYXJyYXkoY2xvc2VzKSkKICAgICAgICAgICAgaWYgbm90IG5wLmlzZmluaXRlKHJzaSk6CiAgICAgICAgICAgICAgICByc2kgPSA1MC4wCiAgICAgICAgcHJpbnQoZiJSU0kgY2FsYyB7cmF3X3N5bWJvbH0ve3RmfToge3JzaX0iKQogICAgICAgIAogICAgICAgICMgTmV3OiBJbWJhbGFuY2UgZnJvbSBkZXB0aCAoYmlkL2FzayB2b2wgJSBiaWFzKQogICAgICAgIF8sIGRlcHRoX3Jlc3AgPSBzZW5kX3B1YmxpY19yZXF1ZXN0KCIvZmFwaS92MS9kZXB0aCIsIHsic3ltYm9sIjogcmF3X3N5bWJvbCwgImxpbWl0IjogMTB9KQogICAgICAgIGltYmFsYW5jZSA9IDAuMAogICAgICAgIGlmIGRlcHRoX3Jlc3A6CiAgICAgICAgICAgIGJpZHMgPSBkZXB0aF9yZXNwLmdldCgnYmlkcycsIFtdKVs6NV0KICAgICAgICAgICAgYXNrcyA9IGRlcHRoX3Jlc3AuZ2V0KCdhc2tzJywgW10pWzo1XQogICAgICAgICAgICBiaWRfdm9sID0gc3VtKGZsb2F0KGJbMV0pIGZvciBiIGluIGJpZHMpCiAgICAgICAgICAgIGFza192b2wgPSBzdW0oZmxvYXQoYVsxXSkgZm9yIGEgaW4gYXNrcykKICAgICAgICAgICAgaWYgKGJpZF92b2wgKyBhc2tfdm9sKSA+IDA6CiAgICAgICAgICAgICAgICBpbWJhbGFuY2UgPSAoKGJpZF92b2wgLSBhc2tfdm9sKSAvIChiaWRfdm9sICsgYXNrX3ZvbCkpICogMTAwCiAgICAgICAgICAgICAgICBpZiBub3QgbnAuaXNmaW5pdGUoaW1iYWxhbmNlKToKICAgICAgICAgICAgICAgICAgICBpbWJhbGFuY2UgPSAwLjAKICAgICAgICAKICAgICAgICAjIE5ldzogRnVuZGluZyBmcm9tIHByZW1pdW1JbmRleAogICAgICAgIF8sIGZ1bmRpbmdfcmVzcCA9IHNlbmRfcHVibGljX3JlcXVlc3QoIi9mYXBpL3YxL3ByZW1pdW1JbmRleCIsIHsic3ltYm9sIjogcmF3X3N5bWJvbH0pCiAgICAgICAgZnVuZGluZ19yYXRlID0gMC4wCiAgICAgICAgaWYgZnVuZGluZ19yZXNwOgogICAgICAgICAgICBmdW5kaW5nX3JhdGUgPSBmbG9hdChmdW5kaW5nX3Jlc3AuZ2V0KCdsYXN0RnVuZGluZ1JhdGUnLCAwKSkgKiAxMDAKICAgICAgICAgICAgaWYgbm90IG5wLmlzZmluaXRlKGZ1bmRpbmdfcmF0ZSk6CiAgICAgICAgICAgICAgICBmdW5kaW5nX3JhdGUgPSAwLjAKICAgICAgICAKICAgICAgICByZXN1bHQgPSB7CiAgICAgICAgICAgICdzeW1ib2wnOiByYXdfc3ltYm9sLnJlcGxhY2UoJ1VTRFQnLCAnJyksCiAgICAgICAgICAgICdQcmljZSc6IGYiJHt0aWNrZXIuZ2V0KCdsYXN0JywgMCk6LC4yZn0iLAogICAgICAgICAgICAnUHJpY2VfQ2hhbmdlXzI0aF9QY3QnOiBmInt0aWNrZXIuZ2V0KCdwZXJjZW50YWdlJywgMCk6LjJmfSUiLAogICAgICAgICAgICAnVm9sdW1lXzI0aCc6IGYiJHt2b2x1bWVfMjRoOiwuMGZ9IiwKICAgICAgICAgICAgJ1ZvbHVtZV9DaGFuZ2VfMjRoX1BjdCc6IHZvbHVtZV9jaGFuZ2VfMjRoLAogICAgICAgICAgICAnTWFya2V0X0NhcCc6IGYiJHttYXJrZXRfY2FwOiwuMGZ9IiwKICAgICAgICAgICAgJ09JX1VTRCc6IGYiJHtvaV91c2Q6LC4wZn0iLAogICAgICAgICAgICAnb2lfYWJzX3VzZCc6IG9pX3VzZCwgICMgRXhwbGljaXQgZm9yIERCIChQaGFzZSAxIG5vcm1hbGl6ZSkKICAgICAgICAgICAgJ09JX0NoYW5nZV8yNGhfUGN0Jzogb2lfY2hhbmdlXzI0aCwKICAgICAgICAgICAgKipvaV9jaGFuZ2VzLAogICAgICAgICAgICAqKnByaWNlX2NoYW5nZXMsCiAgICAgICAgICAgIGYnR2xvYmFsX0xTX3t0Zn0nOiBnbG9iYWxfbHNfdGYsICAjIHRmLXNwZWNpZmljCiAgICAgICAgICAgICoqbHNfdGltZWZyYW1lcywgICMgQWxsIHRmcwogICAgICAgICAgICAnTG9uZ19BY2NvdW50X1BjdCc6IGxvbmdfYWNjb3VudF9wY3QsCiAgICAgICAgICAgICdTaG9ydF9BY2NvdW50X1BjdCc6IHNob3J0X2FjY291bnRfcGN0LAogICAgICAgICAgICAnVG9wX0xTJzogdG9wX2xzX3RmLAogICAgICAgICAgICAndG9wX2xzX2FjY291bnRzJzogdG9wX2xzX3RmLCAgIyBFeHBsaWNpdCBmb3IgREIKICAgICAgICAgICAgJ1RvcF9MU19Qb3NpdGlvbnMnOiB0b3BfbHNfcG9zaXRpb25zLAogICAgICAgICAgICAnY3ZkJzogY3ZkLAogICAgICAgICAgICAnel9scyc6IDAuMCwgICMgRnJvbSBlbnJpY2ggcG9zdC1zYXZlCiAgICAgICAgICAgICdpbWJhbGFuY2UnOiBpbWJhbGFuY2UsICAjIE5ldzogUmVhbCAlCiAgICAgICAgICAgICdmdW5kaW5nJzogZnVuZGluZ19yYXRlLCAgIyBOZXc6IFJlYWwgJQogICAgICAgICAgICAncnNpJzogcnNpLCAgIyBOZXc6IENhbGMKICAgICAgICAgICAgJ3RpbWVzdGFtcCc6IGRhdGV0aW1lLm5vdygpLnRpbWVzdGFtcCgpLAogICAgICAgICAgICAndm9sX3VzZCc6IHZvbHVtZV8yNGggICMgTmV3OiBQcm94eSB2b2wgZnJvbSBxdW90ZVZvbHVtZSBmb3Igd2VpZ2h0ZWQgUDMKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgIyBBbGVydCBzdHViIChQaGFzZSAzIHRvYXN0L2JlZXAgaWYgPjIpCiAgICAgICAgaWYgaXNpbnN0YW5jZShyZXN1bHRbZidHbG9iYWxfTFNfe3RmfSddLCAoaW50LCBmbG9hdCkpIGFuZCByZXN1bHRbZidHbG9iYWxfTFNfe3RmfSddID4gMi4wOgogICAgICAgICAgICBwcmludChmIkFMRVJUOiB7cmF3X3N5bWJvbH0gR2xvYmFsIEwvUyB7dGZ9ID4gMi4wOiB7cmVzdWx0W2YnR2xvYmFsX0xTX3t0Zn0nXX0iKQogICAgICAgIAogICAgICAgIHJldHVybiByZXN1bHQKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIk92ZXJhbGwgZXJyb3IgZmV0Y2hpbmcge3Jhd19zeW1ib2x9OiB7ZX0iKQogICAgICAgIHJldHVybiB7J3N5bWJvbCc6IHJhd19zeW1ib2wucmVwbGFjZSgnVVNEVCcsICcnKSwgJ2Vycm9yJzogc3RyKGUpfQ==",
        "summary": "388L: import ccxt.async_support as ccxt_async\nimport asyncio\nimport aiohttp\nfrom flask import Blueprint, r..."
      },
      {
        "path": "backend\\src\\futuresboard\\scraper.py",
        "type": ".py",
        "content": "ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IGhhc2hsaWIKaW1wb3J0IGhtYWMKaW1wb3J0IHNxbGl0ZTMKaW1wb3J0IHRocmVhZGluZwppbXBvcnQgdGltZQpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBPcmRlcmVkRGljdApmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZSwgdGltZWRlbHRhCmZyb20gc3FsaXRlMyBpbXBvcnQgRXJyb3IKZnJvbSB1cmxsaWIucGFyc2UgaW1wb3J0IHVybGVuY29kZQppbXBvcnQgcGF0aGxpYgppbXBvcnQgb3MgICMgQWRkZWQgZm9yIG9zLnBhdGguZGlybmFtZSAoUHlsYW5jZSBmaXgpCmltcG9ydCByZXF1ZXN0cyAgIyB0eXBlOiBpZ25vcmUKZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIGN1cnJlbnRfYXBwCmltcG9ydCBqc29uCmltcG9ydCBhc3luY2lvCmZyb20gcXVldWUgaW1wb3J0IFF1ZXVlLCBFbXB0eSAgIyBGb3IgV1MgZGVjb3VwbGluZyB3aXRoIHRpbWVvdXQgc3VwcG9ydApmcm9tIGZsYXNrX3NvY2tldGlvIGltcG9ydCBTb2NrZXRJTyAgIyBGb3IgV1MgZW1pdCAoaW1wb3J0IGZyb20gYXBwLnB5IGlmIHJlZ2lzdGVyZWQpCgoKZnJvbSAuY29uZmlnIGltcG9ydCBDb25maWcgICMgU3RhbmRhbG9uZSBsb2FkCgpxID0gUXVldWUoKSAgIyBHbG9iYWwgcXVldWUgZm9yIG1ldHJpY3MgZW1pdCAodGhyZWFkLXNhZmUgd2l0aCB0aW1lb3V0KQoKZW1pdF90aHJlYWQgPSBOb25lICAjIEdsb2JhbCB0aHJlYWQgaGFuZGxlCgpkZWYgZW1pdF93b3JrZXIoKToKICAgICIiIkRhZW1vbiB0aHJlYWQ6IFBvbGwgcXVldWUgYW5kIGVtaXQgdG8gV1MgY2xpZW50cy4iIiIKICAgIGZyb20gLmFwcCBpbXBvcnQgc29ja2V0aW8gICMgTGF6eSBpbXBvcnQKICAgIGZyb20gLmRiIGltcG9ydCBsb2dnZXIgICMgQWRkIGZvciBsb2cKICAgIHByaW50KCJFbWl0IHdvcmtlciBzdGFydGVkIiwgZmx1c2g9VHJ1ZSkKICAgIHdoaWxlIFRydWU6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZiBzb2NrZXRpbyBpcyBOb25lOgogICAgICAgICAgICAgICAgcHJpbnQoIldBUk5JTkc6IHNvY2tldGlvIE5vbmUgaW4gZW1pdF93b3JrZXIg4oCTIHJldHJ5aW5nIGluIDFzIiwgZmx1c2g9VHJ1ZSkKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIG1ldHJpY3MgPSBxLmdldCh0aW1lb3V0PTMwKSAgIyBCbG9jayB1cCB0byAzMHMKICAgICAgICAgICAgaWYgbWV0cmljczoKICAgICAgICAgICAgICAgIHNvY2tldGlvLmVtaXQoJ21ldHJpY3NfdXBkYXRlJywgeydkYXRhJzogbWV0cmljc30pICAjIEVtaXQgeydkYXRhJzogWzMgcGFpcnMgZGljdHNdfQogICAgICAgICAgICAgICAgcHJpbnQoZiJFbWl0dGVkIG1ldHJpY3NfdXBkYXRlIGZvciB7bGVuKG1ldHJpY3MpfSBwYWlycyIsIGZsdXNoPVRydWUpCiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhmIkVtaXR0ZWQge2xlbihtZXRyaWNzKX0gYmF0Y2ggdmlhIFdTIikgICMgQWRkIGZvciB0YWlsIFNlbGVjdC1TdHJpbmcKICAgICAgICAgICAgcS50YXNrX2RvbmUoKQogICAgICAgIGV4Y2VwdCBFbXB0eToKICAgICAgICAgICAgcGFzcyAgIyBObyBkYXRhLCBjb250aW51ZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcHJpbnQoZiJFbWl0IGVycm9yOiB7ZX0iLCBmbHVzaD1UcnVlKQogICAgICAgICAgICBsb2dnZXIuZXJyb3IoZiJFbWl0IGVycm9yOiB7ZX0iKSAgIyBMb2cgZXJyIHRvbwogICAgICAgICAgICB0aW1lLnNsZWVwKDEpICAjIEJhY2tvZmYKCmNsYXNzIEhUVFBSZXF1ZXN0RXJyb3IoRXhjZXB0aW9uKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB1cmwsIGNvZGUsIG1zZz1Ob25lKToKICAgICAgICBzZWxmLnVybCA9IHVybAogICAgICAgIHNlbGYuY29kZSA9IGNvZGUKICAgICAgICBzZWxmLm1zZyA9IG1zZwoKICAgIGRlZiBfX3N0cl9fKHNlbGYpIC0+IHN0cjoKICAgICAgICAiIiIKICAgICAgICBDb252ZXJ0IHRoZSBleGNlcHRpb24gaW50byBhIHByaW50YWJsZSBzdHJpbmcKICAgICAgICAiIiIKICAgICAgICByZXR1cm4gZiJSZXF1ZXN0IHRvIHtzZWxmLnVybCFyfSBmYWlsZWQuIENvZGU6IHtzZWxmLmNvZGV9OyBNZXNzYWdlOiB7c2VsZi5tc2d9IiAgICAKCgpkZWYgYXV0b19zY3JhcGUoYXBwKToKICAgIHRocmVhZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PV9hdXRvX3NjcmFwZSwgYXJncz0oYXBwLCkpCiAgICB0aHJlYWQuZGFlbW9uID0gVHJ1ZQogICAgdGhyZWFkLnN0YXJ0KCkKCgpkZWYgX2F1dG9fc2NyYXBlKGFwcCk6CiAgICBnbG9iYWwgZW1pdF90aHJlYWQKICAgIGlmIGVtaXRfdGhyZWFkIGlzIE5vbmU6CiAgICAgICAgZW1pdF90aHJlYWQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1lbWl0X3dvcmtlciwgZGFlbW9uPVRydWUpCiAgICAgICAgZW1pdF90aHJlYWQuc3RhcnQoKQogICAgICAgIGFwcC5sb2dnZXIuaW5mbygiRW1pdCB0aHJlYWQgc3RhcnRlZCIpCiAgICAKICAgIGludGVydmFsID0gYXBwLmNvbmZpZ1siQVVUT19TQ1JBUEVfSU5URVJWQUwiXQogICAgdGZzID0gWyc1bScsICcxNW0nLCAnMzBtJywgJzFoJ10gICMgUDIgY3ljbGUKICAgIHRmX2lkeCA9IDAKICAgIHdoaWxlIFRydWU6CiAgICAgICAgYXBwLmxvZ2dlci5pbmZvKCJBdXRvIHNjcmFwZSByb3V0aW5lcyBzdGFydGluZyIpCiAgICAgICAgdGYgPSB0ZnNbdGZfaWR4ICUgbGVuKHRmcyldICAjIFJvdGF0ZSB0ZgogICAgICAgIGFwcC5sb2dnZXIuaW5mbygiQXV0byBzY3JhcGUgcm91dGluZXMgc3RhcnRpbmcgdGY9IiArIHRmKSAgIyBUZXN0IGxvZyAodGYgcm90YXRlKQogICAgICAgICMgLi4uIGV4aXN0aW5nIHNjcmFwZShhcHA9YXBwKSAuLi4KICAgICAgICAjIExhenkgbWV0cmljcyBob29rOiBQYXNzIHRmIHRvIGdldF9hbGxfbWV0cmljcy9zYXZlX21ldHJpY3MKICAgICAgICBmcm9tIC5tZXRyaWNzIGltcG9ydCBnZXRfYWxsX21ldHJpY3MKICAgICAgICBmcm9tIC5kYiBpbXBvcnQgc2F2ZV9tZXRyaWNzCiAgICAgICAgbG9vcCA9IGFzeW5jaW8ubmV3X2V2ZW50X2xvb3AoKQogICAgICAgIGFzeW5jaW8uc2V0X2V2ZW50X2xvb3AobG9vcCkKICAgICAgICBtZXRyaWNzID0gbG9vcC5ydW5fdW50aWxfY29tcGxldGUoZ2V0X2FsbF9tZXRyaWNzKHRmPXRmKSkgICMgQWRkIHRmCiAgICAgICAgc2F2ZWRfY291bnQgPSBzYXZlX21ldHJpY3MobWV0cmljcywgdGYpICAjIHRmCiAgICAgICAgYXBwLmxvZ2dlci5pbmZvKGYiU2F2ZWQge3NhdmVkX2NvdW50fSBtZXRyaWNzIHRmPXt0Zn0iKSAgIyBUZXN0IHNhdmVkCiAgICAgICAgcS5wdXQobWV0cmljcykgICMgRW1pdCB0Zi1zcGVjaWZpYwogICAgICAgIGFwcC5sb2dnZXIuaW5mbyhmIlF1ZXVlZCB7bGVuKG1ldHJpY3MpfSBmb3IgV1MgZW1pdCB0Zj17dGZ9IikgICMgVGVzdCBxdWV1ZQogICAgICAgIGxvb3AuY2xvc2UoKQogICAgICAgIHRmX2lkeCArPSAxCiAgICAgICAgdGltZS5zbGVlcChpbnRlcnZhbCkKCgpkZWYgaGFzaGluZyhxdWVyeV9zdHJpbmcsIGV4Y2hhbmdlPSJiaW5hbmNlIiwgdGltZXN0YW1wPU5vbmUpOgogICAgY2ZnX3BhdGggPSBwYXRobGliLlBhdGgob3MucGF0aC5kaXJuYW1lKF9fZmlsZV9fKSkucGFyZW50LnBhcmVudAogICAgY2ZnID0gQ29uZmlnLmZyb21fY29uZmlnX2RpcihjZmdfcGF0aCkKICAgIGlmIGV4Y2hhbmdlID09ICJieWJpdCI6CiAgICAgICAgcXVlcnlfc3RyaW5nID0gZiJ7dGltZXN0YW1wfXtjZmcuQVBJX0tFWX01MDAwIiArIHF1ZXJ5X3N0cmluZwogICAgICAgIHJldHVybiBobWFjLm5ldygKICAgICAgICAgICAgYnl0ZXMoY2ZnLkFQSV9TRUNSRVQuZW5jb2RlKCJ1dGYtOCIpKSwKICAgICAgICAgICAgcXVlcnlfc3RyaW5nLmVuY29kZSgidXRmLTgiKSwKICAgICAgICAgICAgaGFzaGxpYi5zaGEyNTYsCiAgICAgICAgKS5oZXhkaWdlc3QoKQogICAgcmV0dXJuIGhtYWMubmV3KAogICAgICAgIGJ5dGVzKGNmZy5BUElfU0VDUkVULmVuY29kZSgidXRmLTgiKSksCiAgICAgICAgcXVlcnlfc3RyaW5nLmVuY29kZSgidXRmLTgiKSwKICAgICAgICBoYXNobGliLnNoYTI1NiwKICAgICkuaGV4ZGlnZXN0KCkKCgpkZWYgZ2V0X3RpbWVzdGFtcCgpOgogICAgcmV0dXJuIGludCh0aW1lLnRpbWUoKSAqIDEwMDApCgoKZGVmIGRpc3BhdGNoX3JlcXVlc3QoaHR0cF9tZXRob2QsIHNpZ25hdHVyZT1Ob25lLCB0aW1lc3RhbXA9Tm9uZSwgYXBwPU5vbmUpOiAgIyBBZGQgYXBwPU5vbmUgZm9yIHN0YW5kYWxvbmUKICAgIHNlc3Npb24gPSByZXF1ZXN0cy5TZXNzaW9uKCkKICAgICMgU3RhbmRhbG9uZSBjb25maWcgKG5vIGN1cnJlbnRfYXBwKQogICAgY2ZnX3BhdGggPSBwYXRobGliLlBhdGgob3MucGF0aC5kaXJuYW1lKF9fZmlsZV9fKSkucGFyZW50LnBhcmVudAogICAgY2ZnID0gQ29uZmlnLmZyb21fY29uZmlnX2RpcihjZmdfcGF0aCkKICAgIGFwaV9rZXkgPSBjZmcuQVBJX0tFWQogICAgCiAgICBzZXNzaW9uLmhlYWRlcnMudXBkYXRlKAogICAgICAgIHsKICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgiLAogICAgICAgICAgICAiWC1NQlgtQVBJS0VZIjogYXBpX2tleSwKICAgICAgICAgICAgIlgtQkFQSS1BUEktS0VZIjogYXBpX2tleSwKICAgICAgICAgICAgIlgtQkFQSS1TSUdOIjogZiJ7c2lnbmF0dXJlfSIsCiAgICAgICAgICAgICJYLUJBUEktU0lHTi1UWVBFIjogIjIiLAogICAgICAgICAgICAiWC1CQVBJLVRJTUVTVEFNUCI6IGYie3RpbWVzdGFtcH0iLAogICAgICAgICAgICAiWC1CQVBJLVJFQ1YtV0lORE9XIjogIjUwMDAiLAogICAgICAgIH0KICAgICkKCiAgICByZXR1cm4gewogICAgICAgICJHRVQiOiBzZXNzaW9uLmdldCwKICAgICAgICAiREVMRVRFIjogc2Vzc2lvbi5kZWxldGUsCiAgICAgICAgIlBVVCI6IHNlc3Npb24ucHV0LAogICAgICAgICJQT1NUIjogc2Vzc2lvbi5wb3N0LAogICAgfS5nZXQoaHR0cF9tZXRob2QsICJHRVQiKQoKCiMgdXNlZCBmb3Igc2VuZGluZyByZXF1ZXN0IHJlcXVpcmVzIHRoZSBzaWduYXR1cmUKZGVmIHNlbmRfc2lnbmVkX3JlcXVlc3QoaHR0cF9tZXRob2QsIHVybF9wYXRoLCBwYXlsb2FkPXt9LCBleGNoYW5nZT0iYmluYW5jZSIsIGFwcD1Ob25lKToKICAgIGNmZ19wYXRoID0gcGF0aGxpYi5QYXRoKG9zLnBhdGguZGlybmFtZShfX2ZpbGVfXykpLnBhcmVudC5wYXJlbnQKICAgIGNmZyA9IENvbmZpZy5mcm9tX2NvbmZpZ19kaXIoY2ZnX3BhdGgpCiAgICBpZiBleGNoYW5nZSA9PSAiYmluYW5jZSI6CiAgICAgICAgcGF5bG9hZFsidGltZXN0YW1wIl0gPSBnZXRfdGltZXN0YW1wKCkKICAgIHF1ZXJ5X3N0cmluZyA9IHVybGVuY29kZShPcmRlcmVkRGljdChzb3J0ZWQocGF5bG9hZC5pdGVtcygpKSkpCiAgICBxdWVyeV9zdHJpbmcgPSBxdWVyeV9zdHJpbmcucmVwbGFjZSgKICAgICAgICAiJTI3IiwgIiUyMiIKICAgICkgICMgcmVwbGFjZSBzaW5nbGUgcXVvdGUgdG8gZG91YmxlIHF1b3RlCgogICAgdXJsID0gZiJ7Y2ZnLkFQSV9CQVNFX1VSTH17dXJsX3BhdGh9P3txdWVyeV9zdHJpbmd9IgogICAgaWYgZXhjaGFuZ2UgPT0gImJpbmFuY2UiOgogICAgICAgIHVybCArPSBmIiZzaWduYXR1cmU9e2hhc2hpbmcocXVlcnlfc3RyaW5nLCBleGNoYW5nZSl9IgoKICAgIHBhcmFtcyA9IHsidXJsIjogdXJsLCAicGFyYW1zIjoge319CiAgICB0cnk6CiAgICAgICAgdGltZXN0YW1wID0gZ2V0X3RpbWVzdGFtcCgpCiAgICAgICAgcmVzcG9uc2UgPSBkaXNwYXRjaF9yZXF1ZXN0KAogICAgICAgICAgICBodHRwX21ldGhvZCwKICAgICAgICAgICAgaGFzaGluZyhxdWVyeV9zdHJpbmc9cXVlcnlfc3RyaW5nLCBleGNoYW5nZT1leGNoYW5nZSwgdGltZXN0YW1wPXRpbWVzdGFtcCksCiAgICAgICAgICAgIHRpbWVzdGFtcD10aW1lc3RhbXAsCiAgICAgICAgICAgIGFwcD1hcHAKICAgICAgICApKCoqcGFyYW1zKQogICAgICAgIGhlYWRlcnMgPSByZXNwb25zZS5oZWFkZXJzCiAgICAgICAgdHJ5OgogICAgICAgICAgICBqc29uX3Jlc3BvbnNlID0gcmVzcG9uc2UuanNvbigpCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuSlNPTkRlY29kZUVycm9yIGFzIGU6CiAgICAgICAgICAgIHJhaXNlIEhUVFBSZXF1ZXN0RXJyb3IodXJsPXVybCwgY29kZT0tMywgbXNnPWYie2V9IikKICAgICAgICBpZiAiY29kZSIgaW4ganNvbl9yZXNwb25zZToKICAgICAgICAgICAgcmFpc2UgSFRUUFJlcXVlc3RFcnJvcigKICAgICAgICAgICAgICAgIHVybD11cmwsIGNvZGU9anNvbl9yZXNwb25zZVsiY29kZSJdLCBtc2c9anNvbl9yZXNwb25zZVsibXNnIl0KICAgICAgICAgICAgKQogICAgICAgIGlmICJyZXRDb2RlIiBpbiBqc29uX3Jlc3BvbnNlOgogICAgICAgICAgICBpZiBqc29uX3Jlc3BvbnNlWyJyZXRDb2RlIl0gIT0gMDoKICAgICAgICAgICAgICAgIHJhaXNlIEhUVFBSZXF1ZXN0RXJyb3IoCiAgICAgICAgICAgICAgICAgICAgdXJsPXVybCwgY29kZT1qc29uX3Jlc3BvbnNlWyJyZXRDb2RlIl0sIG1zZz1qc29uX3Jlc3BvbnNlWyJyZXRNc2ciXQogICAgICAgICAgICAgICAgKQogICAgICAgIHJldHVybiBoZWFkZXJzLCBqc29uX3Jlc3BvbnNlCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3IgYXMgZToKICAgICAgICByYWlzZSBIVFRQUmVxdWVzdEVycm9yKHVybD11cmwsIGNvZGU9LTEsIG1zZz1mIntlfSIpCgoKIyB1c2VkIGZvciBzZW5kaW5nIHB1YmxpYyBkYXRhIHJlcXVlc3QKZGVmIHNlbmRfcHVibGljX3JlcXVlc3QodXJsX3BhdGgsIHBheWxvYWQ9e30sIGFwcD1Ob25lKTogICMgQWRkIGFwcD1Ob25lCiAgICBxdWVyeV9zdHJpbmcgPSB1cmxlbmNvZGUocGF5bG9hZCwgVHJ1ZSkKICAgICMgU3RhbmRhbG9uZSBjb25maWcgKG5vIGN1cnJlbnRfYXBwKQogICAgY2ZnX3BhdGggPSBwYXRobGliLlBhdGgob3MucGF0aC5kaXJuYW1lKF9fZmlsZV9fKSkucGFyZW50LnBhcmVudAogICAgY2ZnID0gQ29uZmlnLmZyb21fY29uZmlnX2RpcihjZmdfcGF0aCkKICAgIGFwaV9iYXNlX3VybCA9IGNmZy5BUElfQkFTRV9VUkwKICAgIHVybCA9IGFwaV9iYXNlX3VybCArIHVybF9wYXRoCiAgICBpZiBxdWVyeV9zdHJpbmc6CiAgICAgICAgdXJsID0gdXJsICsgIj8iICsgcXVlcnlfc3RyaW5nCiAgICB0cnk6CiAgICAgICAgcmVzcG9uc2UgPSBkaXNwYXRjaF9yZXF1ZXN0KCJHRVQiLCBhcHA9YXBwKSh1cmw9dXJsKSAgIyBQYXNzIGFwcAogICAgICAgIGhlYWRlcnMgPSByZXNwb25zZS5oZWFkZXJzCiAgICAgICAgdHJ5OgogICAgICAgICAgICBqc29uX3Jlc3BvbnNlID0gcmVzcG9uc2UuanNvbigpCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuSlNPTkRlY29kZUVycm9yIGFzIGU6CiAgICAgICAgICAgIHJhaXNlIEhUVFBSZXF1ZXN0RXJyb3IodXJsPXVybCwgY29kZT0tMywgbXNnPWYie2V9IikKICAgICAgICBpZiAiY29kZSIgaW4ganNvbl9yZXNwb25zZToKICAgICAgICAgICAgcmFpc2UgSFRUUFJlcXVlc3RFcnJvcigKICAgICAgICAgICAgICAgIHVybD11cmwsIGNvZGU9anNvbl9yZXNwb25zZVsiY29kZSJdLCBtc2c9anNvbl9yZXNwb25zZVsibXNnIl0KICAgICAgICAgICAgKQogICAgICAgIHJldHVybiBoZWFkZXJzLCBqc29uX3Jlc3BvbnNlCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3IgYXMgZToKICAgICAgICByYWlzZSBIVFRQUmVxdWVzdEVycm9yKHVybD11cmwsIGNvZGU9LTIsIG1zZz1mIntlfSIpCgoKZGVmIGNyZWF0ZV9jb25uZWN0aW9uKGRiX2ZpbGUpOgogICAgY29ubiA9IE5vbmUKICAgIHRyeToKICAgICAgICBjb25uID0gc3FsaXRlMy5jb25uZWN0KGRiX2ZpbGUpCiAgICBleGNlcHQgRXJyb3IgYXMgZToKICAgICAgICBwcmludChlKQoKICAgIHJldHVybiBjb25uCgoKZGVmIGNyZWF0ZV90YWJsZShjb25uLCBjcmVhdGVfdGFibGVfc3FsKToKICAgIHRyeToKICAgICAgICBjID0gY29ubi5jdXJzb3IoKQogICAgICAgIGMuZXhlY3V0ZShjcmVhdGVfdGFibGVfc3FsKQogICAgZXhjZXB0IEVycm9yIGFzIGU6CiAgICAgICAgcHJpbnQoZSkKCgpkZWYgZGJfc2V0dXAoZGF0YWJhc2UsIGFwcD1Ob25lKTogICMgRml4OiBBZGQgYXBwIHBhcmFtIGZvciBjb250ZXh0CiAgICBzcWxfY3JlYXRlX2luY29tZV90YWJsZSA9ICIiIiBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBpbmNvbWUgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSUlEIGludGVnZXIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5JZCB0ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sIHRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNvbWVUeXBlIHRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNvbWUgcmVhbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0IHRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvIHRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lIGludGVnZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFkZUlkIGludGVnZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVTklRVUUodHJhbklkLCBpbmNvbWVUeXBlKSBPTiBDT05GTElDVCBSRVBMQUNFCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7ICIiIgoKICAgIHNxbF9jcmVhdGVfcG9zaXRpb25fdGFibGUgPSAiIiIgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgcG9zaXRpb25zICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBJRCBpbnRlZ2VyIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2wgdGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVucmVhbGl6ZWRQcm9maXQgcmVhbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVyYWdlIGludGVnZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyeVByaWNlIHJlYWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblNpZGUgdGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uQW10IHJlYWwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsgIiIiCgogICAgc3FsX2NyZWF0ZV9hY2NvdW50X3RhYmxlID0gIiIiIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGFjY291bnQgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQUlEIGludGVnZXIgUFJJTUFSWSBLRVksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFdhbGxldEJhbGFuY2UgcmVhbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsVW5yZWFsaXplZFByb2ZpdCByZWFsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxNYXJnaW5CYWxhbmNlIHJlYWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGVCYWxhbmNlIHJlYWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhXaXRoZHJhd0Ftb3VudCByZWFsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7ICIiIgoKICAgIHNxbF9jcmVhdGVfb3JkZXJzX3RhYmxlID0gIiIiIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG9yZGVycyAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPSUQgaW50ZWdlciBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ1F0eSByZWFsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2UgcmVhbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZGUgdGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uU2lkZSB0ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzIHRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2wgdGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUgaW50ZWdlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgdGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOyAiIiIKICAgIAogICAgIyBjcmVhdGUgYSBkYXRhYmFzZSBjb25uZWN0aW9uIChyYXcgZm9yIG5vbi1GbGFzayBjYWxscykKICAgIGNvbm4gPSBjcmVhdGVfY29ubmVjdGlvbihkYXRhYmFzZSkKCiAgICAjIGNyZWF0ZSB0YWJsZXMKICAgIGlmIGNvbm4gaXMgbm90IE5vbmU6CiAgICAgICAgY3JlYXRlX3RhYmxlKGNvbm4sIHNxbF9jcmVhdGVfaW5jb21lX3RhYmxlKQogICAgICAgIGNyZWF0ZV90YWJsZShjb25uLCBzcWxfY3JlYXRlX3Bvc2l0aW9uX3RhYmxlKQogICAgICAgIGNyZWF0ZV90YWJsZShjb25uLCBzcWxfY3JlYXRlX2FjY291bnRfdGFibGUpCiAgICAgICAgY3JlYXRlX3RhYmxlKGNvbm4sIHNxbF9jcmVhdGVfb3JkZXJzX3RhYmxlKQogICAgICAgIGNvbm4uY2xvc2UoKQogICAgZWxzZToKICAgICAgICBwcmludCgiRXJyb3IhIGNhbm5vdCBjcmVhdGUgdGhlIGRhdGFiYXNlIGNvbm5lY3Rpb24uIikKICAgIAogICAgIyBNZXRyaWNzIHRhYmxlOiBMYXp5IGltcG9ydCArIHJhdyBjcmVhdGUgKGNvbnRleHQtd3JhcHBlZCBpZiBhcHApCiAgICB0cnk6CiAgICAgICAgZnJvbSAuZGIgaW1wb3J0IGNyZWF0ZV9tZXRyaWNzX3RhYmxlCiAgICAgICAgaWYgYXBwOiAgIyBGaXg6IFVzZSBwYXNzZWQgYXBwIGZvciBjb250ZXh0ICh0aHJlYWQtc2FmZSkKICAgICAgICAgICAgd2l0aCBhcHAuYXBwX2NvbnRleHQoKTogICMgUHVzaCBjb250ZXh0IGZvciBxdWVyeS9nZXRfZGIvY3VycmVudF9hcHAKICAgICAgICAgICAgICAgIGNyZWF0ZV9tZXRyaWNzX3RhYmxlKCkKICAgICAgICAgICAgcHJpbnQoIk1ldHJpY3MgdGFibGUgY3JlYXRlZC92ZXJpZmllZCBPSyIpICAjIERlYnVnIHN1Y2Nlc3MKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBJbXBvcnRFcnJvcigiTm8gYXBwIGZvciBjb250ZXh0IOKAkyBmYWxsYmFjayB0byByYXciKQogICAgZXhjZXB0IEltcG9ydEVycm9yOgogICAgICAgIHByaW50KCJNZXRyaWNzIERCIHN1cHBvcnQgbWlzc2luZ+KAlGluc3RhbGwvdXBkYXRlIGRiLnB5IikKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChmIk1ldHJpY3MgdGFibGUgc2V0dXAgZXJyb3I6IHtlfSIpCiAgICAgICAgIyBGYWxsYmFjazogUmF3IFNRTCBDUkVBVEUgaWYgU1FMQWxjaGVteSBmYWlscyAoYWxpZ25zIEZpbmFsUm9hZG1hcCBjb2xzKQogICAgICAgIGNvbm4gPSBjcmVhdGVfY29ubmVjdGlvbihkYXRhYmFzZSkKICAgICAgICBpZiBjb25uOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBjID0gY29ubi5jdXJzb3IoKQogICAgICAgICAgICAgICAgYy5leGVjdXRlKCIiIgogICAgICAgICAgICAgICAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG1ldHJpY3MgKAogICAgICAgICAgICAgICAgICAgICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLAogICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2wgVEVYVCBOT1QgTlVMTCwKICAgICAgICAgICAgICAgICAgICAgICAgb2lfYWJzX3VzZCBGTE9BVCwKICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsX2xzXzVtIEZMT0FULAogICAgICAgICAgICAgICAgICAgICAgICBvaV9kZWx0YV9wY3QgRkxPQVQsCiAgICAgICAgICAgICAgICAgICAgICAgIFVOSVFVRShzeW1ib2wsIHRpbWVzdGFtcCkgT04gQ09ORkxJQ1QgUkVQTEFDRQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAiIiIpCiAgICAgICAgICAgICAgICBjb25uLmNvbW1pdCgpCiAgICAgICAgICAgICAgICBwcmludCgiTWV0cmljcyB0YWJsZSBjcmVhdGVkIHZpYSByYXcgU1FMIGZhbGxiYWNrIikKICAgICAgICAgICAgZXhjZXB0IHNxbGl0ZTMuRXJyb3IgYXMgc2U6CiAgICAgICAgICAgICAgICBwcmludChmIlJhdyBTUUwgZXJyb3I6IHtzZX0iKQogICAgICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAgICAgY29ubi5jbG9zZSgpCgoKIyBpbmNvbWUgaW50ZXJhY3Rpb25zCmRlZiBjcmVhdGVfaW5jb21lKGNvbm4sIGluY29tZSk6CiAgICBzcWwgPSAiIiIgSU5TRVJUIElOVE8gaW5jb21lKHRyYW5JZCwgc3ltYm9sLCBpbmNvbWVUeXBlLCBpbmNvbWUsIGFzc2V0LCBpbmZvLCB0aW1lLCB0cmFkZUlkKQogICAgICAgICAgICAgIFZBTFVFUyg/LD8sPyw/LD8sPyw/LD8pICIiIgogICAgY3VyID0gY29ubi5jdXJzb3IoKQogICAgY3VyLmV4ZWN1dGUoc3FsLCBpbmNvbWUpCgoKZGVmIHNlbGVjdF9sYXRlc3RfaW5jb21lKGNvbm4pOgogICAgY3VyID0gY29ubi5jdXJzb3IoKQogICAgY3VyLmV4ZWN1dGUoIlNFTEVDVCB0aW1lIEZST00gaW5jb21lIE9SREVSIEJZIHRpbWUgREVTQyBMSU1JVCAwLCAxIikKICAgIHJldHVybiBjdXIuZmV0Y2hvbmUoKQoKCmRlZiBzZWxlY3RfbGF0ZXN0X2luY29tZV9zeW1ib2woY29ubiwgc3ltYm9sKToKICAgIGN1ciA9IGNvbm4uY3Vyc29yKCkKICAgIGN1ci5leGVjdXRlKAogICAgICAgICJTRUxFQ1QgdGltZSBGUk9NIGluY29tZSBXSEVSRSBzeW1ib2wgPSA/IE9SREVSIEJZIHRpbWUgREVTQyBMSU1JVCAwLCAxIiwKICAgICAgICAoc3ltYm9sLCksCiAgICApCiAgICByZXR1cm4gY3VyLmZldGNob25lKCkKCgojIHBvc2l0aW9uIGludGVyYWN0aW9ucwpkZWYgY3JlYXRlX3Bvc2l0aW9uKGNvbm4sIHBvc2l0aW9uKToKICAgIHNxbCA9ICIiIiBJTlNFUlQgSU5UTyBwb3NpdGlvbnModW5yZWFsaXplZFByb2ZpdCwgbGV2ZXJhZ2UsIGVudHJ5UHJpY2UsIHBvc2l0aW9uQW10LCBzeW1ib2wsIHBvc2l0aW9uU2lkZSkgVkFMVUVTKD8sPyw/LD8sPyw/KSAiIiIKICAgIGN1ciA9IGNvbm4uY3Vyc29yKCkKICAgIGN1ci5leGVjdXRlKHNxbCwgcG9zaXRpb24pCgoKZGVmIHVwZGF0ZV9wb3NpdGlvbihjb25uLCBwb3NpdGlvbik6CiAgICBzcWwgPSAiIiIgVVBEQVRFIHBvc2l0aW9ucyBTRVQgdW5yZWFsaXplZFByb2ZpdCA9ID8sIGxldmVyYWdlID0gPywgZW50cnlQcmljZSA9ID8sIHBvc2l0aW9uQW10ID0gPyBXSEVSRSBzeW1ib2wgPSA/IEFORCBwb3NpdGlvblNpZGUgPSA/ICIiIgogICAgY3VyID0gY29ubi5jdXJzb3IoKQogICAgY3VyLmV4ZWN1dGUoc3FsLCBwb3NpdGlvbikKCgpkZWYgZGVsZXRlX2FsbF9wb3NpdGlvbnMoY29ubik6CiAgICBzcWwgPSAiIiIgREVMRVRFIEZST00gcG9zaXRpb25zICIiIgogICAgY3VyID0gY29ubi5jdXJzb3IoKQogICAgY3VyLmV4ZWN1dGUoc3FsKQogICAgY29ubi5jb21taXQoKQoKCmRlZiBzZWxlY3RfcG9zaXRpb24oY29ubiwgc3ltYm9sKToKICAgIGN1ciA9IGNvbm4uY3Vyc29yKCkKICAgIGN1ci5leGVjdXRlKAogICAgICAgICJTRUxFQ1QgdW5yZWFsaXplZFByb2ZpdCBGUk9NIHBvc2l0aW9ucyBXSEVSRSBzeW1ib2wgPSA/IEFORCBwb3NpdGlvblNpZGUgPSA/IExJTUlUIDAsIDEiLAogICAgICAgICgKICAgICAgICAgICAgc3ltYm9sWzBdLAogICAgICAgICAgICBzeW1ib2xbMV0sCiAgICAgICAgKSwKICAgICkKICAgIHJldHVybiBjdXIuZmV0Y2hvbmUoKQoKCiMgYWNjb3VudCBpbnRlcmFjdGlvbnMKZGVmIGNyZWF0ZV9hY2NvdW50KGNvbm4sIGFjY291bnQpOgogICAgc3FsID0gIiIiIElOU0VSVCBJTlRPIGFjY291bnQodG90YWxXYWxsZXRCYWxhbmNlLCB0b3RhbFVucmVhbGl6ZWRQcm9maXQsIHRvdGFsTWFyZ2luQmFsYW5jZSwgYXZhaWxhYmxlQmFsYW5jZSwgbWF4V2l0aGRyYXdBbW91bnQsIEFJRCkgVkFMVUVTKD8sPyw/LD8sPyw/KSAiIiIKICAgIGN1ciA9IGNvbm4uY3Vyc29yKCkKICAgIGN1ci5leGVjdXRlKHNxbCwgYWNjb3VudCkKCgpkZWYgdXBkYXRlX2FjY291bnQoY29ubiwgYWNjb3VudCk6CiAgICBzcWwgPSAiIiIgVVBEQVRFIGFjY291bnQgU0VUIHRvdGFsV2FsbGV0QmFsYW5jZSA9ID8sIHRvdGFsVW5yZWFsaXplZFByb2ZpdCA9ID8sIHRvdGFsTWFyZ2luQmFsYW5jZSA9ID8sIGF2YWlsYWJsZUJhbGFuY2UgPSA/LCBtYXhXaXRoZHJhd0Ftb3VudCA9ID8gV0hFUkUgQUlEID0gPyIiIgogICAgY3VyID0gY29ubi5jdXJzb3IoKQogICAgY3VyLmV4ZWN1dGUoc3FsLCBhY2NvdW50KQoKCmRlZiBzZWxlY3RfYWNjb3VudChjb25uKToKICAgIGN1ciA9IGNvbm4uY3Vyc29yKCkKICAgIGN1ci5leGVjdXRlKCJTRUxFQ1QgdG90YWxXYWxsZXRCYWxhbmNlIEZST00gYWNjb3VudCBMSU1JVCAwLCAxIikKICAgIHJldHVybiBjdXIuZmV0Y2hvbmUoKQoKCiMgb3JkZXJzIGludGVyYWN0aW9ucwpkZWYgZGVsZXRlX2FsbF9vcmRlcnMoY29ubik6CiAgICBzcWwgPSAiIiIgREVMRVRFIEZST00gb3JkZXJzICIiIgogICAgY3VyID0gY29ubi5jdXJzb3IoKQogICAgY3VyLmV4ZWN1dGUoc3FsKQogICAgY29ubi5jb21taXQoKQoKCmRlZiBjcmVhdGVfb3JkZXJzKGNvbm4sIG9yZGVycyk6CiAgICBzcWwgPSAiIiIgSU5TRVJUIElOVE8gb3JkZXJzKG9yaWdRdHksIHByaWNlLCBzaWRlLCBwb3NpdGlvblNpZGUsIHN0YXR1cywgc3ltYm9sLCB0aW1lLCB0eXBlKSBWQUxVRVMoPyw/LD8sPyw/LD8sPyw/KSAiIiIKICAgIGN1ciA9IGNvbm4uY3Vyc29yKCkKICAgIGN1ci5leGVjdXRlKHNxbCwgb3JkZXJzKQoKCmRlZiBzY3JhcGUoYXBwPU5vbmUpOgogICAgdHJ5OgogICAgICAgIF9zY3JhcGUoYXBwPWFwcCkKICAgIGV4Y2VwdCBIVFRQUmVxdWVzdEVycm9yIGFzIGV4YzoKICAgICAgICBpZiBhcHAgaXMgTm9uZToKICAgICAgICAgICAgcHJpbnQoZXhjKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGFwcC5sb2dnZXIuZXJyb3IoZiJ7ZXhjfSIpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgaWYgYXBwIGlzIE5vbmU6CiAgICAgICAgICAgIHByaW50KGYiU2NyYXBlIGVycm9yOiB7ZX0iKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGFwcC5sb2dnZXIuZXJyb3IoZiJTY3JhcGUgZXJyb3I6IHtlfSIpCiAgICAKICAgICMgTGF6eSBtZXRyaWNzIGhvb2sgcG9zdC1zY3JhcGUgKHN0YW5kYWxvbmUsIG5vIHRlbXAgYXBwKQogICAgdHJ5OgogICAgICAgIGZyb20gLm1ldHJpY3MgaW1wb3J0IGdldF9hbGxfbWV0cmljcwogICAgICAgIGZyb20gLmRiIGltcG9ydCBzYXZlX21ldHJpY3MKICAgICAgICBsb29wID0gYXN5bmNpby5uZXdfZXZlbnRfbG9vcCgpCiAgICAgICAgYXN5bmNpby5zZXRfZXZlbnRfbG9vcChsb29wKQogICAgICAgIG1ldHJpY3MgPSBsb29wLnJ1bl91bnRpbF9jb21wbGV0ZShnZXRfYWxsX21ldHJpY3MoKSkKICAgICAgICBzYXZlZF9jb3VudCA9IHNhdmVfbWV0cmljcyhtZXRyaWNzKQogICAgICAgIGxvb3AuY2xvc2UoKQogICAgICAgIGlmIGFwcCBpcyBOb25lOgogICAgICAgICAgICBwcmludChmIlNhdmVkIHtzYXZlZF9jb3VudH0gbWV0cmljcyAoQ0xJIG1vZGUpIikKICAgICAgICBlbHNlOgogICAgICAgICAgICBhcHAubG9nZ2VyLmluZm8oZiJTYXZlZCB7c2F2ZWRfY291bnR9IG1ldHJpY3MiKQogICAgICAgIHEucHV0KG1ldHJpY3MpICAjIFF1ZXVlIGZvciBXUyBlbWl0IChpZiBhcHApCiAgICBleGNlcHQgSW1wb3J0RXJyb3IgYXMgaWU6CiAgICAgICAgaWYgYXBwIGlzIE5vbmU6CiAgICAgICAgICAgIHByaW50KGYiTWV0cmljcyBpbXBvcnQgZmFpbGVkIChDTEkpOiB7aWV9IikKICAgICAgICBlbHNlOgogICAgICAgICAgICBhcHAubG9nZ2VyLndhcm5pbmcoZiJNZXRyaWNzIGltcG9ydCBmYWlsZWQ6IHtpZX0iKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBtX2U6CiAgICAgICAgaWYgYXBwIGlzIE5vbmU6CiAgICAgICAgICAgIHByaW50KGYiTWV0cmljcyBlcnJvciAoQ0xJKToge21fZX0iKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGFwcC5sb2dnZXIuZXJyb3IoZiJNZXRyaWNzIGVycm9yOiB7bV9lfSIpCgoKIyBmbGFrZTg6IG5vcWE6IEM5MDEKZGVmIF9zY3JhcGUoYXBwPU5vbmUpOgogICAgc3RhcnQgPSB0aW1lLnRpbWUoKQogICAgY2ZnX3BhdGggPSBwYXRobGliLlBhdGgob3MucGF0aC5kaXJuYW1lKF9fZmlsZV9fKSkucGFyZW50LnBhcmVudAogICAgY2ZnID0gQ29uZmlnLmZyb21fY29uZmlnX2RpcihjZmdfcGF0aCkKICAgIGRiX3NldHVwKGNmZy5EQVRBQkFTRSwgYXBwKSAgIyBGaXg6IFBhc3MgYXBwIGZvciBjb250ZXh0CgogICAgdXBfdG9fZGF0ZSA9IEZhbHNlCiAgICB3ZWlnaHR1c2VkID0gMAogICAgcHJvY2Vzc2VkLCB1cGRhdGVkX3Bvc2l0aW9ucywgbmV3X3Bvc2l0aW9ucywgdXBkYXRlZF9vcmRlcnMsIHNsZWVwcyA9IDAsIDAsIDAsIDAsIDAKCiAgICBleGNoYW5nZV9zdHIgPSBzdHIoY2ZnLkVYQ0hBTkdFKS5sb3dlcigpCiAgICBpZiAnYmluYW5jZScgaW4gZXhjaGFuZ2Vfc3RyOgogICAgICAgIGlmIHdlaWdodHVzZWQgPCA4MDA6CiAgICAgICAgICAgIHJlc3BvbnNlSGVhZGVyLCByZXNwb25zZUpTT04gPSBzZW5kX3NpZ25lZF9yZXF1ZXN0KAogICAgICAgICAgICAgICAgIkdFVCIsICIvZmFwaS92MS9vcGVuT3JkZXJzIiwgYXBwPWFwcAogICAgICAgICAgICApCiAgICAgICAgICAgIHdlaWdodHVzZWQgPSBpbnQocmVzcG9uc2VIZWFkZXJbIlgtTUJYLVVTRUQtV0VJR0hULTFNIl0pCgogICAgICAgICAgICB3aXRoIGNyZWF0ZV9jb25uZWN0aW9uKGNmZy5EQVRBQkFTRSkgYXMgY29ubjoKICAgICAgICAgICAgICAgIGRlbGV0ZV9hbGxfb3JkZXJzKGNvbm4pCiAgICAgICAgICAgICAgICBmb3Igb3JkZXIgaW4gcmVzcG9uc2VKU09OOgogICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRfb3JkZXJzICs9IDEKICAgICAgICAgICAgICAgICAgICByb3cgPSAoCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0KG9yZGVyWyJvcmlnUXR5Il0pLAogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdChvcmRlclsicHJpY2UiXSksCiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyWyJzaWRlIl0sCiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyWyJwb3NpdGlvblNpZGUiXSwKICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJbInN0YXR1cyJdLAogICAgICAgICAgICAgICAgICAgICAgICBvcmRlclsic3ltYm9sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgIGludChvcmRlclsidGltZSJdKSwKICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJbInR5cGUiXSwKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlX29yZGVycyhjb25uLCByb3cpCiAgICAgICAgICAgICAgICBjb25uLmNvbW1pdCgpCgogICAgICAgIHJlc3BvbnNlSGVhZGVyLCByZXNwb25zZUpTT04gPSBzZW5kX3NpZ25lZF9yZXF1ZXN0KCJHRVQiLCAiL2ZhcGkvdjIvYWNjb3VudCIsIGFwcD1hcHApCiAgICAgICAgd2VpZ2h0dXNlZCA9IGludChyZXNwb25zZUhlYWRlclsiWC1NQlgtVVNFRC1XRUlHSFQtMU0iXSkKCiAgICAgICAgb3ZlcndlaWdodCA9IEZhbHNlCiAgICAgICAgdHJ5OgogICAgICAgICAgICBwb3NpdGlvbnMgPSByZXNwb25zZUpTT05bInBvc2l0aW9ucyJdCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgb3ZlcndlaWdodCA9IFRydWUKCiAgICAgICAgaWYgbm90IG92ZXJ3ZWlnaHQ6CiAgICAgICAgICAgIHdpdGggY3JlYXRlX2Nvbm5lY3Rpb24oY2ZnLkRBVEFCQVNFKSBhcyBjb25uOgogICAgICAgICAgICAgICAgdG90YWxzX3JvdyA9ICgKICAgICAgICAgICAgICAgICAgICBmbG9hdChyZXNwb25zZUpTT05bInRvdGFsV2FsbGV0QmFsYW5jZSJdKSwKICAgICAgICAgICAgICAgICAgICBmbG9hdChyZXNwb25zZUpTT05bInRvdGFsVW5yZWFsaXplZFByb2ZpdCJdKSwKICAgICAgICAgICAgICAgICAgICBmbG9hdChyZXNwb25zZUpTT05bInRvdGFsTWFyZ2luQmFsYW5jZSJdKSwKICAgICAgICAgICAgICAgICAgICBmbG9hdChyZXNwb25zZUpTT05bImF2YWlsYWJsZUJhbGFuY2UiXSksCiAgICAgICAgICAgICAgICAgICAgZmxvYXQocmVzcG9uc2VKU09OWyJtYXhXaXRoZHJhd0Ftb3VudCJdKSwKICAgICAgICAgICAgICAgICAgICAxLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgYWNjb3VudENoZWNrID0gc2VsZWN0X2FjY291bnQoY29ubikKICAgICAgICAgICAgICAgIGlmIGFjY291bnRDaGVjayBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgIGNyZWF0ZV9hY2NvdW50KGNvbm4sIHRvdGFsc19yb3cpCiAgICAgICAgICAgICAgICBlbGlmIGZsb2F0KGFjY291bnRDaGVja1swXSkgIT0gZmxvYXQoCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VKU09OWyJ0b3RhbFdhbGxldEJhbGFuY2UiXQogICAgICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgICAgICB1cGRhdGVfYWNjb3VudChjb25uLCB0b3RhbHNfcm93KQoKICAgICAgICAgICAgICAgIGRlbGV0ZV9hbGxfcG9zaXRpb25zKGNvbm4pCgogICAgICAgICAgICAgICAgZm9yIHBvc2l0aW9uIGluIHBvc2l0aW9uczoKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbl9yb3cgPSAoCiAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0KHBvc2l0aW9uWyJ1bnJlYWxpemVkUHJvZml0Il0pLAogICAgICAgICAgICAgICAgICAgICAgICBpbnQocG9zaXRpb25bImxldmVyYWdlIl0pLAogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdChwb3NpdGlvblsiZW50cnlQcmljZSJdKSwKICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQocG9zaXRpb25bInBvc2l0aW9uQW10Il0pLAogICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblsic3ltYm9sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWyJwb3NpdGlvblNpZGUiXSwKICAgICAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgICAgIGNyZWF0ZV9wb3NpdGlvbihjb25uLCBwb3NpdGlvbl9yb3cpCiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZF9wb3NpdGlvbnMgKz0gMQoKICAgICAgICAgICAgICAgIGNvbm4uY29tbWl0KCkKCiAgICAgICAgd2hpbGUgbm90IHVwX3RvX2RhdGU6CiAgICAgICAgICAgIGlmIHdlaWdodHVzZWQgPiA4MDA6CiAgICAgICAgICAgICAgICBtZXNzYWdlID0gZiJXZWlnaHQgdXNlZDoge3dlaWdodHVzZWR9LzgwMFxuUHJvY2Vzc2VkOiB7cHJvY2Vzc2VkfVxuU2xlZXA6IDEgbWludXRlIgogICAgICAgICAgICAgICAgaWYgYXBwIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQobWVzc2FnZSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYXBwLmxvZ2dlci5pbmZvKG1lc3NhZ2UpCiAgICAgICAgICAgICAgICBzbGVlcHMgKz0gMQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCg2MCkKCiAgICAgICAgICAgIHdpdGggY3JlYXRlX2Nvbm5lY3Rpb24oY2ZnLkRBVEFCQVNFKSBhcyBjb25uOgogICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gc2VsZWN0X2xhdGVzdF9pbmNvbWUoY29ubikKICAgICAgICAgICAgICAgIGlmIHN0YXJ0VGltZSBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZSA9IGludCgKICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZXRpbWUuZnJvbWlzb2Zvcm1hdCgiMjAyMC0wMS0wMSAwMDowMDowMCswMDowMCIpLnRpbWVzdGFtcCgpCiAgICAgICAgICAgICAgICAgICAgICAgICogMTAwMAogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gc3RhcnRUaW1lWzBdCgogICAgICAgICAgICAgICAgcGFyYW1zID0geyJzdGFydFRpbWUiOiBzdGFydFRpbWUgKyAxLCAibGltaXQiOiAxMDAwfQoKICAgICAgICAgICAgICAgIHJlc3BvbnNlSGVhZGVyLCByZXNwb25zZUpTT04gPSBzZW5kX3NpZ25lZF9yZXF1ZXN0KAogICAgICAgICAgICAgICAgICAgIGh0dHBfbWV0aG9kPSJHRVQiLCB1cmxfcGF0aD0iL2ZhcGkvdjEvaW5jb21lIiwgcGF5bG9hZD1wYXJhbXMsIGFwcD1hcHAKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHdlaWdodHVzZWQgPSBpbnQocmVzcG9uc2VIZWFkZXJbIlgtTUJYLVVTRUQtV0VJR0hULTFNIl0pCgogICAgICAgICAgICAgICAgaWYgbGVuKHJlc3BvbnNlSlNPTikgPT0gMDoKICAgICAgICAgICAgICAgICAgICB1cF90b19kYXRlID0gVHJ1ZQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBmb3IgaW5jb21lIGluIHJlc3BvbnNlSlNPTjoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKGluY29tZVsidHJhZGVJZCJdKSA9PSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jb21lWyJ0cmFkZUlkIl0gPSAwCiAgICAgICAgICAgICAgICAgICAgICAgIGluY29tZV9yb3cgPSAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQoaW5jb21lWyJ0cmFuSWQiXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNvbWVbInN5bWJvbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jb21lWyJpbmNvbWVUeXBlIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNvbWVbImluY29tZSJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jb21lWyJhc3NldCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jb21lWyJpbmZvIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQoaW5jb21lWyJ0aW1lIl0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50KGluY29tZVsidHJhZGVJZCJdKSwKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVfaW5jb21lKGNvbm4sIGluY29tZV9yb3cpCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZCArPSAxCgogICAgICAgICAgICAgICAgICAgIGNvbm4uY29tbWl0KCkKICAgIGVsaWYgJ2J5Yml0JyBpbiBleGNoYW5nZV9zdHI6CiAgICAgICAgYWxsX3N5bWJvbHMgPSBbXQogICAgICAgIGV4ZWNfdHlwZSA9IHsKICAgICAgICAgICAgIlRyYWRlIjogIlJFQUxJWkVEX1BOTCIsCiAgICAgICAgICAgICJGdW5kaW5nIjogIkZVTkRJTkdfRkVFIiwKICAgICAgICAgICAgIkFkbFRyYWRlIjogIkFETFRSQURFIiwKICAgICAgICAgICAgIkJ1c3RUcmFkZSI6ICJCVVNUVFJBREUiLAogICAgICAgIH0KCiAgICAgICAgcGFyYW1zID0geyJjYXRlZ29yeSI6ICJsaW5lYXIiLCAibGltaXQiOiAyMDAsICJzZXR0bGVDb2luIjogIlVTRFQifQogICAgICAgIHJlc3BvbnNlSGVhZGVyLCByZXNwb25zZUpTT04gPSBzZW5kX3NpZ25lZF9yZXF1ZXN0KAogICAgICAgICAgICBodHRwX21ldGhvZD0iR0VUIiwKICAgICAgICAgICAgdXJsX3BhdGg9Ii92NS9wb3NpdGlvbi9saXN0IiwKICAgICAgICAgICAgcGF5bG9hZD1wYXJhbXMsCiAgICAgICAgICAgIGV4Y2hhbmdlPSJieWJpdCIsCiAgICAgICAgICAgIGFwcD1hcHAsCiAgICAgICAgKQogICAgICAgIGlmICJyYXRlX2xpbWl0X3N0YXR1cyIgaW4gcmVzcG9uc2VKU09OOgogICAgICAgICAgICB3ZWlnaHR1c2VkID0gaW50KHJlc3BvbnNlSlNPTlsicmF0ZV9saW1pdF9zdGF0dXMiXSkKCiAgICAgICAgd2l0aCBjcmVhdGVfY29ubmVjdGlvbihjZmcuREFUQUJBU0UpIGFzIGNvbm46CiAgICAgICAgICAgIG1lc3NhZ2UgPSAiRGVsZXRpbmcgb3JkZXJzIGFuZCBwb3NpdGlvbnMgZnJvbSBkYiIKICAgICAgICAgICAgaWYgYXBwIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBwcmludChtZXNzYWdlKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgYXBwLmxvZ2dlci5pbmZvKG1lc3NhZ2UpCiAgICAgICAgICAgIGRlbGV0ZV9hbGxfb3JkZXJzKGNvbm4pCiAgICAgICAgICAgIGRlbGV0ZV9hbGxfcG9zaXRpb25zKGNvbm4pCiAgICAgICAgICAgIG1lc3NhZ2UgPSAiTG9hZGluZyBvcmRlcnMgYW5kIHBvc2l0aW9ucyBmcm9tIGV4Y2hhbmdlIgogICAgICAgICAgICBpZiBhcHAgaXMgTm9uZToKICAgICAgICAgICAgICAgIHByaW50KG1lc3NhZ2UpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBhcHAubG9nZ2VyLmluZm8obWVzc2FnZSkKICAgICAgICAgICAgaWYgInJlc3VsdCIgaW4gcmVzcG9uc2VKU09OOgogICAgICAgICAgICAgICAgaWYgImxpc3QiIGluIHJlc3BvbnNlSlNPTlsicmVzdWx0Il06CiAgICAgICAgICAgICAgICAgICAgZm9yIHBvc2l0aW9uIGluIHJlc3BvbnNlSlNPTlsicmVzdWx0Il1bImxpc3QiXToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgd2VpZ2h0dXNlZCA+IDUwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGYiV2VpZ2h0IHVzZWQ6IHt3ZWlnaHR1c2VkfS97MTIwLXdlaWdodHVzZWR9XG5Qcm9jZXNzZWQ6IHt1cGRhdGVkX3Bvc2l0aW9ucyArIG5ld19wb3NpdGlvbnMgKyB1cGRhdGVkX29yZGVyc31cblNsZWVwOiAxIG1pbnV0ZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFwcCBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KG1lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5sb2dnZXIuaW5mbyhtZXNzYWdlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xlZXBzICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNjApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHR1c2VkID0gMAoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgcG9zaXRpb25bInN5bWJvbCJdIG5vdCBpbiBhbGxfc3ltYm9sczoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbF9zeW1ib2xzLmFwcGVuZChwb3NpdGlvblsic3ltYm9sIl0pCgogICAgICAgICAgICAgICAgICAgICAgICBpZiBmbG9hdChwb3NpdGlvblsic2l6ZSJdKSA+IDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbl9zaWRlcyA9IHsiYnV5IjogIkxPTkciLCAic2VsbCI6ICJTSE9SVCJ9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbnNpZGUgPSBwb3NpdGlvbl9zaWRlc1twb3NpdGlvblsic2lkZSJdLmxvd2VyKCldCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25fcm93ID0gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0KHBvc2l0aW9uWyJ1bnJlYWxpc2VkUG5sIl0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludChwb3NpdGlvblsibGV2ZXJhZ2UiXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQocG9zaXRpb25bImF2Z1ByaWNlIl0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0KHBvc2l0aW9uWyJzaXplIl0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uWyJzeW1ib2wiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbnNpZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlX3Bvc2l0aW9uKGNvbm4sIHBvc2l0aW9uX3JvdykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRfcG9zaXRpb25zICs9IDEKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInN5bWJvbCI6IHBvc2l0aW9uWyJzeW1ib2wiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2F0ZWdvcnkiOiAibGluZWFyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSGVhZGVyLCByZXNwb25zZUpTT04gPSBzZW5kX3NpZ25lZF9yZXF1ZXN0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0dHBfbWV0aG9kPSJHRVQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybF9wYXRoPSIvdjUvb3JkZXIvcmVhbHRpbWUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQ9cGFyYW1zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2hhbmdlPSJieWJpdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwPWFwcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICJyYXRlX2xpbWl0X3N0YXR1cyIgaW4gcmVzcG9uc2VKU09OOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHVzZWQgPSBpbnQocmVzcG9uc2VKU09OWyJyYXRlX2xpbWl0X3N0YXR1cyJdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHR1c2VkICs9IDEKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAicmVzdWx0IiBpbiByZXNwb25zZUpTT046CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgImxpc3QiIGluIHJlc3BvbnNlSlNPTlsicmVzdWx0Il06CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBvcmRlciBpbiByZXNwb25zZUpTT05bInJlc3VsdCJdWyJsaXN0Il06CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkX29yZGVycyArPSAxCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJzaWRlID0gb3JkZXJbInNpZGUiXS51cHBlcigpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93ID0gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsb2F0KG9yZGVyWyJxdHkiXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQob3JkZXJbInByaWNlIl0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyc2lkZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbnNpZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJbIm9yZGVyU3RhdHVzIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJbInN5bWJvbCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludChvcmRlclsiY3JlYXRlZFRpbWUiXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJbIm9yZGVyVHlwZSJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlX29yZGVycyhjb25uLCByb3cpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICJPcmRlcnM6ICdsaXN0JyBub3QgaW4gcmVzcG9uc2VKU09OWydyZXN1bHQnXSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgYXBwIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludChtZXNzYWdlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmxvZ2dlci53YXJuaW5nKG1lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAiT3JkZXJzOiAncmVzdWx0JyBub3QgaW4gcmVzcG9uc2VKU09OIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFwcCBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludChtZXNzYWdlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5sb2dnZXIud2FybmluZyhtZXNzYWdlKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gIlBvc2l0aW9uczogJ2xpc3QnIG5vdCBpbiByZXNwb25zZUpTT05bJ3Jlc3VsdCddIgogICAgICAgICAgICAgICAgICAgIGlmIGFwcCBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludChtZXNzYWdlKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5sb2dnZXIud2FybmluZyhtZXNzYWdlKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbWVzc2FnZSA9ICJQb3NpdGlvbnM6ICdyZXN1bHQnIG5vdCBpbiByZXNwb25zZUpTT04iCiAgICAgICAgICAgICAgICBpZiBhcHAgaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICBwcmludChtZXNzYWdlKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBhcHAubG9nZ2VyLndhcm5pbmcobWVzc2FnZSkKCiAgICAgICAgICAgIHBhcmFtcyA9IHsiY29pbiI6ICJVU0RUIiwgImFjY291bnRUeXBlIjogIkNPTlRSQUNUIn0KICAgICAgICAgICAgcmVzcG9uc2VIZWFkZXIsIHJlc3BvbnNlSlNPTiA9IHNlbmRfc2lnbmVkX3JlcXVlc3QoCiAgICAgICAgICAgICAgICBodHRwX21ldGhvZD0iR0VUIiwKICAgICAgICAgICAgICAgIHVybF9wYXRoPSIvdjUvYWNjb3VudC93YWxsZXQtYmFsYW5jZSIsCiAgICAgICAgICAgICAgICBwYXlsb2FkPXBhcmFtcywKICAgICAgICAgICAgICAgIGV4Y2hhbmdlPSJieWJpdCIsCiAgICAgICAgICAgICAgICBhcHA9YXBwLAogICAgICAgICAgICApCiAgICAgICAgICAgIG1lc3NhZ2UgPSAiVXBkYXRpbmcgd2FsbGV0IGJhbGFuY2UgZnJvbSBleGNoYW5nZSIKICAgICAgICAgICAgaWYgYXBwIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBwcmludChtZXNzYWdlKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgYXBwLmxvZ2dlci5pbmZvKG1lc3NhZ2UpCiAgICAgICAgICAgIGlmICJyZXN1bHQiIGluIHJlc3BvbnNlSlNPTjoKICAgICAgICAgICAgICAgIGlmICJsaXN0IiBpbiByZXNwb25zZUpTT05bInJlc3VsdCJdOgogICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VKU09OWyJyZXN1bHQiXVsibGlzdCJdWzBdWyJ0b3RhbE1haW50ZW5hbmNlTWFyZ2luIl0KICAgICAgICAgICAgICAgICAgICAgICAgPT0gIiIKICAgICAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgICAgICBtYWludGVuYW5jZV9tYXJnaW4gPSAwLjAKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBtYWludGVuYW5jZV9tYXJnaW4gPSBmbG9hdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSlNPTlsicmVzdWx0Il1bImxpc3QiXVswXVsidG90YWxNYWludGVuYW5jZU1hcmdpbiJdCiAgICAgICAgICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICAgICAgdG90YWxzX3JvdyA9ICgKICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUpTT05bInJlc3VsdCJdWyJsaXN0Il1bMF1bImNvaW4iXVswXVsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAid2FsbGV0QmFsYW5jZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgZmxvYXQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUpTT05bInJlc3VsdCJdWyJsaXN0Il1bMF1bImNvaW4iXVswXVsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidW5yZWFsaXNlZFBubCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgbWFpbnRlbmFuY2VfbWFyZ2luLAogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSlNPTlsicmVzdWx0Il1bImxpc3QiXVswXVsiY29pbiJdWzBdWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhdmFpbGFibGVUb1dpdGhkcmF3IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCgwKSwKICAgICAgICAgICAgICAgICAgICAgICAgMSwKICAgICAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgICAgIGFjY291bnRDaGVjayA9IHNlbGVjdF9hY2NvdW50KGNvbm4pCiAgICAgICAgICAgICAgICAgICAgaWYgYWNjb3VudENoZWNrIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZV9hY2NvdW50KGNvbm4sIHRvdGFsc19yb3cpCiAgICAgICAgICAgICAgICAgICAgZWxpZiBmbG9hdChhY2NvdW50Q2hlY2tbMF0pICE9IGZsb2F0KAogICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUpTT05bInJlc3VsdCJdWyJsaXN0Il1bMF1bImNvaW4iXVswXVsid2FsbGV0QmFsYW5jZSJdCiAgICAgICAgICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlX2FjY291bnQoY29ubiwgdG90YWxzX3JvdykKCiAgICAgICAgICAgICAgICAgICAgY29ubi5jb21taXQoKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gIldhbGxldDogJ2xpc3QnIG5vdCBpbiByZXNwb25zZUpTT05bJ3Jlc3VsdCddIgogICAgICAgICAgICAgICAgICAgIGlmIGFwcCBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludChtZXNzYWdlKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5sb2dnZXIud2FybmluZyhtZXNzYWdlKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbWVzc2FnZSA9ICJXYWxsZXQ6ICdyZXN1bHQnIG5vdCBpbiByZXNwb25zZUpTT04iCiAgICAgICAgICAgICAgICBpZiBhcHAgaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICBwcmludChtZXNzYWdlKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBhcHAubG9nZ2VyLndhcm5pbmcobWVzc2FnZSkKCiAgICAgICAgYWxsX3N5bWJvbHMgPSBzb3J0ZWQoYWxsX3N5bWJvbHMpCiAgICAgICAgbWVzc2FnZSA9ICJVcGRhdGluZyBjbG9zZWQgUG5MIGZyb20gZXhjaGFuZ2UiCiAgICAgICAgaWYgYXBwIGlzIE5vbmU6CiAgICAgICAgICAgIHByaW50KG1lc3NhZ2UpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgYXBwLmxvZ2dlci5pbmZvKG1lc3NhZ2UpCiAgICAgICAgZm9yIHN5bWJvbCBpbiBhbGxfc3ltYm9sczoKICAgICAgICAgICAgdHJhZGVzID0ge30KICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgICAgInN5bWJvbCI6IHN5bWJvbCwKICAgICAgICAgICAgICAgICJjYXRlZ29yeSI6ICJsaW5lYXIiLAogICAgICAgICAgICAgICAgImxpbWl0IjogMTAwLAogICAgICAgICAgICB9CiAgICAgICAgICAgIHdpdGggY3JlYXRlX2Nvbm5lY3Rpb24oY2ZnLkRBVEFCQVNFKSBhcyBjb25uOgogICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gc2VsZWN0X2xhdGVzdF9pbmNvbWVfc3ltYm9sKGNvbm4sIHN5bWJvbCkKICAgICAgICAgICAgICAgIHR3b195ZWFyc19hZ28gPSBkYXRldGltZS5ub3coKSAtIHRpbWVkZWx0YShkYXlzPTcyOSkKICAgICAgICAgICAgICAgIHR3b195ZWFyc19hZ29fdGltZXN0YW1wID0gaW50KHR3b195ZWFyc19hZ28udGltZXN0YW1wKCkgKiAxMDAwKQogICAgICAgICAgICAgICAgaWYgc3RhcnRUaW1lIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gaW50KAogICAgICAgICAgICAgICAgICAgICAgICBkYXRldGltZS5mcm9taXNvZm9ybWF0KCIyMDIwLTAxLTAxIDAwOjAwOjAwKzAwOjAwIikudGltZXN0YW1wKCkKICAgICAgICAgICAgICAgICAgICAgICAgKiAxMDAwCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWUgPSBpbnQoc3RhcnRUaW1lWzBdKSArIDEKCiAgICAgICAgICAgICAgICBpZiBzdGFydFRpbWUgPCB0d29feWVhcnNfYWdvX3RpbWVzdGFtcDoKICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWUgPSB0d29feWVhcnNfYWdvX3RpbWVzdGFtcAogICAgICAgICAgICAgICAgcGFyYW1zWyJzdGFydFRpbWUiXSA9IHN0YXJ0VGltZQoKICAgICAgICAgICAgaWYgd2VpZ2h0dXNlZCA+IDUwOgogICAgICAgICAgICAgICAgbWVzc2FnZSA9IGYiV2VpZ2h0IHVzZWQ6IHt3ZWlnaHR1c2VkfS8xMDBcblByb2Nlc3NlZDoge3Byb2Nlc3NlZH1cblNsZWVwOiAxIG1pbnV0ZSIKICAgICAgICAgICAgICAgIGlmIGFwcCBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgIHByaW50KG1lc3NhZ2UpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGFwcC5sb2dnZXIuaW5mbyhtZXNzYWdlKQogICAgICAgICAgICAgICAgc2xlZXBzICs9IDEKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNjApCiAgICAgICAgICAgICAgICB3ZWlnaHR1c2VkID0gMAoKICAgICAgICAgICAgcmVzcG9uc2VIZWFkZXIsIHJlc3BvbnNlSlNPTiA9IHNlbmRfc2lnbmVkX3JlcXVlc3QoCiAgICAgICAgICAgICAgICBodHRwX21ldGhvZD0iR0VUIiwKICAgICAgICAgICAgICAgIHVybF9wYXRoPSIvdjUvcG9zaXRpb24vY2xvc2VkLXBubCIsCiAgICAgICAgICAgICAgICBwYXlsb2FkPXBhcmFtcywKICAgICAgICAgICAgICAgIGV4Y2hhbmdlPSJieWJpdCIsCiAgICAgICAgICAgICAgICBhcHA9YXBwLAogICAgICAgICAgICApCgogICAgICAgICAgICBpZiAicmF0ZV9saW1pdF9zdGF0dXMiIGluIHJlc3BvbnNlSlNPTjoKICAgICAgICAgICAgICAgIHdlaWdodHVzZWQgPSBpbnQocmVzcG9uc2VKU09OWyJyYXRlX2xpbWl0X3N0YXR1cyJdKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgd2VpZ2h0dXNlZCArPSAxCgogICAgICAgICAgICBpZiAicmVzdWx0IiBpbiByZXNwb25zZUpTT046CiAgICAgICAgICAgICAgICBpZiByZXNwb25zZUpTT05bInJlc3VsdCJdIGlzIG5vdCBOb25lOgogICAgICAgICAgICAgICAgICAgIGlmICJsaXN0IiBpbiByZXNwb25zZUpTT05bInJlc3VsdCJdOgogICAgICAgICAgICAgICAgICAgICAgICBpZiByZXNwb25zZUpTT05bInJlc3VsdCJdWyJsaXN0Il0gaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdHJhZGUgaW4gcmVzcG9uc2VKU09OWyJyZXN1bHQiXVsibGlzdCJdOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWRlc1t0cmFkZVsiY3JlYXRlZFRpbWUiXV0gPSBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWRlWyJvcmRlcklkIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWRlWyJleGVjVHlwZSJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFkZVsiY2xvc2VkUG5sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWRlWyJvcmRlcklkIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXQoKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAiQ2xvc2VkIFBOTDogcmVzcG9uc2VKU09OWydyZXN1bHQnXVsnbGlzdCddIGlzIE5vbmUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBhcHAgaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludChtZXNzYWdlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAubG9nZ2VyLndhcm5pbmcobWVzc2FnZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICJDbG9zZWQgUE5MOiAnZGF0YScgbm90IGZvdW5kIGluIHJlc3BvbnNlSlNPTlsncmVzdWx0J11bJ2xpc3QnXSIKICAgICAgICAgICAgICAgICAgICAgICAgaWYgYXBwIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludChtZXNzYWdlKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmxvZ2dlci53YXJuaW5nKG1lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAiQ2xvc2VkIFBOTDogJ3Jlc3VsdCcgaXMgTm9uZSIKICAgICAgICAgICAgICAgICAgICBpZiBhcHAgaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQobWVzc2FnZSkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBhcHAubG9nZ2VyLndhcm5pbmcobWVzc2FnZSkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbWVzc2FnZSA9ICJDbG9zZWQgUE5MOiAncmVzdWx0JyBub3QgZm91bmQgaW4gcmVzcG9uc2VKU09OIgogICAgICAgICAgICAgICAgaWYgYXBwIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQobWVzc2FnZSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYXBwLmxvZ2dlci53YXJuaW5nKG1lc3NhZ2UpCiAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgaWYgbGVuKHRyYWRlcykgPiAwOgogICAgICAgICAgICAgICAgdHJhZGVzID0gT3JkZXJlZERpY3Qoc29ydGVkKHRyYWRlcy5pdGVtcygpKSkKICAgICAgICAgICAgICAgIHdpdGggY3JlYXRlX2Nvbm5lY3Rpb24oY2ZnLkRBVEFCQVNFKSBhcyBjb25uOgogICAgICAgICAgICAgICAgICAgIGZvciB0cmFkZSBpbiB0cmFkZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIGluY29tZV9yb3cgPSAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFkZXNbdHJhZGVdWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhlY190eXBlW3RyYWRlc1t0cmFkZV1bMV1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhZGVzW3RyYWRlXVsyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJVU0RUIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWNfdHlwZVt0cmFkZXNbdHJhZGVdWzFdXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCh0cmFkZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFkZXNbdHJhZGVdWzBdLAogICAgICAgICAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVfaW5jb21lKGNvbm4sIGluY29tZV9yb3cpCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZCArPSAxCiAgICAgICAgICAgICAgICAgICAgY29ubi5jb21taXQoKQogICAgZWxzZToKICAgICAgICBtZXNzYWdlID0gZiJFeGNoYW5nZToge2NmZy5FWENIQU5HRX0gaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQiCiAgICAgICAgaWYgYXBwIGlzIE5vbmU6CiAgICAgICAgICAgIHByaW50KG1lc3NhZ2UpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgYXBwLmxvZ2dlci5pbmZvKG1lc3NhZ2UpCgogICAgZWxhcHNlZCA9IHRpbWUudGltZSgpIC0gc3RhcnQKICAgIG1lc3NhZ2UgPSBmIk9yZGVycyB1cGRhdGVkOiB7dXBkYXRlZF9vcmRlcnN9OyBQb3NpdGlvbnMgdXBkYXRlZDoge3VwZGF0ZWRfcG9zaXRpb25zfSAobmV3OiB7bmV3X3Bvc2l0aW9uc30pOyBUcmFkZXMgcHJvY2Vzc2VkOiB7cHJvY2Vzc2VkfTsgVGltZSBlbGFwc2VkOiB7dGltZWRlbHRhKHNlY29uZHM9ZWxhcHNlZCl9OyBTbGVlcHM6IHtzbGVlcHN9IgogICAgaWYgYXBwIGlzIE5vbmU6CiAgICAgICAgcHJpbnQobWVzc2FnZSkKICAgIGVsc2U6CiAgICAgICAgYXBwLmxvZ2dlci5pbmZvKG1lc3NhZ2Up",
        "summary": "901L: from __future__ import annotations\n\nimport hashlib\nimport hmac\nimport sqlite3\nimport threading\nimpor..."
      },
      {
        "path": "backend\\src\\futuresboard\\utils.py",
        "type": ".py",
        "content": "aW1wb3J0IHJlcXVlc3RzCmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IE9yZGVyZWREaWN0CmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCB1cmxlbmNvZGUKZnJvbSBmbGFzayBpbXBvcnQgY3VycmVudF9hcHAKCmRlZiBzZW5kX3B1YmxpY19yZXF1ZXN0KHVybF9wYXRoLCBwYXlsb2FkPXt9LCBhcGlfYmFzZT1Ob25lKToKICAgICIiIlB1YmxpYyBBUEkgcmVxdWVzdCB3aXRoIG9wdGlvbmFsIGJhc2UgVVJMIChkZWZhdWx0IGZhcGkpLiIiIgogICAgYmFzZSA9IGFwaV9iYXNlIG9yIGN1cnJlbnRfYXBwLmNvbmZpZy5nZXQoJ0FQSV9CQVNFX1VSTCcsICdodHRwczovL2ZhcGkuYmluYW5jZS5jb20nKQogICAgcXVlcnlfc3RyaW5nID0gdXJsZW5jb2RlKHBheWxvYWQsIFRydWUpCiAgICB1cmwgPSBiYXNlICsgdXJsX3BhdGgKICAgIGlmIHF1ZXJ5X3N0cmluZzoKICAgICAgICB1cmwgPSB1cmwgKyAiPyIgKyBxdWVyeV9zdHJpbmcKICAgIHRyeToKICAgICAgICBzZXNzaW9uID0gcmVxdWVzdHMuU2Vzc2lvbigpCiAgICAgICAgc2Vzc2lvbi5oZWFkZXJzLnVwZGF0ZSh7IkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgifSkKICAgICAgICByZXNwb25zZSA9IHNlc3Npb24uZ2V0KHVybCkKICAgICAgICBwcmludChmIkRFQlVHIEFQSToge3VybH0gLSBTdGF0dXM6IHtyZXNwb25zZS5zdGF0dXNfY29kZX0iKSAgIyBLZWVwIGRlYnVnCiAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgIT0gMjAwOgogICAgICAgICAgICBwcmludChmIk5vbi0yMDAgc3RhdHVzIGZvciB7dXJsfToge3Jlc3BvbnNlLnRleHRbOjEwMF19IikKICAgICAgICAgICAgcmV0dXJuIHt9LCBbXSAgIyBGYWxsYmFjawogICAgICAgIAogICAgICAgIGlmIG5vdCByZXNwb25zZS50ZXh0LnN0cmlwKCk6CiAgICAgICAgICAgIHByaW50KGYiRW1wdHkgcmVzcG9uc2UgZm9yIHt1cmx9IikKICAgICAgICAgICAgcmV0dXJuIHt9LCBbXQogICAgICAgIAogICAgICAgICMgRGV0ZWN0IEhUTUwgZXJyb3IgcGFnZQogICAgICAgIGlmIHJlc3BvbnNlLnRleHQuc3RhcnRzd2l0aCgnPCFET0NUWVBFJykgb3IgJ2JpbmFuY2UuY29tL2VuL2Vycm9yJyBpbiByZXNwb25zZS50ZXh0Lmxvd2VyKCk6CiAgICAgICAgICAgIHByaW50KGYiSFRNTCBlcnJvciBwYWdlIGZvciB7dXJsfTogUmVnaW9uYWwgYmxvY2sgb3IgaW52YWxpZCBhY2Nlc3MuIEZhbGxiYWNrIGVtcHR5LiIpCiAgICAgICAgICAgIHJldHVybiB7fSwgW10KICAgICAgICAKICAgICAgICB0cnk6CiAgICAgICAgICAgIGpzb25fcmVzcG9uc2UgPSByZXNwb25zZS5qc29uKCkKICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5KU09ORGVjb2RlRXJyb3IgYXMgZToKICAgICAgICAgICAgcHJpbnQoZiJOb24tSlNPTiByZXNwb25zZSBmb3Ige3VybH06IHtyZXNwb25zZS50ZXh0WzoyMDBdfSIpCiAgICAgICAgICAgIGpzb25fcmVzcG9uc2UgPSBbXSAgIyBGYWxsYmFjayBlbXB0eSBsaXN0CiAgICAgICAgCiAgICAgICAgaWYgImNvZGUiIGluIGpzb25fcmVzcG9uc2UgYW5kIGpzb25fcmVzcG9uc2VbImNvZGUiXSA8IDA6CiAgICAgICAgICAgIHByaW50KGYiQVBJIGVycm9yIGZvciB7dXJsfToge2pzb25fcmVzcG9uc2VbJ21zZyddfSIpCiAgICAgICAgICAgIHJldHVybiB7fSwgW10KICAgICAgICAKICAgICAgICByZXR1cm4gcmVzcG9uc2UuaGVhZGVycywganNvbl9yZXNwb25zZQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yIGFzIGU6CiAgICAgICAgcHJpbnQoZiJDb25uZWN0aW9uIGVycm9yIGZvciB7dXJsfToge2V9IikKICAgICAgICByZXR1cm4ge30sIFtdCgpkZWYgaGFzaGluZyhxdWVyeV9zdHJpbmcsIGV4Y2hhbmdlPSJiaW5hbmNlIiwgdGltZXN0YW1wPU5vbmUpOgogICAgIiIiU2lnbmF0dXJlIGhhc2hpbmcgKGZyb20gc2NyYXBlci5weSkuIiIiCiAgICBpbXBvcnQgaG1hYwogICAgaW1wb3J0IGhhc2hsaWIKICAgIGlmIGV4Y2hhbmdlID09ICJieWJpdCI6CiAgICAgICAgcXVlcnlfc3RyaW5nID0gZiJ7dGltZXN0YW1wfXtjdXJyZW50X2FwcC5jb25maWdbJ0FQSV9LRVknXX01MDAwIiArIHF1ZXJ5X3N0cmluZwogICAgICAgIHJldHVybiBobWFjLm5ldygKICAgICAgICAgICAgYnl0ZXMoY3VycmVudF9hcHAuY29uZmlnWyJBUElfU0VDUkVUIl0uZW5jb2RlKCJ1dGYtOCIpKSwKICAgICAgICAgICAgcXVlcnlfc3RyaW5nLmVuY29kZSgidXRmLTgiKSwKICAgICAgICAgICAgaGFzaGxpYi5zaGEyNTYsCiAgICAgICAgKS5oZXhkaWdlc3QoKQogICAgcmV0dXJuIGhtYWMubmV3KAogICAgICAgIGJ5dGVzKGN1cnJlbnRfYXBwLmNvbmZpZ1siQVBJX1NFQ1JFVCJdLmVuY29kZSgidXRmLTgiKSksCiAgICAgICAgcXVlcnlfc3RyaW5nLmVuY29kZSgidXRmLTgiKSwKICAgICAgICBoYXNobGliLnNoYTI1NiwKICAgICkuaGV4ZGlnZXN0KCk=",
        "summary": "61L: import requests\nfrom collections import OrderedDict\nfrom urllib.parse import urlencode\nfrom flask im..."
      },
      {
        "path": "backend\\src\\futuresboard\\version.py",
        "type": ".py",
        "content": "IyBweWxpbnQ6IHNraXAtZmlsZQoKX192ZXJzaW9uX18gPSAiMC4zLjQuZGV2MCtnNTcxMzdkNGU4LmQyMDI1MTAxNiI=",
        "summary": "3L: # pylint: skip-file\n\n__version__ = \"0.3.4.dev0+g57137d4e8.d20251016\"..."
      },
      {
        "path": "backend\\src\\futuresboard\\wsgi.py",
        "type": ".py",
        "content": "ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IGZ1dHVyZXNib2FyZC5hcHAKCgphcHAgPSBmdXR1cmVzYm9hcmQuYXBwLmluaXRfYXBwKCkK",
        "summary": "6L: from __future__ import annotations\n\nimport futuresboard.app\n\n\napp = futuresboard.app.init_app()\n..."
      }
    ]
  }
}